  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (2.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (1.5ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:20:05.012925', '2018-07-01 09:20:05.012925', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:20:05.012925', '2018-07-01 09:20:05.012925', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 09:20:05.012925', '2018-07-01 09:20:05.012925', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:20:05.023734', '2018-07-01 09:20:05.023734', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:20:05.023734', '2018-07-01 09:20:05.023734', 298486374)[0m
  [1m[36mFixture Insert (2.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:20:05.031783', '2018-07-01 09:20:05.031783', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:20:05.031783', '2018-07-01 09:20:05.031783', 298486374, 298486374, 298486374)[0m
  [1m[35m (27.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:20:05 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 67ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 04:20:05 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:20:05.454640"], ["updated_at", "2018-07-01 09:20:05.454640"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:20:05.475557"], ["updated_at", "2018-07-01 09:20:05.475557"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 30ms (ActiveRecord: 4.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 04:20:05 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (9.4ms)
Completed 200 OK in 428ms (Views: 420.6ms | ActiveRecord: 1.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 04:20:05 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (20.5ms)
  Rendered line_items/edit.html.erb within layouts/application (24.0ms)
Completed 200 OK in 36ms (Views: 31.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:20:05 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (15.4ms)
Completed 200 OK in 23ms (Views: 19.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.3ms)
Completed 200 OK in 16ms (Views: 11.9ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 13ms (Views: 10.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 09:20:06.147004"], ["updated_at", "2018-07-01 09:20:06.147004"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.7ms)
  Rendered products/edit.html.erb within layouts/application (12.9ms)
Completed 200 OK in 24ms (Views: 19.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 09:20:06.215825"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 22ms (Views: 18.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 11ms (Views: 7.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.4ms)
  Rendered products/new.html.erb within layouts/application (7.5ms)
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:20:06.348114"], ["updated_at", "2018-07-01 09:20:06.348114"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.3ms)
  Rendered carts/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 14ms (Views: 11.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mLineItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts
Completed 302 Found in 13ms (ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/edit.html.erb within layouts/application (4.1ms)
Completed 200 OK in 13ms (Views: 9.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 13ms (Views: 9.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (5.5ms)
Completed 200 OK in 13ms (Views: 9.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 04:20:06 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (19.3ms)
Completed 200 OK in 29ms (Views: 25.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:42:58.197044', '2018-07-01 09:42:58.197044', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:42:58.197044', '2018-07-01 09:42:58.197044', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 09:42:58.197044', '2018-07-01 09:42:58.197044', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:42:58.204770', '2018-07-01 09:42:58.204770', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:42:58.204770', '2018-07-01 09:42:58.204770', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:42:58.209255', '2018-07-01 09:42:58.209255', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:42:58.209255', '2018-07-01 09:42:58.209255', 298486374, 298486374, 298486374)[0m
  [1m[35m (5.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:42:58 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (78.6ms)
Completed 200 OK in 919ms (Views: 898.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Redirected to http://www.example.com/
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.2ms)
Completed 200 OK in 14ms (Views: 10.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:42:59.606321"], ["updated_at", "2018-07-01 09:42:59.606321"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.9ms)
  Rendered carts/edit.html.erb within layouts/application (7.6ms)
Completed 200 OK in 17ms (Views: 13.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/new.html.erb within layouts/application (4.1ms)
Completed 200 OK in 12ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 09:42:59.695143"], ["updated_at", "2018-07-01 09:42:59.695143"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (20.2ms)
Completed 200 OK in 30ms (Views: 26.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 15ms (Views: 9.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (21.6ms)
  Rendered products/edit.html.erb within layouts/application (26.3ms)
Completed 200 OK in 58ms (Views: 31.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.3ms)
  Rendered products/new.html.erb within layouts/application (7.3ms)
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 09:42:59.951421"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 04:42:59 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.8ms)
Completed 200 OK in 27ms (Views: 21.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:43:00.057369"], ["updated_at", "2018-07-01 09:43:00.057369"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (3.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:43:00.072057"], ["updated_at", "2018-07-01 09:43:00.072057"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 26ms (ActiveRecord: 5.9ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.5ms)
Completed 200 OK in 17ms (Views: 12.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (17.8ms)
Completed 200 OK in 55ms (Views: 24.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.9ms)
Completed 200 OK in 19ms (Views: 13.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.9ms)
  Rendered line_items/edit.html.erb within layouts/application (10.7ms)
Completed 200 OK in 21ms (Views: 16.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.5ms)
  Rendered line_items/new.html.erb within layouts/application (6.5ms)
Completed 200 OK in 15ms (Views: 11.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:43:00 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 50ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:45:46.934143', '2018-07-01 09:45:46.934143', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:45:46.934143', '2018-07-01 09:45:46.934143', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 09:45:46.934143', '2018-07-01 09:45:46.934143', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:45:46.941484', '2018-07-01 09:45:46.941484', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:45:46.941484', '2018-07-01 09:45:46.941484', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:45:46.945842', '2018-07-01 09:45:46.945842', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:45:46.945842', '2018-07-01 09:45:46.945842', 298486374, 298486374, 298486374)[0m
  [1m[35m (8.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:45:46.985839"], ["updated_at", "2018-07-01 09:45:46.985839"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:45:47.196225"], ["updated_at", "2018-07-01 09:45:47.196225"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 09:45:47.206769"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:45:47.299224"], ["updated_at", "2018-07-01 09:45:47.299224"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 980190962], ["cart_id", 980190963], ["created_at", "2018-07-01 09:45:47.328354"], ["updated_at", "2018-07-01 09:45:47.328354"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (8.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 09:45:47.347961"], ["updated_at", "2018-07-01 09:45:47.347961"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:47:20.368293', '2018-07-01 09:47:20.368293', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:47:20.368293', '2018-07-01 09:47:20.368293', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 09:47:20.368293', '2018-07-01 09:47:20.368293', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:47:20.375657', '2018-07-01 09:47:20.375657', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:47:20.375657', '2018-07-01 09:47:20.375657', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:47:20.380055', '2018-07-01 09:47:20.380055', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:47:20.380055', '2018-07-01 09:47:20.380055', 298486374, 298486374, 298486374)[0m
  [1m[35m (34.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:47:20.448979"], ["updated_at", "2018-07-01 09:47:20.448979"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:47:20.514868"], ["updated_at", "2018-07-01 09:47:20.514868"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 09:47:20.526459"], ["updated_at", "2018-07-01 09:47:20.526459"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:47:20.542274"], ["updated_at", "2018-07-01 09:47:20.542274"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:47:20.557423"], ["updated_at", "2018-07-01 09:47:20.557423"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 09:47:20.568652"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:48:40.730106', '2018-07-01 09:48:40.730106', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:48:40.730106', '2018-07-01 09:48:40.730106', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 09:48:40.730106', '2018-07-01 09:48:40.730106', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:48:40.737065', '2018-07-01 09:48:40.737065', 980190962)[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:48:40.737065', '2018-07-01 09:48:40.737065', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:48:40.741395', '2018-07-01 09:48:40.741395', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:48:40.741395', '2018-07-01 09:48:40.741395', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:48:40 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 25ms (ActiveRecord: 1.9ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 04:48:41 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (36.0ms)
  Rendered line_items/new.html.erb within layouts/application (42.1ms)
Completed 200 OK in 709ms (Views: 681.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 04:48:41 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:48:41.869925"], ["updated_at", "2018-07-01 09:48:41.869925"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:48:41.900308"], ["updated_at", "2018-07-01 09:48:41.900308"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 50ms (ActiveRecord: 4.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 04:48:41 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (19.7ms)
Completed 200 OK in 35ms (Views: 25.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.8ms)
Completed 200 OK in 19ms (Views: 14.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 48ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.8ms)
  Rendered line_items/edit.html.erb within layouts/application (13.4ms)
Completed 200 OK in 48ms (Views: 21.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (17.7ms)
Completed 200 OK in 27ms (Views: 22.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:48:42.304392"], ["updated_at", "2018-07-01 09:48:42.304392"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:48:42.321394"], ["updated_at", "2018-07-01 09:48:42.321394"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 09:48:42.331914"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:48:42.345700"], ["updated_at", "2018-07-01 09:48:42.345700"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:48:42.361098"], ["updated_at", "2018-07-01 09:48:42.361098"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 09:48:42.371550"], ["updated_at", "2018-07-01 09:48:42.371550"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.6ms)
Completed 200 OK in 15ms (Views: 9.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 09:48:42.455116"], ["updated_at", "2018-07-01 09:48:42.455116"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.9ms)
  Rendered products/edit.html.erb within layouts/application (14.8ms)
Completed 200 OK in 47ms (Views: 20.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 09:48:42.599260"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.7ms)
Completed 200 OK in 25ms (Views: 21.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/new.html.erb within layouts/application (7.5ms)
Completed 200 OK in 16ms (Views: 12.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.5ms)
Completed 200 OK in 26ms (Views: 22.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.3ms)
Completed 200 OK in 18ms (Views: 14.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:48:42.759665"], ["updated_at", "2018-07-01 09:48:42.759665"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:48:42.786692"], ["updated_at", "2018-07-01 09:48:42.786692"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:48:42.801389"], ["updated_at", "2018-07-01 09:48:42.801389"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (9.0ms)
Completed 200 OK in 40ms (Views: 16.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (58.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 65ms (ActiveRecord: 58.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 04:48:42 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (5.0ms)
  Rendered carts/edit.html.erb within layouts/application (11.7ms)
Completed 200 OK in 46ms (Views: 18.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 04:48:43 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.8ms)
  Rendered carts/new.html.erb within layouts/application (4.8ms)
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:53:23.928321', '2018-07-01 09:53:23.928321', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 09:53:23.928321', '2018-07-01 09:53:23.928321', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 09:53:23.928321', '2018-07-01 09:53:23.928321', 207281424)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:53:23.934741', '2018-07-01 09:53:23.934741', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 09:53:23.934741', '2018-07-01 09:53:23.934741', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:53:23.939043', '2018-07-01 09:53:23.939043', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 09:53:23.939043', '2018-07-01 09:53:23.939043', 298486374, 298486374, 298486374)[0m
  [1m[35m (31.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:53:24.001911"], ["updated_at", "2018-07-01 09:53:24.001911"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:53:24.064549"], ["updated_at", "2018-07-01 09:53:24.064549"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 09:53:24.075364"], ["updated_at", "2018-07-01 09:53:24.075364"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:53:24.092328"], ["updated_at", "2018-07-01 09:53:24.092328"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:53:24.107954"], ["updated_at", "2018-07-01 09:53:24.107954"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 09:53:24.118284"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:53:24 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 27ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 04:53:24 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (10.6ms)
  Rendered carts/new.html.erb within layouts/application (14.1ms)
Completed 200 OK in 472ms (Views: 467.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 04:53:24 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (21.5ms)
Completed 200 OK in 36ms (Views: 30.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 04:53:24 -0500
Processing by CartsController#create as HTML
  [1m[35m (3.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:53:24.982203"], ["updated_at", "2018-07-01 09:53:24.982203"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 12ms (ActiveRecord: 5.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:53:25.044937"], ["updated_at", "2018-07-01 09:53:25.044937"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:53:25.060068"], ["updated_at", "2018-07-01 09:53:25.060068"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 25ms (ActiveRecord: 3.6ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (2.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.7ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 4.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.3ms)
  Rendered carts/edit.html.erb within layouts/application (4.7ms)
Completed 200 OK in 13ms (Views: 9.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 12ms (Views: 9.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (18.1ms)
  Rendered products/edit.html.erb within layouts/application (22.6ms)
Completed 200 OK in 34ms (Views: 29.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.7ms)
Completed 200 OK in 23ms (Views: 19.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 11ms (Views: 7.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (7.1ms)
  Rendered products/new.html.erb within layouts/application (9.1ms)
Completed 200 OK in 17ms (Views: 14.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 09:53:25.449741"], ["updated_at", "2018-07-01 09:53:25.449741"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 09:53:25.484624"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 17ms (ActiveRecord: 3.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (16.7ms)
Completed 200 OK in 26ms (Views: 23.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (1.2ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 10ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.1ms)
  Rendered line_items/edit.html.erb within layouts/application (10.5ms)
Completed 200 OK in 23ms (Views: 17.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 09:53:25.626196"], ["updated_at", "2018-07-01 09:53:25.626196"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 09:53:25.641904"], ["updated_at", "2018-07-01 09:53:25.641904"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 24ms (ActiveRecord: 4.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (9.6ms)
Completed 200 OK in 19ms (Views: 14.4ms | ActiveRecord: 1.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 48ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.2ms)
Completed 200 OK in 30ms (Views: 25.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.4ms)
Completed 200 OK in 19ms (Views: 13.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 04:53:25 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/new.html.erb within layouts/application (62.5ms)
Completed 200 OK in 71ms (Views: 68.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.9ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:00:36.180537', '2018-07-01 10:00:36.180537', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:00:36.180537', '2018-07-01 10:00:36.180537', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:00:36.180537', '2018-07-01 10:00:36.180537', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:00:36.187248', '2018-07-01 10:00:36.187248', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:00:36.187248', '2018-07-01 10:00:36.187248', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:00:36.192252', '2018-07-01 10:00:36.192252', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:00:36.192252', '2018-07-01 10:00:36.192252', 298486374, 298486374, 298486374)[0m
  [1m[35m (26.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:00:36.600441"], ["updated_at", "2018-07-01 10:00:36.600441"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 29ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 5ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 44ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:00:36.792374"], ["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:36.829622"], ["updated_at", "2018-07-01 10:00:36.829622"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by CartsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 5ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:00:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:36.949304"], ["updated_at", "2018-07-01 10:00:36.949304"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:36.991086"], ["updated_at", "2018-07-01 10:00:36.991086"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 52ms (ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by CartsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:37.078877"], ["updated_at", "2018-07-01 10:00:37.078877"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:37.092920"], ["updated_at", "2018-07-01 10:00:37.092920"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 36ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by LineItemsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by LineItemsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:37.334599"], ["updated_at", "2018-07-01 10:00:37.334599"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:37.351001"], ["updated_at", "2018-07-01 10:00:37.351001"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:00:37.360966"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:37.374235"], ["updated_at", "2018-07-01 10:00:37.374235"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:37.389663"], ["updated_at", "2018-07-01 10:00:37.389663"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:37.400034"], ["updated_at", "2018-07-01 10:00:37.400034"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:00:37 -0500
Processing by StoreController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:00:47.757036', '2018-07-01 10:00:47.757036', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:00:47.757036', '2018-07-01 10:00:47.757036', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:00:47.757036', '2018-07-01 10:00:47.757036', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:00:47.765331', '2018-07-01 10:00:47.765331', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:00:47.765331', '2018-07-01 10:00:47.765331', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:00:47.770809', '2018-07-01 10:00:47.770809', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:00:47.770809', '2018-07-01 10:00:47.770809', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:00:47 -0500
Processing by StoreController#index as HTML
Completed 406 Not Acceptable in 17ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 7ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#create as HTML
  [1m[35m (2.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:48.118626"], ["updated_at", "2018-07-01 10:00:48.118626"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 15ms (ActiveRecord: 4.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#new as HTML
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 15ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:48.310301"], ["updated_at", "2018-07-01 10:00:48.310301"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:48.381464"], ["updated_at", "2018-07-01 10:00:48.381464"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 81ms (ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (3.1ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 5.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:48.594421"], ["updated_at", "2018-07-01 10:00:48.594421"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (4.0ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:48.617166"], ["updated_at", "2018-07-01 10:00:48.617166"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 31ms (ActiveRecord: 8.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Completed 406 Not Acceptable in 5ms (ActiveRecord: 0.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (1.2ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 51ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:00:48.934937"], ["updated_at", "2018-07-01 10:00:48.934937"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:00:48 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (2.1ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:00:48.982938"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 20ms (ActiveRecord: 3.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:49.003797"], ["updated_at", "2018-07-01 10:00:49.003797"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:49.025399"], ["updated_at", "2018-07-01 10:00:49.025399"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:00:49.034694"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:00:49.045910"], ["updated_at", "2018-07-01 10:00:49.045910"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:49.063531"], ["updated_at", "2018-07-01 10:00:49.063531"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:00:49.074761"], ["updated_at", "2018-07-01 10:00:49.074761"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:01:13.253815', '2018-07-01 10:01:13.253815', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:01:13.253815', '2018-07-01 10:01:13.253815', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:01:13.253815', '2018-07-01 10:01:13.253815', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:01:13.262029', '2018-07-01 10:01:13.262029', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:01:13.262029', '2018-07-01 10:01:13.262029', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:01:13.265997', '2018-07-01 10:01:13.265997', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:01:13.265997', '2018-07-01 10:01:13.265997', 298486374, 298486374, 298486374)[0m
  [1m[35m (26.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by CartsController#index as HTML
Completed 406 Not Acceptable in 16ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by CartsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:01:13.614254"], ["updated_at", "2018-07-01 10:01:13.614254"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:01:13.679609"], ["updated_at", "2018-07-01 10:01:13.679609"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 74ms (ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:01:13.754671"], ["updated_at", "2018-07-01 10:01:13.754671"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 14ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by StoreController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:01:13.794747"], ["updated_at", "2018-07-01 10:01:13.794747"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:01:13.811036"], ["updated_at", "2018-07-01 10:01:13.811036"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:01:13.822417"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:01:13.838054"], ["updated_at", "2018-07-01 10:01:13.838054"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:01:13.855259"], ["updated_at", "2018-07-01 10:01:13.855259"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:01:13.869658"], ["updated_at", "2018-07-01 10:01:13.869658"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (2.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 7ms (ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:01:13 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 76ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.5ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by LineItemsController#index as HTML
Completed 406 Not Acceptable in 5ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by LineItemsController#new as HTML
Completed 406 Not Acceptable in 6ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:01:14.087724"], ["updated_at", "2018-07-01 10:01:14.087724"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:01:14.108026"], ["updated_at", "2018-07-01 10:01:14.108026"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 35ms (ActiveRecord: 5.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Completed 406 Not Acceptable in 8ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 11ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:01:14.386599"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 14ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:01:14.446006"], ["updated_at", "2018-07-01 10:01:14.446006"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:01:14 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:03:54.489086', '2018-07-01 10:03:54.489086', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:03:54.489086', '2018-07-01 10:03:54.489086', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:03:54.489086', '2018-07-01 10:03:54.489086', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:03:54.495700', '2018-07-01 10:03:54.495700', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:03:54.495700', '2018-07-01 10:03:54.495700', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:03:54.500691', '2018-07-01 10:03:54.500691', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:03:54.500691', '2018-07-01 10:03:54.500691', 298486374, 298486374, 298486374)[0m
  [1m[35m (7.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:03:54 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:03:55.022286"], ["updated_at", "2018-07-01 10:03:55.022286"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 30ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:03:55.061587"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 51ms (ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 19ms (ActiveRecord: 2.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by ProductsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 6ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by ProductsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by StoreController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:03:55.302281"], ["updated_at", "2018-07-01 10:03:55.302281"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:03:55.365958"], ["updated_at", "2018-07-01 10:03:55.365958"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:03:55.375664"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:03:55.387211"], ["updated_at", "2018-07-01 10:03:55.387211"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:03:55.402199"], ["updated_at", "2018-07-01 10:03:55.402199"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:03:55.414305"], ["updated_at", "2018-07-01 10:03:55.414305"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 11ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 5ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:03:55.679839"], ["updated_at", "2018-07-01 10:03:55.679839"]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:03:55.695493"], ["updated_at", "2018-07-01 10:03:55.695493"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 24ms (ActiveRecord: 4.1ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:03:55.740896"], ["updated_at", "2018-07-01 10:03:55.740896"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#index as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#new as HTML
Completed 406 Not Acceptable in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 12ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 51ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 2.5ms)
  [1m[35m (4.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:03:55.945385"], ["updated_at", "2018-07-01 10:03:55.945385"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:03:55.959424"], ["updated_at", "2018-07-01 10:03:55.959424"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Completed 406 Not Acceptable in 6ms (ActiveRecord: 0.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:03:55 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 406 Not Acceptable in 3ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:12:19.515903', '2018-07-01 10:12:19.515903', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:12:19.515903', '2018-07-01 10:12:19.515903', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:12:19.515903', '2018-07-01 10:12:19.515903', 207281424)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:12:19.522086', '2018-07-01 10:12:19.522086', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:12:19.522086', '2018-07-01 10:12:19.522086', 298486374)[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:12:19.526537', '2018-07-01 10:12:19.526537', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:12:19.526537', '2018-07-01 10:12:19.526537', 298486374, 298486374, 298486374)[0m
  [1m[35m (5.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:12:19 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (27.9ms)
  Rendered line_items/new.html.erb within layouts/application (33.3ms)
Completed 500 Internal Server Error in 640ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:12:20 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (51.6ms)
Completed 500 Internal Server Error in 74ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:12:20 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 61ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:12:20 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (21.2ms)
Completed 500 Internal Server Error in 43ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:12:20 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:12:20.770436"], ["updated_at", "2018-07-01 10:12:20.770436"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (3.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:12:20.825518"], ["updated_at", "2018-07-01 10:12:20.825518"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 67ms (ActiveRecord: 5.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:12:20 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (16.0ms)
  Rendered carts/_cart.html.erb (105.1ms)
  Rendered carts/show.html.erb within layouts/application (108.4ms)
Completed 500 Internal Server Error in 117ms (ActiveRecord: 1.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:12:20 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (2.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (1.3ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 18ms (ActiveRecord: 4.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.2ms)
  Rendered line_items/edit.html.erb within layouts/application (7.9ms)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:12:21.201467"], ["updated_at", "2018-07-01 10:12:21.201467"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:12:21.216665"], ["updated_at", "2018-07-01 10:12:21.216665"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 4.9ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.4ms)
  Rendered carts/edit.html.erb within layouts/application (8.0ms)
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (79.9ms)
  Rendered carts/show.html.erb within layouts/application (81.1ms)
Completed 500 Internal Server Error in 86ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:12:21.433355"], ["updated_at", "2018-07-01 10:12:21.433355"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.8ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.4ms)
  Rendered carts/new.html.erb within layouts/application (4.9ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:12:21.528385"], ["updated_at", "2018-07-01 10:12:21.528385"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:12:21.544796"], ["updated_at", "2018-07-01 10:12:21.544796"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:12:21.557153"], ["updated_at", "2018-07-01 10:12:21.557153"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:12:21.573061"], ["updated_at", "2018-07-01 10:12:21.573061"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:12:21.593266"], ["updated_at", "2018-07-01 10:12:21.593266"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (1.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:12:21.604257"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (22.5ms)
  Rendered products/edit.html.erb within layouts/application (26.4ms)
Completed 500 Internal Server Error in 108ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (44.0ms)
Completed 500 Internal Server Error in 65ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:12:21.860117"], ["updated_at", "2018-07-01 10:12:21.860117"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 18ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.9ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 16ms (ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:12:21.970315"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 17ms (ActiveRecord: 3.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:12:21 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (8.0ms)
  Rendered products/new.html.erb within layouts/application (10.0ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:12:22 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (3.6ms)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:12:22 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.2ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:12:59.206874', '2018-07-01 10:12:59.206874', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:12:59.206874', '2018-07-01 10:12:59.206874', 298486374)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:12:59.206874', '2018-07-01 10:12:59.206874', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:12:59.213935', '2018-07-01 10:12:59.213935', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:12:59.213935', '2018-07-01 10:12:59.213935', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:12:59.218623', '2018-07-01 10:12:59.218623', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:12:59.218623', '2018-07-01 10:12:59.218623', 298486374, 298486374, 298486374)[0m
  [1m[35m (27.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:12:59 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (382.2ms)
Completed 500 Internal Server Error in 421ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (23.4ms)
Completed 500 Internal Server Error in 47ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:13:00.166108"], ["updated_at", "2018-07-01 10:13:00.166108"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:13:00.189843"], ["updated_at", "2018-07-01 10:13:00.189843"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 33ms (ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.6ms)
  Rendered carts/_cart.html.erb (79.9ms)
  Rendered carts/show.html.erb within layouts/application (82.9ms)
Completed 500 Internal Server Error in 91ms (ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (14.6ms)
  Rendered line_items/new.html.erb within layouts/application (17.4ms)
Completed 500 Internal Server Error in 35ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.9ms)
Completed 500 Internal Server Error in 36ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 49ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.5ms)
  Rendered line_items/edit.html.erb within layouts/application (7.0ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:13:00.602817"], ["updated_at", "2018-07-01 10:13:00.602817"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:13:00.620313"], ["updated_at", "2018-07-01 10:13:00.620313"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:13:00.631730"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:13:00.643036"], ["updated_at", "2018-07-01 10:13:00.643036"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:13:00.660078"], ["updated_at", "2018-07-01 10:13:00.660078"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:13:00.670681"], ["updated_at", "2018-07-01 10:13:00.670681"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/new.html.erb within layouts/application (6.2ms)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:13:00.755936"], ["updated_at", "2018-07-01 10:13:00.755936"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:13:00.791424"], ["updated_at", "2018-07-01 10:13:00.791424"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:13:00.808132"], ["updated_at", "2018-07-01 10:13:00.808132"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 26ms (ActiveRecord: 6.2ms)
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 17ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/edit.html.erb within layouts/application (7.6ms)
Completed 500 Internal Server Error in 45ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (8.2ms)
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:13:00 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.5ms)
  Rendered carts/_cart.html.erb (91.6ms)
  Rendered carts/show.html.erb within layouts/application (92.7ms)
Completed 500 Internal Server Error in 97ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (5.0ms)
Completed 500 Internal Server Error in 43ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (18.2ms)
  Rendered products/edit.html.erb within layouts/application (23.4ms)
Completed 500 Internal Server Error in 55ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 14ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:13:01.312383"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.7ms)
  Rendered products/new.html.erb within layouts/application (7.6ms)
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.0ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:13:01 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:13:01.453927"], ["updated_at", "2018-07-01 10:13:01.453927"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:19:12.529924', '2018-07-01 10:19:12.529924', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:19:12.529924', '2018-07-01 10:19:12.529924', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:19:12.529924', '2018-07-01 10:19:12.529924', 207281424)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:19:12.536761', '2018-07-01 10:19:12.536761', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:19:12.536761', '2018-07-01 10:19:12.536761', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:19:12.540842', '2018-07-01 10:19:12.540842', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:19:12.540842', '2018-07-01 10:19:12.540842', 298486374, 298486374, 298486374)[0m
  [1m[35m (33.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:19:12 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:19:12.827394"], ["updated_at", "2018-07-01 10:19:12.827394"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:19:12.858866"], ["updated_at", "2018-07-01 10:19:12.858866"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 64ms (ActiveRecord: 4.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:19:12 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (13.5ms)
  Rendered carts/_cart.html.erb (107.9ms)
  Rendered carts/show.html.erb within layouts/application (113.3ms)
Completed 500 Internal Server Error in 127ms (ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (2.1ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (31.1ms)
  Rendered line_items/new.html.erb within layouts/application (36.4ms)
Completed 200 OK in 574ms (Views: 546.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.5ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.0ms)
Completed 200 OK in 21ms (Views: 12.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/edit.html.erb within layouts/application (5.9ms)
Completed 200 OK in 13ms (Views: 9.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.9ms)
Completed 200 OK in 21ms (Views: 18.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:19:13.798353"], ["updated_at", "2018-07-01 10:19:13.798353"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:19:13.811926"], ["updated_at", "2018-07-01 10:19:13.811926"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 21ms (ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (73.8ms)
  Rendered carts/show.html.erb within layouts/application (74.9ms)
Completed 500 Internal Server Error in 79ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.3ms)
  Rendered carts/new.html.erb within layouts/application (5.9ms)
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.4ms)
  Rendered carts/edit.html.erb within layouts/application (5.2ms)
Completed 200 OK in 14ms (Views: 9.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:19:13 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:19:13.994875"], ["updated_at", "2018-07-01 10:19:13.994875"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.4ms)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 6ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:19:14.120605"], ["updated_at", "2018-07-01 10:19:14.120605"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:19:14.135949"], ["updated_at", "2018-07-01 10:19:14.135949"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:19:14.146273"], ["updated_at", "2018-07-01 10:19:14.146273"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:19:14.159275"], ["updated_at", "2018-07-01 10:19:14.159275"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:19:14.174490"], ["updated_at", "2018-07-01 10:19:14.174490"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:19:14.184323"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.3ms)
Completed 200 OK in 23ms (Views: 19.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (8.6ms)
  Rendered products/new.html.erb within layouts/application (11.4ms)
Completed 200 OK in 18ms (Views: 15.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:19:14.304112"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 14ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 10ms (Views: 6.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (5.8ms)
  Rendered products/edit.html.erb within layouts/application (7.9ms)
Completed 200 OK in 15ms (Views: 12.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:19:14.375910"], ["updated_at", "2018-07-01 10:19:14.375910"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 11ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:19:14 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (10.9ms)
Completed 200 OK in 20ms (Views: 16.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:24:07.246780', '2018-07-01 10:24:07.246780', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:24:07.246780', '2018-07-01 10:24:07.246780', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:24:07.246780', '2018-07-01 10:24:07.246780', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:24:07.254823', '2018-07-01 10:24:07.254823', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:24:07.254823', '2018-07-01 10:24:07.254823', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:24:07.259681', '2018-07-01 10:24:07.259681', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:24:07.259681', '2018-07-01 10:24:07.259681', 298486374, 298486374, 298486374)[0m
  [1m[35m (29.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:24:07.318379"], ["updated_at", "2018-07-01 10:24:07.318379"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (26.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:24:07.380039"], ["updated_at", "2018-07-01 10:24:07.380039"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:24:07.422047"], ["updated_at", "2018-07-01 10:24:07.422047"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:24:07.437578"], ["updated_at", "2018-07-01 10:24:07.437578"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:24:07.452746"], ["updated_at", "2018-07-01 10:24:07.452746"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:24:07.463116"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:24:07 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 27ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:24:07 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:24:07.671444"], ["updated_at", "2018-07-01 10:24:07.671444"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:24:07 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (19.6ms)
  Rendered products/new.html.erb within layouts/application (23.3ms)
Completed 200 OK in 410ms (Views: 407.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:24:08.124163"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 14ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.1ms)
Completed 200 OK in 22ms (Views: 18.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 11ms (Views: 7.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (6.2ms)
  Rendered products/edit.html.erb within layouts/application (8.4ms)
Completed 200 OK in 17ms (Views: 13.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (18.3ms)
Completed 200 OK in 28ms (Views: 24.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.8ms)
  Rendered line_items/new.html.erb within layouts/application (9.7ms)
Completed 200 OK in 19ms (Views: 16.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 47ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (8.0ms)
  Rendered line_items/edit.html.erb within layouts/application (11.0ms)
Completed 200 OK in 22ms (Views: 16.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.5ms)
Completed 200 OK in 24ms (Views: 20.0ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:24:08.496093"], ["updated_at", "2018-07-01 10:24:08.496093"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:24:08.569948"], ["updated_at", "2018-07-01 10:24:08.569948"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 84ms (ActiveRecord: 4.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (6.9ms)
Completed 200 OK in 20ms (Views: 13.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.1ms)
Completed 200 OK in 17ms (Views: 12.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.8ms)
  Rendered carts/new.html.erb within layouts/application (6.8ms)
Completed 200 OK in 16ms (Views: 12.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (6.0ms)
Completed 200 OK in 15ms (Views: 10.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 13ms (Views: 9.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:24:08.755749"], ["updated_at", "2018-07-01 10:24:08.755749"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:24:08.770248"], ["updated_at", "2018-07-01 10:24:08.770248"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:24:08.819402"], ["updated_at", "2018-07-01 10:24:08.819402"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:24:08 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.0ms)
  Rendered carts/edit.html.erb within layouts/application (4.2ms)
Completed 200 OK in 13ms (Views: 9.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:28:07.948489', '2018-07-01 10:28:07.948489', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:28:07.948489', '2018-07-01 10:28:07.948489', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:28:07.948489', '2018-07-01 10:28:07.948489', 207281424)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:28:07.956816', '2018-07-01 10:28:07.956816', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:28:07.956816', '2018-07-01 10:28:07.956816', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:28:07.961443', '2018-07-01 10:28:07.961443', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:28:07.961443', '2018-07-01 10:28:07.961443', 298486374, 298486374, 298486374)[0m
  [1m[35m (33.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:28:08 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (22.6ms)
  Rendered line_items/new.html.erb within layouts/application (26.5ms)
Completed 200 OK in 517ms (Views: 499.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:28:08 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:28:08 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (48.7ms)
Completed 200 OK in 57ms (Views: 52.5ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:28:08 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:08.838993"], ["updated_at", "2018-07-01 10:28:08.838993"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:08.859048"], ["updated_at", "2018-07-01 10:28:08.859048"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 30ms (ActiveRecord: 3.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:28:08 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (77.1ms)
Completed 500 Internal Server Error in 86ms (ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:28:08 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.6ms)
  Rendered line_items/edit.html.erb within layouts/application (6.9ms)
Completed 200 OK in 16ms (Views: 12.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (10.8ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 13ms (Views: 9.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:28:09.234216"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 14ms (ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.5ms)
  Rendered products/edit.html.erb within layouts/application (12.3ms)
Completed 200 OK in 21ms (Views: 17.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.1ms)
Completed 200 OK in 21ms (Views: 18.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:28:09.348821"], ["updated_at", "2018-07-01 10:28:09.348821"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 11ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.4ms)
  Rendered products/new.html.erb within layouts/application (7.5ms)
Completed 200 OK in 15ms (Views: 12.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:09.390495"], ["updated_at", "2018-07-01 10:28:09.390495"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:09.408076"], ["updated_at", "2018-07-01 10:28:09.408076"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:28:09.418346"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:09.429265"], ["updated_at", "2018-07-01 10:28:09.429265"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:09.444182"], ["updated_at", "2018-07-01 10:28:09.444182"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:09.454705"], ["updated_at", "2018-07-01 10:28:09.454705"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.8ms)
Completed 200 OK in 30ms (Views: 27.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 13ms (Views: 10.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.5ms)
  Rendered carts/new.html.erb within layouts/application (6.2ms)
Completed 200 OK in 14ms (Views: 11.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (76.1ms)
Completed 500 Internal Server Error in 80ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:09.750375"], ["updated_at", "2018-07-01 10:28:09.750375"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/edit.html.erb within layouts/application (4.4ms)
Completed 200 OK in 13ms (Views: 9.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:09.806289"], ["updated_at", "2018-07-01 10:28:09.806289"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:09.821777"], ["updated_at", "2018-07-01 10:28:09.821777"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 25ms (ActiveRecord: 4.3ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:28:09 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (1.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 3.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:28:41.911635', '2018-07-01 10:28:41.911635', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:28:41.911635', '2018-07-01 10:28:41.911635', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:28:41.911635', '2018-07-01 10:28:41.911635', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:28:41.919684', '2018-07-01 10:28:41.919684', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:28:41.919684', '2018-07-01 10:28:41.919684', 298486374)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:28:41.923705', '2018-07-01 10:28:41.923705', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:28:41.923705', '2018-07-01 10:28:41.923705', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (61.9ms)
Completed 200 OK in 483ms (Views: 463.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (6.9ms)
Completed 200 OK in 17ms (Views: 11.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (16.2ms)
  Rendered line_items/new.html.erb within layouts/application (19.0ms)
Completed 200 OK in 26ms (Views: 23.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 10ms (ActiveRecord: 2.1ms)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:42.734844"], ["updated_at", "2018-07-01 10:28:42.734844"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:42.757188"], ["updated_at", "2018-07-01 10:28:42.757188"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 32ms (ActiveRecord: 4.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (94.7ms)
Completed 500 Internal Server Error in 104ms (ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.7ms)
  Rendered line_items/edit.html.erb within layouts/application (8.8ms)
Completed 200 OK in 19ms (Views: 15.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:28:42 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.1ms)
  Rendered carts/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (81.9ms)
Completed 500 Internal Server Error in 86ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:43.195230"], ["updated_at", "2018-07-01 10:28:43.195230"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:43.272136"], ["updated_at", "2018-07-01 10:28:43.272136"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 85ms (ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 13ms (Views: 10.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:43.341098"], ["updated_at", "2018-07-01 10:28:43.341098"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.1ms)
  Rendered carts/edit.html.erb within layouts/application (4.2ms)
Completed 200 OK in 13ms (Views: 9.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:43.400456"], ["updated_at", "2018-07-01 10:28:43.400456"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:43.418617"], ["updated_at", "2018-07-01 10:28:43.418617"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:28:43.429118"], ["id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:28:43.440354"], ["updated_at", "2018-07-01 10:28:43.440354"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:43.456202"], ["updated_at", "2018-07-01 10:28:43.456202"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:28:43.467250"], ["updated_at", "2018-07-01 10:28:43.467250"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:28:43.531891"], ["updated_at", "2018-07-01 10:28:43.531891"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.6ms)
Completed 200 OK in 14ms (Views: 10.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (2.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (11.0ms)
  Rendered products/edit.html.erb within layouts/application (16.5ms)
Completed 200 OK in 31ms (Views: 23.0ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.9ms)
  Rendered products/new.html.erb within layouts/application (8.1ms)
Completed 200 OK in 17ms (Views: 14.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.2ms)
Completed 200 OK in 23ms (Views: 20.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:28:43.723438"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 2.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:28:43 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (16.0ms)
Completed 200 OK in 27ms (Views: 23.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:29:04.453230', '2018-07-01 10:29:04.453230', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:29:04.453230', '2018-07-01 10:29:04.453230', 298486374)[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:29:04.453230', '2018-07-01 10:29:04.453230', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:29:04.460801', '2018-07-01 10:29:04.460801', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:29:04.460801', '2018-07-01 10:29:04.460801', 298486374)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:29:04.465120', '2018-07-01 10:29:04.465120', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:29:04.465120', '2018-07-01 10:29:04.465120', 298486374, 298486374, 298486374)[0m
  [1m[35m (32.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:29:04.660127"], ["updated_at", "2018-07-01 10:29:04.660127"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:29:04.742681"], ["updated_at", "2018-07-01 10:29:04.742681"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:29:04.761469"], ["updated_at", "2018-07-01 10:29:04.761469"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:29:04.783846"], ["updated_at", "2018-07-01 10:29:04.783846"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:29:04.805722"], ["updated_at", "2018-07-01 10:29:04.805722"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:29:04.820709"], ["id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (409.3ms)
Completed 200 OK in 438ms (Views: 419.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 14ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (17.5ms)
  Rendered products/edit.html.erb within layouts/application (20.9ms)
Completed 200 OK in 32ms (Views: 28.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.4ms)
  Rendered products/new.html.erb within layouts/application (7.6ms)
Completed 200 OK in 16ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.1ms)
Completed 200 OK in 23ms (Views: 19.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (1.6ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:29:05.667666"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:29:05.696161"], ["updated_at", "2018-07-01 10:29:05.696161"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:29:05.756199"], ["updated_at", "2018-07-01 10:29:05.756199"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:29:05.791998"], ["updated_at", "2018-07-01 10:29:05.791998"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:29:05.807467"], ["updated_at", "2018-07-01 10:29:05.807467"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 24ms (ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/edit.html.erb within layouts/application (6.6ms)
Completed 200 OK in 17ms (Views: 13.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (76.6ms)
Completed 500 Internal Server Error in 82ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:29:05 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 14ms (Views: 11.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/new.html.erb within layouts/application (4.0ms)
Completed 200 OK in 11ms (Views: 8.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.0ms)
  Rendered line_items/new.html.erb within layouts/application (8.5ms)
Completed 200 OK in 17ms (Views: 14.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.8ms)
Completed 200 OK in 17ms (Views: 12.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.3ms)
  Rendered line_items/edit.html.erb within layouts/application (6.5ms)
Completed 200 OK in 15ms (Views: 11.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:29:06.151078"], ["updated_at", "2018-07-01 10:29:06.151078"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:29:06.164395"], ["updated_at", "2018-07-01 10:29:06.164395"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 21ms (ActiveRecord: 3.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (73.0ms)
Completed 500 Internal Server Error in 78ms (ActiveRecord: 1.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.6ms)
Completed 200 OK in 22ms (Views: 18.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:29:06 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 47ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:30:39.935519', '2018-07-01 10:30:39.935519', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:30:39.935519', '2018-07-01 10:30:39.935519', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:30:39.935519', '2018-07-01 10:30:39.935519', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:30:39.943175', '2018-07-01 10:30:39.943175', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:30:39.943175', '2018-07-01 10:30:39.943175', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:30:39.948151', '2018-07-01 10:30:39.948151', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:30:39.948151', '2018-07-01 10:30:39.948151', 298486374, 298486374, 298486374)[0m
  [1m[35m (34.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (2.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 35ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (18.8ms)
  Rendered products/edit.html.erb within layouts/application (22.6ms)
Completed 200 OK in 433ms (Views: 429.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.1ms)
Completed 200 OK in 22ms (Views: 18.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:30:40.869779"], ["updated_at", "2018-07-01 10:30:40.869779"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/new.html.erb within layouts/application (7.2ms)
Completed 200 OK in 15ms (Views: 12.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 11ms (Views: 7.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:30:40.946114"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 14ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:30:40 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (18.5ms)
Completed 200 OK in 28ms (Views: 24.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 15ms (Views: 12.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.3ms)
  Rendered carts/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 13ms (Views: 10.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:30:41.097572"], ["updated_at", "2018-07-01 10:30:41.097572"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.1ms)
  Rendered carts/edit.html.erb within layouts/application (4.4ms)
Completed 200 OK in 13ms (Views: 9.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (95.9ms)
Completed 500 Internal Server Error in 101ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:30:41.266190"], ["updated_at", "2018-07-01 10:30:41.266190"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:30:41.284517"], ["updated_at", "2018-07-01 10:30:41.284517"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 26ms (ActiveRecord: 5.3ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (15.5ms)
Completed 200 OK in 24ms (Views: 21.0ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 49ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:30:41.433889"], ["updated_at", "2018-07-01 10:30:41.433889"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:30:41.448453"], ["updated_at", "2018-07-01 10:30:41.448453"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 22ms (ActiveRecord: 3.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (68.7ms)
Completed 500 Internal Server Error in 73ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.7ms)
  Rendered line_items/new.html.erb within layouts/application (8.6ms)
Completed 200 OK in 16ms (Views: 13.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (6.0ms)
Completed 200 OK in 14ms (Views: 10.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:30:41 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.9ms)
  Rendered line_items/edit.html.erb within layouts/application (6.2ms)
Completed 200 OK in 14ms (Views: 10.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:30:41.647905"], ["updated_at", "2018-07-01 10:30:41.647905"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:30:41.666142"], ["updated_at", "2018-07-01 10:30:41.666142"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:30:41.676853"], ["updated_at", "2018-07-01 10:30:41.676853"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:30:41.690066"], ["updated_at", "2018-07-01 10:30:41.690066"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:30:41.705070"], ["updated_at", "2018-07-01 10:30:41.705070"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:30:41.715145"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:31:32.143414', '2018-07-01 10:31:32.143414', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 10:31:32.143414', '2018-07-01 10:31:32.143414', 298486374)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 10:31:32.143414', '2018-07-01 10:31:32.143414', 207281424)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:31:32.150062', '2018-07-01 10:31:32.150062', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 10:31:32.150062', '2018-07-01 10:31:32.150062', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:31:32.155566', '2018-07-01 10:31:32.155566', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 10:31:32.155566', '2018-07-01 10:31:32.155566', 298486374, 298486374, 298486374)[0m
  [1m[35m (33.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 05:31:32 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (384.3ms)
Completed 200 OK in 414ms (Views: 395.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:31:32 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 52ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (28.6ms)
Completed 200 OK in 40ms (Views: 33.6ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (13.4ms)
  Rendered line_items/new.html.erb within layouts/application (16.3ms)
Completed 200 OK in 24ms (Views: 21.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/edit.html.erb within layouts/application (6.2ms)
Completed 200 OK in 15ms (Views: 11.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:31:33.149886"], ["updated_at", "2018-07-01 10:31:33.149886"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:31:33.173434"], ["updated_at", "2018-07-01 10:31:33.173434"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 34ms (ActiveRecord: 4.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (11.2ms)
Completed 200 OK in 24ms (Views: 17.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (17.0ms)
Completed 200 OK in 27ms (Views: 22.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (16.0ms)
Completed 200 OK in 25ms (Views: 22.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 10:31:33.406511"], ["updated_at", "2018-07-01 10:31:33.406511"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (11.0ms)
  Rendered products/edit.html.erb within layouts/application (14.3ms)
Completed 200 OK in 24ms (Views: 20.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 15ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (7.7ms)
  Rendered products/new.html.erb within layouts/application (9.7ms)
Completed 200 OK in 18ms (Views: 15.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (3.5ms)
Completed 200 OK in 15ms (Views: 11.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 10:31:33.567684"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:31:33.614134"], ["updated_at", "2018-07-01 10:31:33.614134"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:31:33.631823"], ["updated_at", "2018-07-01 10:31:33.631823"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 10:31:33.644537"], ["updated_at", "2018-07-01 10:31:33.644537"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:31:33.659453"], ["updated_at", "2018-07-01 10:31:33.659453"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:31:33.677132"], ["updated_at", "2018-07-01 10:31:33.677132"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 10:31:33.689829"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
  [1m[35m (1.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:31:33.837672"], ["updated_at", "2018-07-01 10:31:33.837672"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 10:31:33.851878"], ["updated_at", "2018-07-01 10:31:33.851878"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.6ms)
Completed 200 OK in 22ms (Views: 18.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 10:31:33.939369"], ["updated_at", "2018-07-01 10:31:33.939369"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 05:31:33 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (5.0ms)
  Rendered carts/edit.html.erb within layouts/application (9.5ms)
Completed 200 OK in 26ms (Views: 17.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 05:31:34 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (6.5ms)
Completed 200 OK in 21ms (Views: 18.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 05:31:34 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.8ms)
  Rendered carts/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 20ms (Views: 15.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:37:14.402583', '2018-07-01 18:37:14.402583', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:37:14.402583', '2018-07-01 18:37:14.402583', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:37:14.402583', '2018-07-01 18:37:14.402583', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:37:14.409384', '2018-07-01 18:37:14.409384', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:37:14.409384', '2018-07-01 18:37:14.409384', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:37:14.413666', '2018-07-01 18:37:14.413666', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:37:14.413666', '2018-07-01 18:37:14.413666', 298486374, 298486374, 298486374)[0m
  [1m[35m (6.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:37:14.556244"], ["updated_at", "2018-07-01 18:37:14.556244"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:37:14.651388"], ["updated_at", "2018-07-01 18:37:14.651388"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:37:14.663892"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:37:14.678286"], ["updated_at", "2018-07-01 18:37:14.678286"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:37:14.698246"], ["updated_at", "2018-07-01 18:37:14.698246"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:37:14.710957"], ["updated_at", "2018-07-01 18:37:14.710957"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:37:14 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:37:15.110306"], ["updated_at", "2018-07-01 18:37:15.110306"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:37:15.138263"], ["updated_at", "2018-07-01 18:37:15.138263"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 63ms (ActiveRecord: 5.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (34.5ms)
Completed 200 OK in 508ms (Views: 498.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 52ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (2.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (17.8ms)
Completed 200 OK in 29ms (Views: 22.9ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (17.2ms)
  Rendered line_items/new.html.erb within layouts/application (20.7ms)
Completed 200 OK in 30ms (Views: 25.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.0ms)
Completed 200 OK in 17ms (Views: 11.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.1ms)
  Rendered line_items/edit.html.erb within layouts/application (6.3ms)
Completed 200 OK in 16ms (Views: 11.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.6ms)
Completed 200 OK in 26ms (Views: 22.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:37:15 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 14ms (Views: 9.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/edit.html.erb within layouts/application (7.2ms)
Completed 200 OK in 16ms (Views: 12.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.7ms)
Completed 200 OK in 17ms (Views: 13.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:37:16.091040"], ["updated_at", "2018-07-01 18:37:16.091040"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:37:16.117684"], ["updated_at", "2018-07-01 18:37:16.117684"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:37:16.132662"], ["updated_at", "2018-07-01 18:37:16.132662"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.6ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.6ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/new.html.erb within layouts/application (6.4ms)
Completed 200 OK in 42ms (Views: 17.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (10.6ms)
  Rendered products/new.html.erb within layouts/application (14.3ms)
Completed 200 OK in 29ms (Views: 24.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:37:16.290429"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:37:16.319437"], ["updated_at", "2018-07-01 18:37:16.319437"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (6.1ms)
  Rendered products/edit.html.erb within layouts/application (8.5ms)
Completed 200 OK in 18ms (Views: 14.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:37:16 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (16.9ms)
Completed 200 OK in 54ms (Views: 26.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (3.0ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (1.1ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:38:32.091702', '2018-07-01 18:38:32.091702', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:38:32.091702', '2018-07-01 18:38:32.091702', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:38:32.091702', '2018-07-01 18:38:32.091702', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:38:32.098173', '2018-07-01 18:38:32.098173', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:38:32.098173', '2018-07-01 18:38:32.098173', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:38:32.102798', '2018-07-01 18:38:32.102798', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:38:32.102798', '2018-07-01 18:38:32.102798', 298486374, 298486374, 298486374)[0m
  [1m[35m (6.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:38:32 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (20.1ms)
  Rendered products/edit.html.erb within layouts/application (25.0ms)
Completed 200 OK in 510ms (Views: 490.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:38:32 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 12ms (Views: 7.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:38:33.031051"], ["updated_at", "2018-07-01 18:38:33.031051"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (27.5ms)
Completed 200 OK in 37ms (Views: 32.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:38:33.114170"], ["id", 980190962]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 19ms (ActiveRecord: 2.0ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 56ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/new.html.erb within layouts/application (7.6ms)
Completed 200 OK in 19ms (Views: 16.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:33.326470"], ["updated_at", "2018-07-01 18:38:33.326470"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.4ms)
  Rendered carts/edit.html.erb within layouts/application (8.7ms)
Completed 200 OK in 131ms (Views: 21.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/new.html.erb within layouts/application (3.9ms)
Completed 200 OK in 13ms (Views: 9.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 15ms (Views: 11.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (47.2ms)
Completed 200 OK in 58ms (Views: 52.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:33.653300"], ["updated_at", "2018-07-01 18:38:33.653300"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (4.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:33.671291"], ["updated_at", "2018-07-01 18:38:33.671291"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 30ms (ActiveRecord: 7.1ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:33.714971"], ["updated_at", "2018-07-01 18:38:33.714971"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:33.732395"], ["updated_at", "2018-07-01 18:38:33.732395"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:38:33.744541"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:33.756423"], ["updated_at", "2018-07-01 18:38:33.756423"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:33.774977"], ["updated_at", "2018-07-01 18:38:33.774977"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:33.792518"], ["updated_at", "2018-07-01 18:38:33.792518"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (8.1ms)
  Rendered line_items/edit.html.erb within layouts/application (12.1ms)
Completed 200 OK in 52ms (Views: 20.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (17.5ms)
Completed 200 OK in 27ms (Views: 22.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.9ms)
Completed 200 OK in 27ms (Views: 19.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:38:33 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 64ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:38:34 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:34.092633"], ["updated_at", "2018-07-01 18:38:34.092633"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:34.112226"], ["updated_at", "2018-07-01 18:38:34.112226"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 29ms (ActiveRecord: 4.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:38:34 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (11.1ms)
Completed 200 OK in 26ms (Views: 21.6ms | ActiveRecord: 1.4ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:38:34 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.8ms)
  Rendered line_items/new.html.erb within layouts/application (10.0ms)
Completed 200 OK in 50ms (Views: 20.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:38:34 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (23.1ms)
Completed 200 OK in 41ms (Views: 35.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:38:50.388743', '2018-07-01 18:38:50.388743', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:38:50.388743', '2018-07-01 18:38:50.388743', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:38:50.388743', '2018-07-01 18:38:50.388743', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:38:50.395452', '2018-07-01 18:38:50.395452', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:38:50.395452', '2018-07-01 18:38:50.395452', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:38:50.399627', '2018-07-01 18:38:50.399627', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:38:50.399627', '2018-07-01 18:38:50.399627', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:50.465098"], ["updated_at", "2018-07-01 18:38:50.465098"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:50.537185"], ["updated_at", "2018-07-01 18:38:50.537185"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.7ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:38:50.548556"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:50.566627"], ["updated_at", "2018-07-01 18:38:50.566627"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:50.609503"], ["updated_at", "2018-07-01 18:38:50.609503"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:50.620169"], ["updated_at", "2018-07-01 18:38:50.620169"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:38:50 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (511.8ms)
Completed 200 OK in 544ms (Views: 525.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (17.1ms)
  Rendered products/edit.html.erb within layouts/application (20.3ms)
Completed 200 OK in 32ms (Views: 27.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (13.7ms)
Completed 200 OK in 21ms (Views: 18.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:38:51.492338"], ["updated_at", "2018-07-01 18:38:51.492338"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:38:51.550611"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 14ms (ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/new.html.erb within layouts/application (7.5ms)
Completed 200 OK in 16ms (Views: 12.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 11ms (Views: 7.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.4ms)
  Rendered carts/new.html.erb within layouts/application (7.1ms)
Completed 200 OK in 16ms (Views: 13.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/edit.html.erb within layouts/application (4.4ms)
Completed 200 OK in 14ms (Views: 9.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (18.1ms)
Completed 200 OK in 28ms (Views: 23.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:51.829400"], ["updated_at", "2018-07-01 18:38:51.829400"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:51.896765"], ["updated_at", "2018-07-01 18:38:51.896765"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:51.910456"], ["updated_at", "2018-07-01 18:38:51.910456"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.3ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 13ms (Views: 9.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:38:51 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.9ms)
  Rendered line_items/edit.html.erb within layouts/application (10.9ms)
Completed 200 OK in 22ms (Views: 17.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:38:52 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.5ms)
  Rendered line_items/new.html.erb within layouts/application (5.4ms)
Completed 200 OK in 13ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:38:52 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.0ms)
Completed 200 OK in 17ms (Views: 12.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:38:52 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:38:52.070107"], ["updated_at", "2018-07-01 18:38:52.070107"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:38:52.083595"], ["updated_at", "2018-07-01 18:38:52.083595"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 22ms (ActiveRecord: 3.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:38:52 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.5ms)
Completed 200 OK in 18ms (Views: 13.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:38:52 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:38:52 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (15.3ms)
Completed 200 OK in 24ms (Views: 20.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:38:52 -0500
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:39:45.248272', '2018-07-01 18:39:45.248272', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:39:45.248272', '2018-07-01 18:39:45.248272', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:39:45.248272', '2018-07-01 18:39:45.248272', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:39:45.255081', '2018-07-01 18:39:45.255081', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:39:45.255081', '2018-07-01 18:39:45.255081', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:39:45.260185', '2018-07-01 18:39:45.260185', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:39:45.260185', '2018-07-01 18:39:45.260185', 298486374, 298486374, 298486374)[0m
  [1m[35m (26.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:39:45 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (6.9ms)
  Rendered carts/edit.html.erb within layouts/application (11.2ms)
Completed 200 OK in 525ms (Views: 505.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:39:46.088883"], ["updated_at", "2018-07-01 18:39:46.088883"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:39:46.132357"], ["updated_at", "2018-07-01 18:39:46.132357"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 54ms (ActiveRecord: 4.7ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (3.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 4.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.1ms)
  Rendered carts/new.html.erb within layouts/application (7.8ms)
Completed 200 OK in 21ms (Views: 18.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:39:46.235596"], ["updated_at", "2018-07-01 18:39:46.235596"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.7ms)
Completed 200 OK in 12ms (Views: 9.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (13.0ms)
Completed 200 OK in 22ms (Views: 17.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (13.9ms)
  Rendered line_items/edit.html.erb within layouts/application (17.1ms)
Completed 200 OK in 30ms (Views: 23.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 47ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (9.6ms)
Completed 200 OK in 18ms (Views: 14.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.4ms)
  Rendered line_items/new.html.erb within layouts/application (5.2ms)
Completed 200 OK in 12ms (Views: 9.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:39:46.499896"], ["updated_at", "2018-07-01 18:39:46.499896"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:39:46.514971"], ["updated_at", "2018-07-01 18:39:46.514971"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.2ms)
Completed 200 OK in 17ms (Views: 12.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.4ms)
Completed 200 OK in 22ms (Views: 18.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.1ms)
Completed 200 OK in 24ms (Views: 21.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 28ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (25.7ms)
Completed 200 OK in 35ms (Views: 32.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (8.8ms)
  Rendered products/new.html.erb within layouts/application (11.6ms)
Completed 200 OK in 22ms (Views: 16.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (7.6ms)
  Rendered products/edit.html.erb within layouts/application (11.3ms)
Completed 200 OK in 24ms (Views: 17.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:39:46.922818"], ["updated_at", "2018-07-01 18:39:46.922818"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 17ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.8ms)
Completed 200 OK in 12ms (Views: 8.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:39:46 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:39:46.983331"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:39:46.997463"], ["updated_at", "2018-07-01 18:39:46.997463"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (2.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:39:47.013228"], ["updated_at", "2018-07-01 18:39:47.013228"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:39:47.026062"], ["updated_at", "2018-07-01 18:39:47.026062"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:39:47.039890"], ["updated_at", "2018-07-01 18:39:47.039890"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:39:47.055602"], ["updated_at", "2018-07-01 18:39:47.055602"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:39:47.066209"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (2.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:51:04.384216', '2018-07-01 18:51:04.384216', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:51:04.384216', '2018-07-01 18:51:04.384216', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:51:04.384216', '2018-07-01 18:51:04.384216', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:51:04.392238', '2018-07-01 18:51:04.392238', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:51:04.392238', '2018-07-01 18:51:04.392238', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:51:04.398496', '2018-07-01 18:51:04.398496', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:51:04.398496', '2018-07-01 18:51:04.398496', 298486374, 298486374, 298486374)[0m
  [1m[35m (5.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:51:04 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Completed 500 Internal Server Error in 63ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:51:04 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:51:04.993577"], ["updated_at", "2018-07-01 18:51:04.993577"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:51:05.053745"], ["updated_at", "2018-07-01 18:51:05.053745"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 78ms (ActiveRecord: 4.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (22.4ms)
Completed 200 OK in 481ms (Views: 473.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (19.9ms)
  Rendered line_items/edit.html.erb within layouts/application (23.6ms)
Completed 200 OK in 35ms (Views: 30.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.8ms)
  Rendered line_items/new.html.erb within layouts/application (6.9ms)
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (17.4ms)
Completed 200 OK in 25ms (Views: 21.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (10.7ms)
Completed 200 OK in 47ms (Views: 16.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:51:05.852145"], ["updated_at", "2018-07-01 18:51:05.852145"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:51:05.866727"], ["updated_at", "2018-07-01 18:51:05.866727"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (5.0ms)
  Rendered carts/edit.html.erb within layouts/application (19.4ms)
Completed 200 OK in 55ms (Views: 26.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:51:05 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.4ms)
Completed 200 OK in 17ms (Views: 13.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/new.html.erb within layouts/application (4.3ms)
Completed 200 OK in 23ms (Views: 9.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.9ms)
Completed 200 OK in 13ms (Views: 9.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:51:06.088389"], ["updated_at", "2018-07-01 18:51:06.088389"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.7ms)
Completed 200 OK in 26ms (Views: 22.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (9.3ms)
  Rendered products/new.html.erb within layouts/application (12.8ms)
Completed 200 OK in 23ms (Views: 19.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:51:06.204403"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (1.3ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 2.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 11ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/edit.html.erb within layouts/application (7.9ms)
Completed 200 OK in 17ms (Views: 12.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:51:06.336003"], ["updated_at", "2018-07-01 18:51:06.336003"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:51:06 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.0ms)
Completed 200 OK in 46ms (Views: 21.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:51:06.410420"], ["updated_at", "2018-07-01 18:51:06.410420"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:51:06.433020"], ["updated_at", "2018-07-01 18:51:06.433020"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:51:06.444317"], ["updated_at", "2018-07-01 18:51:06.444317"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:51:06.461721"], ["updated_at", "2018-07-01 18:51:06.461721"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:51:06.485003"], ["updated_at", "2018-07-01 18:51:06.485003"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:51:06.498947"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:52:54.735417', '2018-07-01 18:52:54.735417', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:52:54.735417', '2018-07-01 18:52:54.735417', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:52:54.735417', '2018-07-01 18:52:54.735417', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:52:54.742584', '2018-07-01 18:52:54.742584', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:52:54.742584', '2018-07-01 18:52:54.742584', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:52:54.747389', '2018-07-01 18:52:54.747389', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:52:54.747389', '2018-07-01 18:52:54.747389', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:52:54 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 44ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (37.4ms)
  Rendered products/edit.html.erb within layouts/application (42.9ms)
Completed 200 OK in 503ms (Views: 497.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.4ms)
Completed 200 OK in 25ms (Views: 19.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:52:55.621739"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.2ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:52:55.675825"], ["updated_at", "2018-07-01 18:52:55.675825"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.9ms)
  Rendered products/new.html.erb within layouts/application (7.7ms)
Completed 200 OK in 15ms (Views: 12.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 11ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (18.8ms)
Completed 200 OK in 29ms (Views: 25.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:52:55.896778"], ["updated_at", "2018-07-01 18:52:55.896778"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:52:55.947845"], ["updated_at", "2018-07-01 18:52:55.947845"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:52:55.984306"], ["updated_at", "2018-07-01 18:52:55.984306"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 46ms (ActiveRecord: 4.1ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:52:55 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.4ms)
  Rendered carts/new.html.erb within layouts/application (6.2ms)
Completed 200 OK in 16ms (Views: 13.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (9.7ms)
Completed 200 OK in 20ms (Views: 14.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.6ms)
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.1ms)
  Rendered carts/edit.html.erb within layouts/application (4.7ms)
Completed 200 OK in 13ms (Views: 9.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (17.6ms)
Completed 200 OK in 27ms (Views: 23.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:52:56.205252"], ["updated_at", "2018-07-01 18:52:56.205252"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:52:56.219500"], ["updated_at", "2018-07-01 18:52:56.219500"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 3.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.9ms)
Completed 200 OK in 18ms (Views: 13.2ms | ActiveRecord: 1.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (2.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 10ms (ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Unpermitted parameter: :product_id
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.0ms)
  Rendered line_items/new.html.erb within layouts/application (9.3ms)
Completed 200 OK in 18ms (Views: 15.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.9ms)
  Rendered line_items/edit.html.erb within layouts/application (6.4ms)
Completed 200 OK in 17ms (Views: 12.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:52:56 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (6.5ms)
Completed 200 OK in 16ms (Views: 11.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:52:56.391419"], ["updated_at", "2018-07-01 18:52:56.391419"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:52:56.408859"], ["updated_at", "2018-07-01 18:52:56.408859"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:52:56.419680"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:52:56.431972"], ["updated_at", "2018-07-01 18:52:56.431972"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:52:56.503162"], ["updated_at", "2018-07-01 18:52:56.503162"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:52:56.514260"], ["updated_at", "2018-07-01 18:52:56.514260"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:53:14.185759', '2018-07-01 18:53:14.185759', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:53:14.185759', '2018-07-01 18:53:14.185759', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:53:14.185759', '2018-07-01 18:53:14.185759', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:53:14.192213', '2018-07-01 18:53:14.192213', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:53:14.192213', '2018-07-01 18:53:14.192213', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:53:14.196205', '2018-07-01 18:53:14.196205', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:53:14.196205', '2018-07-01 18:53:14.196205', 298486374, 298486374, 298486374)[0m
  [1m[35m (30.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:53:14 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 37ms (ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:53:14 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (472.2ms)
Completed 200 OK in 489ms (Views: 485.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (17.8ms)
  Rendered products/new.html.erb within layouts/application (20.7ms)
Completed 200 OK in 28ms (Views: 25.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:53:15.051928"], ["updated_at", "2018-07-01 18:53:15.051928"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (5.8ms)
  Rendered products/edit.html.erb within layouts/application (8.0ms)
Completed 200 OK in 17ms (Views: 12.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 11ms (Views: 7.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.6ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:53:15.154005"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 15ms (Views: 12.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (34.7ms)
Completed 200 OK in 44ms (Views: 39.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.3ms)
  Rendered carts/new.html.erb within layouts/application (5.9ms)
Completed 200 OK in 13ms (Views: 10.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:53:15.312892"], ["updated_at", "2018-07-01 18:53:15.312892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:53:15.342945"], ["updated_at", "2018-07-01 18:53:15.342945"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:53:15.357084"], ["updated_at", "2018-07-01 18:53:15.357084"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 22ms (ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/edit.html.erb within layouts/application (4.5ms)
Completed 200 OK in 13ms (Views: 9.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.1ms)
Completed 200 OK in 19ms (Views: 14.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Unpermitted parameter: :product_id
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.4ms)
  Rendered line_items/new.html.erb within layouts/application (9.1ms)
Completed 200 OK in 17ms (Views: 14.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:53:15.506343"], ["updated_at", "2018-07-01 18:53:15.506343"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:53:15.520346"], ["updated_at", "2018-07-01 18:53:15.520346"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 22ms (ActiveRecord: 3.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (8.1ms)
Completed 200 OK in 17ms (Views: 12.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 21ms (Views: 17.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.9ms)
  Rendered line_items/edit.html.erb within layouts/application (6.2ms)
Completed 200 OK in 15ms (Views: 11.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:53:15 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.6ms)
Completed 200 OK in 24ms (Views: 20.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:53:15.751039"], ["updated_at", "2018-07-01 18:53:15.751039"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:53:15.766804"], ["updated_at", "2018-07-01 18:53:15.766804"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:53:15.776858"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:53:15.787955"], ["updated_at", "2018-07-01 18:53:15.787955"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:53:15.803238"], ["updated_at", "2018-07-01 18:53:15.803238"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:53:15.813966"], ["updated_at", "2018-07-01 18:53:15.813966"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:56:49.543435', '2018-07-01 18:56:49.543435', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 18:56:49.543435', '2018-07-01 18:56:49.543435', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 18:56:49.543435', '2018-07-01 18:56:49.543435', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:56:49.549874', '2018-07-01 18:56:49.549874', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 18:56:49.549874', '2018-07-01 18:56:49.549874', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:56:49.554231', '2018-07-01 18:56:49.554231', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 18:56:49.554231', '2018-07-01 18:56:49.554231', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 13:56:49 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 18:56:49.790571"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 35ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 13:56:49 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 17ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 13:56:49 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (17.9ms)
  Rendered products/edit.html.erb within layouts/application (21.8ms)
Completed 200 OK in 424ms (Views: 419.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 12ms (Views: 7.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 18:56:50.344664"], ["updated_at", "2018-07-01 18:56:50.344664"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 22ms (Views: 19.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.3ms)
  Rendered products/new.html.erb within layouts/application (7.4ms)
Completed 200 OK in 15ms (Views: 12.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:56:50.503828"], ["updated_at", "2018-07-01 18:56:50.503828"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:56:50.540772"], ["updated_at", "2018-07-01 18:56:50.540772"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 18:56:50.551922"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:56:50.564994"], ["updated_at", "2018-07-01 18:56:50.564994"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:56:50.580898"], ["updated_at", "2018-07-01 18:56:50.580898"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 18:56:50.593029"], ["updated_at", "2018-07-01 18:56:50.593029"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by StoreController#index as HTML
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (18.5ms)
Completed 200 OK in 28ms (Views: 24.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (20.6ms)
Completed 200 OK in 30ms (Views: 25.4ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (6.9ms)
Completed 200 OK in 17ms (Views: 11.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:56:50.745029"], ["updated_at", "2018-07-01 18:56:50.745029"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:56:50.759649"], ["updated_at", "2018-07-01 18:56:50.759649"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 24ms (ActiveRecord: 3.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (10.0ms)
Completed 200 OK in 81ms (Views: 16.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (8.8ms)
  Rendered line_items/edit.html.erb within layouts/application (12.0ms)
Completed 200 OK in 22ms (Views: 17.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.6ms)
  Rendered line_items/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 14ms (Views: 11.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 13:56:50 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:56:50.992951"], ["updated_at", "2018-07-01 18:56:50.992951"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 13:56:51 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 18:56:51.020846"], ["updated_at", "2018-07-01 18:56:51.020846"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 18:56:51.035945"], ["updated_at", "2018-07-01 18:56:51.035945"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 23ms (ActiveRecord: 4.0ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 13:56:51 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:56:51 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 13:56:51 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.9ms)
  Rendered carts/edit.html.erb within layouts/application (7.1ms)
Completed 200 OK in 17ms (Views: 13.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 13:56:51 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 16ms (Views: 13.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 13:56:51 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.0ms)
  Rendered carts/new.html.erb within layouts/application (3.9ms)
Completed 200 OK in 12ms (Views: 9.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 13:56:51 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered carts/show.html.erb within layouts/application (9.6ms)
Completed 200 OK in 18ms (Views: 14.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "carts"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "carts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "line_items"[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "line_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer, "cart_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "quantity" integer DEFAULT 1, "price" decimal)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE  INDEX "index_line_items_on_cart_id" ON "line_items" ("cart_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX "index_line_items_on_product_id" ON "line_items" ("product_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "image_url" varchar, "price" decimal(8,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (9.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180701185821)[0m
  [1m[35m (4.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180701084959),
(20180701073008),
(20180701090620),
(20180701084733),
(20180701090305);

[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-07-01 19:09:22.893324"], ["updated_at", "2018-07-01 19:09:22.893324"]]
  [1m[35m (8.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (4.7ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:09:23.054012', '2018-07-01 19:09:23.054012', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:09:23.054012', '2018-07-01 19:09:23.054012', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:09:23.054012', '2018-07-01 19:09:23.054012', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:09:23.068011', '2018-07-01 19:09:23.068011', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:09:23.068011', '2018-07-01 19:09:23.068011', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:09:23.073895', '2018-07-01 19:09:23.073895', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:09:23.073895', '2018-07-01 19:09:23.073895', 298486374, 298486374, 298486374)[0m
  [1m[35m (4.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:09:23 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (29.8ms)
  Rendered products/edit.html.erb within layouts/application (34.6ms)
Completed 500 Internal Server Error in 721ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:09:24.144169"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 24ms (ActiveRecord: 2.3ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (7.4ms)
  Rendered products/new.html.erb within layouts/application (9.6ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (5.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:09:24.233451"], ["updated_at", "2018-07-01 19:09:24.233451"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 20ms (ActiveRecord: 6.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 51ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.0ms)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.0ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 75ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:09:24.538153"], ["updated_at", "2018-07-01 19:09:24.538153"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (17.8ms)
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (11.4ms)
Completed 200 OK in 59ms (Views: 37.0ms | ActiveRecord: 2.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (8.6ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (18.1ms)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (7.3ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 17ms (ActiveRecord: 8.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (6.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (5.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:09:24.793404"], ["updated_at", "2018-07-01 19:09:24.793404"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (27.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:09:24.817536"], ["updated_at", "2018-07-01 19:09:24.817536"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 63ms (ActiveRecord: 36.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (19.4ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (6.7ms)
  Rendered carts/_cart.html.erb (15.0ms)
Completed 200 OK in 49ms (Views: 41.9ms | ActiveRecord: 1.5ms)
  [1m[35m (3.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.7ms)
  Rendered line_items/edit.html.erb within layouts/application (12.1ms)
Completed 500 Internal Server Error in 31ms (ActiveRecord: 0.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:09:24 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.6ms)
  Rendered line_items/new.html.erb within layouts/application (6.0ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 18ms (ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:09:25.057776"], ["updated_at", "2018-07-01 19:09:25.057776"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:09:25.080884"], ["updated_at", "2018-07-01 19:09:25.080884"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:09:25.098389"], ["updated_at", "2018-07-01 19:09:25.098389"], ["price", 9.99]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:09:25.119627"], ["updated_at", "2018-07-01 19:09:25.119627"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.4ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:09:25.144242"], ["updated_at", "2018-07-01 19:09:25.144242"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.8ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:09:25.159568"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:09:25.192860"], ["updated_at", "2018-07-01 19:09:25.192860"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:09:25.215543"], ["updated_at", "2018-07-01 19:09:25.215543"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 39ms (ActiveRecord: 7.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 18ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (7.3ms)
Completed 500 Internal Server Error in 69ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:09:25.409449"], ["updated_at", "2018-07-01 19:09:25.409449"]]
  [1m[35m (6.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 24ms (ActiveRecord: 7.6ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (6.9ms)
  Rendered carts/new.html.erb within layouts/application (13.3ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
Completed 200 OK in 44ms (Views: 26.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (1.9ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/edit.html.erb within layouts/application (9.3ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.5ms)
  Rendered carts/_cart.html.erb (10.8ms)
Completed 200 OK in 37ms (Views: 29.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.5ms)
  Rendered carts/_cart.html.erb (11.1ms)
  Rendered carts/show.html.erb within layouts/application (13.7ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (0.9ms)
  Rendered carts/_cart.html.erb (4.1ms)
Completed 200 OK in 31ms (Views: 25.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:09:25 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:11:32.895834', '2018-07-01 19:11:32.895834', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:11:32.895834', '2018-07-01 19:11:32.895834', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:11:32.895834', '2018-07-01 19:11:32.895834', 207281424)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:11:32.902592', '2018-07-01 19:11:32.902592', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:11:32.902592', '2018-07-01 19:11:32.902592', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:11:32.906726', '2018-07-01 19:11:32.906726', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:11:32.906726', '2018-07-01 19:11:32.906726', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:11:32.966636"], ["updated_at", "2018-07-01 19:11:32.966636"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:11:33.037430"], ["updated_at", "2018-07-01 19:11:33.037430"], ["price", 49.5]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:11:33.050035"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:11:33.062522"], ["updated_at", "2018-07-01 19:11:33.062522"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:11:33.101918"], ["updated_at", "2018-07-01 19:11:33.101918"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:11:33.112319"], ["updated_at", "2018-07-01 19:11:33.112319"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:11:33 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 30ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:11:33 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 3.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:11:33 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:11:33.428163"], ["id", 980190962]]
  [1m[35m (1.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 21ms (ActiveRecord: 3.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:11:33 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 452ms (Views: 446.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:11:33 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:11:33.924135"], ["updated_at", "2018-07-01 19:11:33.924135"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:11:33 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.7ms)
Completed 200 OK in 22ms (Views: 19.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:11:33 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (19.1ms)
  Rendered products/edit.html.erb within layouts/application (23.0ms)
Completed 200 OK in 32ms (Views: 28.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.8ms)
  Rendered products/new.html.erb within layouts/application (7.8ms)
Completed 200 OK in 16ms (Views: 13.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:11:34.066858"], ["updated_at", "2018-07-01 19:11:34.066858"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:11:34.079590"], ["updated_at", "2018-07-01 19:11:34.079590"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 3.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.7ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.9ms)
  Rendered carts/_cart.html.erb (14.9ms)
Completed 200 OK in 50ms (Views: 43.1ms | ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 14ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.9ms)
  Rendered line_items/edit.html.erb within layouts/application (10.1ms)
Completed 200 OK in 21ms (Views: 17.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (9.8ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (6.4ms)
Completed 200 OK in 15ms (Views: 11.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.1ms)
  Rendered line_items/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 13ms (Views: 10.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:11:34.319067"], ["updated_at", "2018-07-01 19:11:34.319067"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.0ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.4ms)
Completed 200 OK in 31ms (Views: 22.8ms | ActiveRecord: 2.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.4ms)
  Rendered carts/_cart.html.erb (8.2ms)
  Rendered carts/show.html.erb within layouts/application (10.1ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.0ms)
Completed 200 OK in 25ms (Views: 19.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:11:34.414253"], ["updated_at", "2018-07-01 19:11:34.414253"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:11:34.430594"], ["updated_at", "2018-07-01 19:11:34.430594"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 4.3ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/edit.html.erb within layouts/application (7.0ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.5ms)
  Rendered carts/_cart.html.erb (8.3ms)
Completed 200 OK in 26ms (Views: 20.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:11:34.532043"], ["updated_at", "2018-07-01 19:11:34.532043"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.9ms)
Completed 200 OK in 70ms (Views: 67.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:11:34 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.7ms)
  Rendered carts/new.html.erb within layouts/application (3.6ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.2ms)
Completed 200 OK in 15ms (Views: 11.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (4.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:13:52.607064', '2018-07-01 19:13:52.607064', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:13:52.607064', '2018-07-01 19:13:52.607064', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:13:52.607064', '2018-07-01 19:13:52.607064', 207281424)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:13:52.613465', '2018-07-01 19:13:52.613465', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:13:52.613465', '2018-07-01 19:13:52.613465', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:13:52.617514', '2018-07-01 19:13:52.617514', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:13:52.617514', '2018-07-01 19:13:52.617514', 298486374, 298486374, 298486374)[0m
  [1m[35m (26.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:13:52 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:13:52.882430"], ["updated_at", "2018-07-01 19:13:52.882430"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (561.3ms)
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (16.4ms)
Completed 200 OK in 625ms (Views: 590.3ms | ActiveRecord: 2.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (14.7ms)
  Rendered line_items/new.html.erb within layouts/application (17.6ms)
Completed 200 OK in 28ms (Views: 24.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (13.2ms)
Completed 200 OK in 23ms (Views: 17.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (9.7ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.4ms)
  Rendered line_items/edit.html.erb within layouts/application (7.1ms)
Completed 200 OK in 16ms (Views: 12.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:13:53.693818"], ["updated_at", "2018-07-01 19:13:53.693818"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:13:53.712925"], ["updated_at", "2018-07-01 19:13:53.712925"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 27ms (ActiveRecord: 4.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.2ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.0ms)
  Rendered carts/_cart.html.erb (11.8ms)
Completed 200 OK in 36ms (Views: 30.2ms | ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:13:53.874311"], ["updated_at", "2018-07-01 19:13:53.874311"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:13:53.890386"], ["updated_at", "2018-07-01 19:13:53.890386"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:13:53.900303"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:13:53.910579"], ["updated_at", "2018-07-01 19:13:53.910579"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:13:53.925858"], ["updated_at", "2018-07-01 19:13:53.925858"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:13:53.936293"], ["updated_at", "2018-07-01 19:13:53.936293"], ["price", 9.99]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:13:53.964824"], ["updated_at", "2018-07-01 19:13:53.964824"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:13:53 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:13:53.990903"], ["updated_at", "2018-07-01 19:13:53.990903"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:13:54.004346"], ["updated_at", "2018-07-01 19:13:54.004346"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 11ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.6ms)
  Rendered carts/edit.html.erb within layouts/application (7.8ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.3ms)
  Rendered carts/_cart.html.erb (8.2ms)
Completed 200 OK in 28ms (Views: 23.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.8ms)
  Rendered carts/new.html.erb within layouts/application (3.9ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.5ms)
Completed 200 OK in 14ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.6ms)
Completed 200 OK in 13ms (Views: 9.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.2ms)
  Rendered carts/_cart.html.erb (7.8ms)
  Rendered carts/show.html.erb within layouts/application (9.4ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (2.8ms)
Completed 200 OK in 21ms (Views: 16.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:13:54.196631"], ["updated_at", "2018-07-01 19:13:54.196631"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (13.9ms)
Completed 200 OK in 24ms (Views: 20.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 12ms (Views: 7.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.4ms)
  Rendered products/edit.html.erb within layouts/application (13.3ms)
Completed 200 OK in 23ms (Views: 19.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.6ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:13:54.346286"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:13:54 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.4ms)
  Rendered products/new.html.erb within layouts/application (7.4ms)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:16:26.811621', '2018-07-01 19:16:26.811621', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:16:26.811621', '2018-07-01 19:16:26.811621', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:16:26.811621', '2018-07-01 19:16:26.811621', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:16:26.817966', '2018-07-01 19:16:26.817966', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:16:26.817966', '2018-07-01 19:16:26.817966', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:16:26.822752', '2018-07-01 19:16:26.822752', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:16:26.822752', '2018-07-01 19:16:26.822752', 298486374, 298486374, 298486374)[0m
  [1m[35m (26.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (6.0ms)
  Rendered carts/new.html.erb within layouts/application (9.6ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (13.1ms)
Completed 200 OK in 576ms (Views: 559.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 13ms (Views: 9.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:16:27.712287"], ["updated_at", "2018-07-01 19:16:27.712287"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:16:27.758283"], ["updated_at", "2018-07-01 19:16:27.758283"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 56ms (ActiveRecord: 4.3ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 16ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (3.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.9ms)
  Rendered carts/_cart.html.erb (79.1ms)
  Rendered carts/show.html.erb within layouts/application (81.9ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (3.5ms)
Completed 200 OK in 96ms (Views: 91.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:16:27.925381"], ["updated_at", "2018-07-01 19:16:27.925381"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:16:27 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/edit.html.erb within layouts/application (4.4ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (10.8ms)
Completed 200 OK in 26ms (Views: 21.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (11.3ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.5ms)
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:16:28.054722"], ["updated_at", "2018-07-01 19:16:28.054722"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:16:28.072851"], ["updated_at", "2018-07-01 19:16:28.072851"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 26ms (ActiveRecord: 3.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.0ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (8.7ms)
Completed 200 OK in 45ms (Views: 36.9ms | ActiveRecord: 1.5ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 10ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (19.1ms)
  Rendered line_items/new.html.erb within layouts/application (22.8ms)
Completed 200 OK in 33ms (Views: 29.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.4ms)
Completed 200 OK in 17ms (Views: 12.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.6ms)
  Rendered line_items/edit.html.erb within layouts/application (7.0ms)
Completed 200 OK in 18ms (Views: 13.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 16ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:16:28.331111"], ["updated_at", "2018-07-01 19:16:28.331111"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (21.2ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (6.7ms)
Completed 200 OK in 52ms (Views: 39.7ms | ActiveRecord: 2.1ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:16:28.405248"], ["updated_at", "2018-07-01 19:16:28.405248"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:16:28.427767"], ["updated_at", "2018-07-01 19:16:28.427767"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:16:28.444055"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (1.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (18.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:16:28.460157"], ["updated_at", "2018-07-01 19:16:28.460157"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:16:28.525105"], ["updated_at", "2018-07-01 19:16:28.525105"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:16:28.540953"], ["updated_at", "2018-07-01 19:16:28.540953"], ["price", 9.99]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 32ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (23.7ms)
Completed 200 OK in 41ms (Views: 36.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (15.8ms)
  Rendered products/edit.html.erb within layouts/application (20.1ms)
Completed 200 OK in 35ms (Views: 30.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:16:28.751763"], ["id", 980190962]]
  [1m[35m (3.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 37ms (ActiveRecord: 5.2ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:16:28.826300"], ["updated_at", "2018-07-01 19:16:28.826300"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 24ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 15ms (ActiveRecord: 4.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (3.7ms)
Completed 200 OK in 16ms (Views: 11.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:16:28 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (9.5ms)
  Rendered products/new.html.erb within layouts/application (13.7ms)
Completed 200 OK in 23ms (Views: 21.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (9.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:17:30.821527', '2018-07-01 19:17:30.821527', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:17:30.821527', '2018-07-01 19:17:30.821527', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:17:30.821527', '2018-07-01 19:17:30.821527', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:17:30.827877', '2018-07-01 19:17:30.827877', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:17:30.827877', '2018-07-01 19:17:30.827877', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:17:30.832118', '2018-07-01 19:17:30.832118', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:17:30.832118', '2018-07-01 19:17:30.832118', 298486374, 298486374, 298486374)[0m
  [1m[35m (34.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 64ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:17:31.284475"], ["updated_at", "2018-07-01 19:17:31.284475"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:17:31.306199"], ["updated_at", "2018-07-01 19:17:31.306199"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 30ms (ActiveRecord: 4.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (412.3ms)
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.8ms)
  Rendered carts/_cart.html.erb (14.5ms)
Completed 200 OK in 448ms (Views: 439.8ms | ActiveRecord: 1.7ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (75.7ms)
Completed 500 Internal Server Error in 81ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (13.0ms)
  Rendered line_items/new.html.erb within layouts/application (15.9ms)
Completed 200 OK in 24ms (Views: 21.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/edit.html.erb within layouts/application (6.0ms)
Completed 200 OK in 14ms (Views: 10.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:17:31 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.8ms)
Completed 200 OK in 17ms (Views: 12.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:17:31.992225"], ["updated_at", "2018-07-01 19:17:31.992225"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:17:32.009726"], ["updated_at", "2018-07-01 19:17:32.009726"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:17:32.020017"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:17:32.030507"], ["updated_at", "2018-07-01 19:17:32.030507"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:17:32.046323"], ["updated_at", "2018-07-01 19:17:32.046323"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:17:32.057934"], ["updated_at", "2018-07-01 19:17:32.057934"], ["price", 9.99]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:17:32.079067"], ["updated_at", "2018-07-01 19:17:32.079067"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (11.6ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
Completed 200 OK in 28ms (Views: 20.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.4ms)
Completed 200 OK in 25ms (Views: 22.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (8.9ms)
  Rendered products/edit.html.erb within layouts/application (11.9ms)
Completed 200 OK in 20ms (Views: 16.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.6ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:17:32.204667"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 1.9ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:17:32.231822"], ["updated_at", "2018-07-01 19:17:32.231822"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.1ms)
  Rendered products/new.html.erb within layouts/application (6.8ms)
Completed 200 OK in 14ms (Views: 11.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 7ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.6ms)
Completed 200 OK in 14ms (Views: 8.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:17:32.431471"], ["updated_at", "2018-07-01 19:17:32.431471"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.4ms)
  Rendered carts/edit.html.erb within layouts/application (7.6ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.0ms)
  Rendered carts/_cart.html.erb (10.1ms)
Completed 200 OK in 29ms (Views: 24.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.6ms)
  Rendered carts/_cart.html.erb (11.4ms)
  Rendered carts/show.html.erb within layouts/application (23.7ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (2.9ms)
Completed 200 OK in 36ms (Views: 31.0ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.7ms)
  Rendered carts/new.html.erb within layouts/application (3.4ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.3ms)
Completed 200 OK in 14ms (Views: 11.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 12ms (Views: 9.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:17:32.610978"], ["updated_at", "2018-07-01 19:17:32.610978"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:17:32.623714"], ["updated_at", "2018-07-01 19:17:32.623714"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:17:32 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:18:25.402919', '2018-07-01 19:18:25.402919', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:18:25.402919', '2018-07-01 19:18:25.402919', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:18:25.402919', '2018-07-01 19:18:25.402919', 207281424)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:18:25.412381', '2018-07-01 19:18:25.412381', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:18:25.412381', '2018-07-01 19:18:25.412381', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:18:25.416774', '2018-07-01 19:18:25.416774', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:18:25.416774', '2018-07-01 19:18:25.416774', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:18:25 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (44.7ms)
Completed 200 OK in 467ms (Views: 445.8ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (16.1ms)
  Rendered line_items/new.html.erb within layouts/application (19.0ms)
Completed 200 OK in 27ms (Views: 24.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 15ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:26.232547"], ["updated_at", "2018-07-01 19:18:26.232547"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:26.254706"], ["updated_at", "2018-07-01 19:18:26.254706"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 31ms (ActiveRecord: 3.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (22.5ms)
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.3ms)
  Rendered carts/_cart.html.erb (16.7ms)
Completed 200 OK in 55ms (Views: 47.7ms | ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (98.3ms)
Completed 500 Internal Server Error in 103ms (ActiveRecord: 0.4ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.9ms)
  Rendered line_items/edit.html.erb within layouts/application (9.7ms)
Completed 200 OK in 33ms (Views: 16.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:18:26.626715"], ["updated_at", "2018-07-01 19:18:26.626715"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 16ms (Views: 10.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:18:26.691796"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 16ms (ActiveRecord: 1.9ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 16ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (81.6ms)
Completed 200 OK in 90ms (Views: 87.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (12.4ms)
  Rendered products/edit.html.erb within layouts/application (17.7ms)
Completed 200 OK in 29ms (Views: 24.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.4ms)
  Rendered products/new.html.erb within layouts/application (7.5ms)
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:26.940068"], ["updated_at", "2018-07-01 19:18:26.940068"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.6ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.8ms)
Completed 200 OK in 37ms (Views: 28.1ms | ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:18:26 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (9.4ms)
  Rendered carts/show.html.erb within layouts/application (12.9ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.6ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 31ms (Views: 24.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:18:27 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.8ms)
  Rendered carts/new.html.erb within layouts/application (6.8ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.5ms)
Completed 200 OK in 19ms (Views: 16.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:18:27 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:27.083171"], ["updated_at", "2018-07-01 19:18:27.083171"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:27.101806"], ["updated_at", "2018-07-01 19:18:27.101806"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 27ms (ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:18:27 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.7ms)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:18:27 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.8ms)
  Rendered carts/edit.html.erb within layouts/application (6.2ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (9.3ms)
Completed 200 OK in 28ms (Views: 22.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:18:27 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:18:27 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 13ms (Views: 10.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:18:27 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:27.253398"], ["updated_at", "2018-07-01 19:18:27.253398"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 12ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:27.277822"], ["updated_at", "2018-07-01 19:18:27.277822"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:27.296442"], ["updated_at", "2018-07-01 19:18:27.296442"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:18:27.308859"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:27.322851"], ["updated_at", "2018-07-01 19:18:27.322851"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:27.343337"], ["updated_at", "2018-07-01 19:18:27.343337"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:27.357431"], ["updated_at", "2018-07-01 19:18:27.357431"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:18:36.556410', '2018-07-01 19:18:36.556410', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:18:36.556410', '2018-07-01 19:18:36.556410', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:18:36.556410', '2018-07-01 19:18:36.556410', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:18:36.562728', '2018-07-01 19:18:36.562728', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:18:36.562728', '2018-07-01 19:18:36.562728', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:18:36.566908', '2018-07-01 19:18:36.566908', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:18:36.566908', '2018-07-01 19:18:36.566908', 298486374, 298486374, 298486374)[0m
  [1m[35m (29.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.9ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:36.741657"], ["updated_at", "2018-07-01 19:18:36.741657"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:36.821115"], ["updated_at", "2018-07-01 19:18:36.821115"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:36.830706"], ["updated_at", "2018-07-01 19:18:36.830706"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:36.845599"], ["updated_at", "2018-07-01 19:18:36.845599"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:36.861684"], ["updated_at", "2018-07-01 19:18:36.861684"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:18:36.876245"], ["id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:18:36 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 23ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (10.4ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.0ms)
Completed 200 OK in 516ms (Views: 511.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (72.5ms)
  Rendered line_items/edit.html.erb within layouts/application (75.7ms)
Completed 200 OK in 84ms (Views: 80.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:37.764696"], ["updated_at", "2018-07-01 19:18:37.764696"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:37.779665"], ["updated_at", "2018-07-01 19:18:37.779665"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 3.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (25.5ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.1ms)
  Rendered carts/_cart.html.erb (15.2ms)
Completed 200 OK in 64ms (Views: 53.7ms | ActiveRecord: 1.5ms)
  [1m[35m (5.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.2ms)
  Rendered line_items/new.html.erb within layouts/application (7.2ms)
Completed 200 OK in 17ms (Views: 14.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:37.921191"], ["updated_at", "2018-07-01 19:18:37.921191"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:18:37.933339"], ["updated_at", "2018-07-01 19:18:37.933339"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 19ms (ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:18:37 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.4ms)
  Rendered carts/new.html.erb within layouts/application (6.3ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.7ms)
Completed 200 OK in 21ms (Views: 17.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 11ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.5ms)
  Rendered carts/edit.html.erb within layouts/application (5.4ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.2ms)
  Rendered carts/_cart.html.erb (7.6ms)
Completed 200 OK in 22ms (Views: 18.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.5ms)
Completed 200 OK in 12ms (Views: 9.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:38.095719"], ["updated_at", "2018-07-01 19:18:38.095719"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (8.7ms)
  Rendered carts/show.html.erb within layouts/application (10.6ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.2ms)
Completed 200 OK in 23ms (Views: 18.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (4.2ms)
Completed 200 OK in 16ms (Views: 12.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:18:38.246181"], ["updated_at", "2018-07-01 19:18:38.246181"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (12.3ms)
Completed 200 OK in 19ms (Views: 16.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (10.4ms)
  Rendered products/edit.html.erb within layouts/application (14.2ms)
Completed 200 OK in 23ms (Views: 19.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/new.html.erb within layouts/application (7.4ms)
Completed 200 OK in 14ms (Views: 12.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:18:38.362462"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:18:38 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:18:38.384290"], ["updated_at", "2018-07-01 19:18:38.384290"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (11.4ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 29ms (Views: 20.7ms | ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:19:01.992636', '2018-07-01 19:19:01.992636', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:19:01.992636', '2018-07-01 19:19:01.992636', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:19:01.992636', '2018-07-01 19:19:01.992636', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:19:01.998536', '2018-07-01 19:19:01.998536', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:19:01.998536', '2018-07-01 19:19:01.998536', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:19:02.002518', '2018-07-01 19:19:02.002518', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:19:02.002518', '2018-07-01 19:19:02.002518', 298486374, 298486374, 298486374)[0m
  [1m[35m (32.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  Rendered line_items/index.html.erb within layouts/application (11.5ms)
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 65ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (16.4ms)
  Rendered line_items/edit.html.erb within layouts/application (19.7ms)
Completed 200 OK in 408ms (Views: 403.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.9ms)
  Rendered line_items/new.html.erb within layouts/application (5.7ms)
Completed 200 OK in 14ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:19:02.809700"], ["updated_at", "2018-07-01 19:19:02.809700"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:19:02.830578"], ["updated_at", "2018-07-01 19:19:02.830578"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 29ms (ActiveRecord: 4.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.2ms)
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.7ms)
  Rendered carts/_cart.html.erb (15.7ms)
Completed 200 OK in 51ms (Views: 43.3ms | ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.0ms)
Completed 200 OK in 16ms (Views: 11.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:19:02 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:19:02.968091"], ["updated_at", "2018-07-01 19:19:02.968091"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (16.1ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.5ms)
Completed 200 OK in 43ms (Views: 28.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:19:03.102151"], ["updated_at", "2018-07-01 19:19:03.102151"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:19:03.119383"], ["updated_at", "2018-07-01 19:19:03.119383"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:19:03.128875"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:19:03.141137"], ["updated_at", "2018-07-01 19:19:03.141137"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:19:03.157172"], ["updated_at", "2018-07-01 19:19:03.157172"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:19:03.168014"], ["updated_at", "2018-07-01 19:19:03.168014"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:19:03.196208"], ["updated_at", "2018-07-01 19:19:03.196208"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:19:03.210082"], ["updated_at", "2018-07-01 19:19:03.210082"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 21ms (ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.7ms)
  Rendered carts/edit.html.erb within layouts/application (6.6ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.7ms)
  Rendered carts/_cart.html.erb (70.0ms)
Completed 200 OK in 90ms (Views: 84.8ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:19:03.385056"], ["updated_at", "2018-07-01 19:19:03.385056"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.5ms)
  Rendered carts/_cart.html.erb (8.3ms)
  Rendered carts/show.html.erb within layouts/application (11.6ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (3.1ms)
Completed 200 OK in 24ms (Views: 20.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/new.html.erb within layouts/application (3.9ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.5ms)
Completed 200 OK in 17ms (Views: 13.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (6.5ms)
Completed 200 OK in 16ms (Views: 12.2ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:19:03.512610"], ["updated_at", "2018-07-01 19:19:03.512610"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (9.5ms)
  Rendered products/new.html.erb within layouts/application (12.4ms)
Completed 200 OK in 25ms (Views: 21.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.9ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 15ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.0ms)
Completed 200 OK in 24ms (Views: 20.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (6.0ms)
  Rendered products/edit.html.erb within layouts/application (8.3ms)
Completed 200 OK in 17ms (Views: 13.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 13ms (Views: 8.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:19:03 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:19:03.731551"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:28:12.861081', '2018-07-01 19:28:12.861081', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:28:12.861081', '2018-07-01 19:28:12.861081', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:28:12.861081', '2018-07-01 19:28:12.861081', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:28:12.867378', '2018-07-01 19:28:12.867378', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:28:12.867378', '2018-07-01 19:28:12.867378', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:28:12.871467', '2018-07-01 19:28:12.871467', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:28:12.871467', '2018-07-01 19:28:12.871467', 298486374, 298486374, 298486374)[0m
  [1m[35m (29.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:28:13 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:28:13.151667"], ["updated_at", "2018-07-01 19:28:13.151667"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 25ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:28:13 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (12.2ms)
Completed 200 OK in 540ms (Views: 536.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:28:13 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:28:13 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:28:13.779530"], ["updated_at", "2018-07-01 19:28:13.779530"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:28:13.832278"], ["updated_at", "2018-07-01 19:28:13.832278"], ["price", 49.5]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 64ms (ActiveRecord: 5.3ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:28:13 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (7.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 10.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:28:13 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (2.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (10.9ms)
  Rendered carts/edit.html.erb within layouts/application (28.0ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (14.8ms)
  Rendered carts/_cart.html.erb (24.8ms)
Completed 200 OK in 76ms (Views: 66.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:28:13 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.4ms)
  Rendered carts/show.html.erb within layouts/application (11.4ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (3.4ms)
Completed 200 OK in 26ms (Views: 21.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.6ms)
  Rendered carts/new.html.erb within layouts/application (4.7ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.3ms)
Completed 200 OK in 16ms (Views: 13.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:28:14.048495"], ["updated_at", "2018-07-01 19:28:14.048495"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:28:14.067890"], ["updated_at", "2018-07-01 19:28:14.067890"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:28:14.081278"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:28:14.099493"], ["updated_at", "2018-07-01 19:28:14.099493"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:28:14.121956"], ["updated_at", "2018-07-01 19:28:14.121956"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:28:14.135687"], ["updated_at", "2018-07-01 19:28:14.135687"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:28:14.248529"], ["updated_at", "2018-07-01 19:28:14.248529"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (19.6ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.4ms)
Completed 200 OK in 47ms (Views: 34.6ms | ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:28:14.331909"], ["updated_at", "2018-07-01 19:28:14.331909"]]
  [1m[35m (1.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:28:14.351237"], ["updated_at", "2018-07-01 19:28:14.351237"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 32ms (ActiveRecord: 5.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (17.3ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.4ms)
  Rendered carts/_cart.html.erb (11.1ms)
Completed 200 OK in 41ms (Views: 35.7ms | ActiveRecord: 1.3ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (24.1ms)
Completed 200 OK in 36ms (Views: 30.2ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (19.6ms)
  Rendered line_items/new.html.erb within layouts/application (22.3ms)
Completed 200 OK in 30ms (Views: 27.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/edit.html.erb within layouts/application (5.9ms)
Completed 200 OK in 15ms (Views: 11.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.3ms)
Completed 200 OK in 18ms (Views: 12.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:28:14.651949"], ["updated_at", "2018-07-01 19:28:14.651949"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (16.6ms)
Completed 200 OK in 28ms (Views: 25.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (11.1ms)
  Rendered products/new.html.erb within layouts/application (14.3ms)
Completed 200 OK in 23ms (Views: 19.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (6.4ms)
  Rendered products/edit.html.erb within layouts/application (10.1ms)
Completed 200 OK in 21ms (Views: 16.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.9ms)
Completed 200 OK in 14ms (Views: 9.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:28:14 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.6ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:28:14.942316"], ["id", 980190962]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 15ms (ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:30:56.981821', '2018-07-01 19:30:56.981821', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:30:56.981821', '2018-07-01 19:30:56.981821', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:30:56.981821', '2018-07-01 19:30:56.981821', 207281424)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:30:56.988517', '2018-07-01 19:30:56.988517', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:30:56.988517', '2018-07-01 19:30:56.988517', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:30:56.992922', '2018-07-01 19:30:56.992922', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:30:56.992922', '2018-07-01 19:30:56.992922', 298486374, 298486374, 298486374)[0m
  [1m[35m (28.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:30:57.078382"], ["updated_at", "2018-07-01 19:30:57.078382"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (4.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:30:57.175144"], ["updated_at", "2018-07-01 19:30:57.175144"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:30:57.185984"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:30:57.201560"], ["updated_at", "2018-07-01 19:30:57.201560"]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:30:57.222338"], ["updated_at", "2018-07-01 19:30:57.222338"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:30:57.243411"], ["updated_at", "2018-07-01 19:30:57.243411"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:30:57 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:30:57.577289"], ["updated_at", "2018-07-01 19:30:57.577289"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:30:57.594369"], ["updated_at", "2018-07-01 19:30:57.594369"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 41ms (ActiveRecord: 4.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:30:57 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (417.2ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.9ms)
  Rendered carts/_cart.html.erb (14.4ms)
Completed 200 OK in 454ms (Views: 445.0ms | ActiveRecord: 1.8ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (15.2ms)
  Rendered line_items/edit.html.erb within layouts/application (18.6ms)
Completed 200 OK in 33ms (Views: 27.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (10.6ms)
Completed 200 OK in 21ms (Views: 15.5ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.9ms)
  Rendered line_items/new.html.erb within layouts/application (5.9ms)
Completed 200 OK in 14ms (Views: 11.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.8ms)
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.4ms)
Completed 200 OK in 25ms (Views: 21.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.3ms)
Completed 200 OK in 16ms (Views: 13.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.7ms)
  Rendered carts/new.html.erb within layouts/application (6.2ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (3.4ms)
Completed 200 OK in 17ms (Views: 15.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:30:58.373303"], ["updated_at", "2018-07-01 19:30:58.373303"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:30:58.397458"], ["updated_at", "2018-07-01 19:30:58.397458"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:30:58.412194"], ["updated_at", "2018-07-01 19:30:58.412194"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.6ms)
  Rendered carts/_cart.html.erb (9.3ms)
  Rendered carts/show.html.erb within layouts/application (11.0ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (0.9ms)
  Rendered carts/_cart.html.erb (3.0ms)
Completed 200 OK in 24ms (Views: 19.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/edit.html.erb within layouts/application (4.7ms)
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.6ms)
  Rendered carts/_cart.html.erb (10.6ms)
Completed 200 OK in 25ms (Views: 20.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:30:58.543697"], ["updated_at", "2018-07-01 19:30:58.543697"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (10.1ms)
  Rendered products/new.html.erb within layouts/application (14.2ms)
Completed 200 OK in 26ms (Views: 22.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (6.0ms)
  Rendered products/edit.html.erb within layouts/application (9.1ms)
Completed 200 OK in 19ms (Views: 15.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.2ms)
Completed 200 OK in 22ms (Views: 19.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:30:58.724787"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:30:58 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:30:58.769150"], ["updated_at", "2018-07-01 19:30:58.769150"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.8ms)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.9ms)
Completed 200 OK in 36ms (Views: 26.0ms | ActiveRecord: 2.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.8ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (3.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:36:39.418657', '2018-07-01 19:36:39.418657', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:36:39.418657', '2018-07-01 19:36:39.418657', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:36:39.418657', '2018-07-01 19:36:39.418657', 207281424)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:36:39.425285', '2018-07-01 19:36:39.425285', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:36:39.425285', '2018-07-01 19:36:39.425285', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:36:39.429506', '2018-07-01 19:36:39.429506', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:36:39.429506', '2018-07-01 19:36:39.429506', 298486374, 298486374, 298486374)[0m
  [1m[35m (4.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:36:39 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (4.1ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 31ms (ActiveRecord: 5.2ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:36:39 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (35.7ms)
  Rendered line_items/edit.html.erb within layouts/application (41.2ms)
Completed 200 OK in 1428ms (Views: 1415.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:36:41.313582"], ["updated_at", "2018-07-01 19:36:41.313582"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (2.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:36:41.378394"], ["updated_at", "2018-07-01 19:36:41.378394"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 84ms (ActiveRecord: 5.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (26.5ms)
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.5ms)
  Rendered carts/_cart.html.erb (14.0ms)
Completed 200 OK in 55ms (Views: 48.1ms | ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (9.1ms)
Completed 200 OK in 20ms (Views: 13.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:36:41.511916"], ["updated_at", "2018-07-01 19:36:41.511916"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:36:41.544010"], ["updated_at", "2018-07-01 19:36:41.544010"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.8ms)
  Rendered carts/_cart.html.erb (18.8ms)
  Rendered line_items/create.js.erb (22.0ms)
Completed 200 OK in 93ms (Views: 24.8ms | ActiveRecord: 5.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (26.8ms)
Completed 200 OK in 36ms (Views: 32.5ms | ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.7ms)
  Rendered line_items/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 39ms (Views: 10.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:36:41.872687"], ["updated_at", "2018-07-01 19:36:41.872687"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.9ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (19.4ms)
  Rendered products/new.html.erb within layouts/application (22.4ms)
Completed 200 OK in 34ms (Views: 30.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (5.0ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:36:41.956401"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 26ms (ActiveRecord: 6.3ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:36:41 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 14ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (8.0ms)
  Rendered products/edit.html.erb within layouts/application (10.5ms)
Completed 200 OK in 50ms (Views: 18.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (2.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (17.6ms)
Completed 200 OK in 26ms (Views: 20.1ms | ActiveRecord: 2.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:36:42.134914"], ["updated_at", "2018-07-01 19:36:42.134914"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:36:42.156476"], ["updated_at", "2018-07-01 19:36:42.156476"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:36:42.172367"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:36:42.183466"], ["updated_at", "2018-07-01 19:36:42.183466"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:36:42.200104"], ["updated_at", "2018-07-01 19:36:42.200104"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:36:42.210844"], ["updated_at", "2018-07-01 19:36:42.210844"], ["price", 9.99]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (7.0ms)
Completed 200 OK in 21ms (Views: 14.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.0ms)
  Rendered carts/edit.html.erb within layouts/application (7.7ms)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.4ms)
  Rendered carts/_cart.html.erb (7.9ms)
Completed 200 OK in 28ms (Views: 22.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:36:42.360644"], ["updated_at", "2018-07-01 19:36:42.360644"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/new.html.erb within layouts/application (3.8ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.0ms)
Completed 200 OK in 38ms (Views: 12.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (6.2ms)
  Rendered carts/_cart.html.erb (16.8ms)
  Rendered carts/show.html.erb within layouts/application (19.0ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (0.9ms)
  Rendered carts/_cart.html.erb (4.1ms)
Completed 200 OK in 41ms (Views: 29.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:36:42.491603"], ["updated_at", "2018-07-01 19:36:42.491603"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:36:42.504571"], ["updated_at", "2018-07-01 19:36:42.504571"], ["price", 49.5]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.9ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:36:42 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:36:42.551104"], ["updated_at", "2018-07-01 19:36:42.551104"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.8ms)
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (6.3ms)
Completed 200 OK in 37ms (Views: 26.5ms | ActiveRecord: 3.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:43:07.112938', '2018-07-01 19:43:07.112938', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:43:07.112938', '2018-07-01 19:43:07.112938', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:43:07.112938', '2018-07-01 19:43:07.112938', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:43:07.119343', '2018-07-01 19:43:07.119343', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:43:07.119343', '2018-07-01 19:43:07.119343', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:43:07.124081', '2018-07-01 19:43:07.124081', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:43:07.124081', '2018-07-01 19:43:07.124081', 298486374, 298486374, 298486374)[0m
  [1m[35m (25.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:43:07.186197"], ["updated_at", "2018-07-01 19:43:07.186197"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:43:07.277277"], ["updated_at", "2018-07-01 19:43:07.277277"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:43:07.290932"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (4.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:43:07.318283"], ["updated_at", "2018-07-01 19:43:07.318283"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:43:07.348047"], ["updated_at", "2018-07-01 19:43:07.348047"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:43:07.366150"], ["updated_at", "2018-07-01 19:43:07.366150"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:43:07 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:43:07.653045"], ["updated_at", "2018-07-01 19:43:07.653045"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:43:07.668130"], ["updated_at", "2018-07-01 19:43:07.668130"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 38ms (ActiveRecord: 3.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:43:07 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (618.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.1ms)
  Rendered carts/_cart.html.erb (13.0ms)
Completed 200 OK in 655ms (Views: 647.3ms | ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:43:08.365358"], ["updated_at", "2018-07-01 19:43:08.365358"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:43:08.379593"], ["updated_at", "2018-07-01 19:43:08.379593"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (10.7ms)
  Rendered carts/_cart.html.erb (19.3ms)
  Rendered line_items/create.js.erb (30.6ms)
Completed 200 OK in 66ms (Views: 34.2ms | ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (13.4ms)
  Rendered line_items/new.html.erb within layouts/application (16.5ms)
Completed 200 OK in 27ms (Views: 23.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.2ms)
  Rendered line_items/edit.html.erb within layouts/application (6.3ms)
Completed 200 OK in 16ms (Views: 11.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.7ms)
Completed 200 OK in 24ms (Views: 19.9ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (6.8ms)
Completed 200 OK in 16ms (Views: 11.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:43:08.643677"], ["updated_at", "2018-07-01 19:43:08.643677"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.6ms)
  Rendered products/edit.html.erb within layouts/application (12.9ms)
Completed 200 OK in 23ms (Views: 19.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.4ms)
Completed 200 OK in 23ms (Views: 18.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 12ms (Views: 8.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:43:08.765721"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/new.html.erb within layouts/application (7.5ms)
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/edit.html.erb within layouts/application (7.3ms)
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.0ms)
Completed 200 OK in 32ms (Views: 26.0ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.3ms)
  Rendered carts/_cart.html.erb (8.1ms)
  Rendered carts/show.html.erb within layouts/application (10.2ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (3.6ms)
Completed 200 OK in 24ms (Views: 19.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:43:08 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.7ms)
  Rendered carts/new.html.erb within layouts/application (3.9ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.5ms)
Completed 200 OK in 45ms (Views: 42.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:43:09 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:43:09.024879"], ["updated_at", "2018-07-01 19:43:09.024879"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:43:09.038797"], ["updated_at", "2018-07-01 19:43:09.038797"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:43:09 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:43:09 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 13ms (Views: 10.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:43:09 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:43:09.109015"], ["updated_at", "2018-07-01 19:43:09.109015"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:43:09 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:43:09.128610"], ["updated_at", "2018-07-01 19:43:09.128610"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.4ms)
Completed 200 OK in 31ms (Views: 23.7ms | ActiveRecord: 2.4ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:45:37.839519', '2018-07-01 19:45:37.839519', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 19:45:37.839519', '2018-07-01 19:45:37.839519', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 19:45:37.839519', '2018-07-01 19:45:37.839519', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:45:37.845824', '2018-07-01 19:45:37.845824', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 19:45:37.845824', '2018-07-01 19:45:37.845824', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:45:37.850045', '2018-07-01 19:45:37.850045', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 19:45:37.850045', '2018-07-01 19:45:37.850045', 298486374, 298486374, 298486374)[0m
  [1m[35m (27.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (1.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:45:38.037600"], ["updated_at", "2018-07-01 19:45:38.037600"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:45:38.087981"], ["updated_at", "2018-07-01 19:45:38.087981"], ["price", 49.5]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Update (1.0ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 19:45:38.101030"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:45:38.115699"], ["updated_at", "2018-07-01 19:45:38.115699"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:45:38.132541"], ["updated_at", "2018-07-01 19:45:38.132541"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 19:45:38.143428"], ["updated_at", "2018-07-01 19:45:38.143428"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 14:45:38 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:45:38.335669"], ["updated_at", "2018-07-01 19:45:38.335669"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (1969.1ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.8ms)
Completed 200 OK in 2017ms (Views: 1991.8ms | ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:45:40.382378"], ["updated_at", "2018-07-01 19:45:40.382378"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:45:40.405462"], ["updated_at", "2018-07-01 19:45:40.405462"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 36ms (ActiveRecord: 4.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.2ms)
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.5ms)
  Rendered carts/_cart.html.erb (11.9ms)
Completed 200 OK in 44ms (Views: 36.0ms | ActiveRecord: 2.7ms)
  [1m[35m (1.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:45:40.498364"], ["updated_at", "2018-07-01 19:45:40.498364"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:45:40.513974"], ["updated_at", "2018-07-01 19:45:40.513974"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.5ms)
  Rendered carts/_cart.html.erb (11.4ms)
  Rendered line_items/create.js.erb (14.4ms)
Completed 200 OK in 43ms (Views: 18.2ms | ActiveRecord: 5.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (15.3ms)
  Rendered line_items/new.html.erb within layouts/application (18.2ms)
Completed 200 OK in 29ms (Views: 25.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 16ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCACHE Product Load (0.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.6ms)
Completed 200 OK in 24ms (Views: 20.4ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.9ms)
Completed 200 OK in 17ms (Views: 12.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.1ms)
  Rendered line_items/edit.html.erb within layouts/application (6.8ms)
Completed 200 OK in 16ms (Views: 11.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (2.5ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 18ms (ActiveRecord: 4.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (1.0ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 19:45:40.851783"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (15.7ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 80ms (ActiveRecord: 2.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (12.3ms)
  Rendered products/new.html.erb within layouts/application (15.6ms)
Completed 200 OK in 29ms (Views: 24.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 14:45:40 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.4ms)
Completed 200 OK in 23ms (Views: 19.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 19:45:41.029892"], ["updated_at", "2018-07-01 19:45:41.029892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 11ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.8ms)
  Rendered products/edit.html.erb within layouts/application (12.0ms)
Completed 200 OK in 21ms (Views: 17.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:45:41.130213"], ["updated_at", "2018-07-01 19:45:41.130213"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 19:45:41.150166"], ["updated_at", "2018-07-01 19:45:41.150166"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 30ms (ActiveRecord: 4.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 15ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.6ms)
  Rendered carts/_cart.html.erb (10.4ms)
  Rendered carts/show.html.erb within layouts/application (12.8ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (4.4ms)
Completed 200 OK in 31ms (Views: 25.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.9ms)
  Rendered carts/edit.html.erb within layouts/application (6.9ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (8.6ms)
Completed 200 OK in 30ms (Views: 24.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 19:45:41.312650"], ["updated_at", "2018-07-01 19:45:41.312650"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 11ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.6ms)
  Rendered carts/new.html.erb within layouts/application (3.5ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.3ms)
Completed 200 OK in 17ms (Views: 14.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 14:45:41 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 14ms (Views: 10.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "carts"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "carts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "line_items"[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "line_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer, "cart_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "quantity" integer DEFAULT 1, "price" decimal, "order_id" integer)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE  INDEX "index_line_items_on_cart_id" ON "line_items" ("cart_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE  INDEX "index_line_items_on_product_id" ON "line_items" ("product_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders"[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "address" text, "email" varchar, "pay_type" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "image_url" varchar, "price" decimal(8,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (4.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180701194723)[0m
  [1m[35m (4.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180701084959),
(20180701073008),
(20180701194705),
(20180701090620),
(20180701084733),
(20180701185821),
(20180701090305);

[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-07-01 20:22:16.190986"], ["updated_at", "2018-07-01 20:22:16.190986"]]
  [1m[35m (6.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-01 20:22:16.367154', '2018-07-01 20:22:16.367154', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-01 20:22:16.367154', '2018-07-01 20:22:16.367154', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 20:22:16.375329', '2018-07-01 20:22:16.375329', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 20:22:16.375329', '2018-07-01 20:22:16.375329', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 20:22:16.375329', '2018-07-01 20:22:16.375329', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 20:22:16.381128', '2018-07-01 20:22:16.381128', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 20:22:16.381128', '2018-07-01 20:22:16.381128', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 20:22:16.385618', '2018-07-01 20:22:16.385618', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-01 20:22:16.385618', '2018-07-01 20:22:16.385618', 298486374, 980190962, 207281424)[0m
  [1m[35m (33.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:16.474174"], ["updated_at", "2018-07-01 20:22:16.474174"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (5.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:22:16.566267"], ["updated_at", "2018-07-01 20:22:16.566267"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 20:22:16.580172"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:16.597913"], ["updated_at", "2018-07-01 20:22:16.597913"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (3.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:22:16.620435"], ["updated_at", "2018-07-01 20:22:16.620435"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 20:22:16.641917"], ["updated_at", "2018-07-01 20:22:16.641917"], ["price", 9.99]]
  [1m[35m (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 15:22:17 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (8.3ms)
Completed 200 OK in 1080ms (Views: 1061.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (29.4ms)
  Rendered orders/edit.html.erb within layouts/application (33.5ms)
Completed 200 OK in 45ms (Views: 38.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 20ms (ActiveRecord: 3.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:18.253373"], ["updated_at", "2018-07-01 20:22:18.253373"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 14ms (ActiveRecord: 3.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:18.281442"], ["updated_at", "2018-07-01 20:22:18.281442"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-01 20:22:18.294482"], ["updated_at", "2018-07-01 20:22:18.294482"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 30ms (ActiveRecord: 4.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:18.358612"], ["updated_at", "2018-07-01 20:22:18.358612"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:22:18.374729"], ["updated_at", "2018-07-01 20:22:18.374729"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 4.0ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.3ms)
  Rendered orders/new.html.erb within layouts/application (7.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (12.7ms)
  Rendered carts/_cart.html.erb (21.9ms)
Completed 200 OK in 47ms (Views: 37.4ms | ActiveRecord: 1.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (5.1ms)
Completed 200 OK in 20ms (Views: 14.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:18.663393"], ["updated_at", "2018-07-01 20:22:18.663393"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.9ms)
  Rendered carts/edit.html.erb within layouts/application (7.8ms)
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.3ms)
  Rendered carts/_cart.html.erb (9.9ms)
Completed 200 OK in 34ms (Views: 27.6ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.2ms)
Completed 200 OK in 14ms (Views: 10.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:18.783938"], ["updated_at", "2018-07-01 20:22:18.783938"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:22:18.798230"], ["updated_at", "2018-07-01 20:22:18.798230"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 4.2ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.8ms)
  Rendered carts/new.html.erb within layouts/application (5.7ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.7ms)
Completed 200 OK in 45ms (Views: 18.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.1ms)
  Rendered carts/_cart.html.erb (10.0ms)
  Rendered carts/show.html.erb within layouts/application (12.0ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.6ms)
Completed 200 OK in 27ms (Views: 21.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:18.946172"], ["updated_at", "2018-07-01 20:22:18.946172"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:22:18.961197"], ["updated_at", "2018-07-01 20:22:18.961197"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 4.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 15:22:18 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (16.5ms)
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.4ms)
Completed 200 OK in 42ms (Views: 35.3ms | ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (9.0ms)
Completed 200 OK in 23ms (Views: 16.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (15.1ms)
Completed 200 OK in 52ms (Views: 20.5ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.7ms)
  Rendered line_items/new.html.erb within layouts/application (10.3ms)
Completed 200 OK in 23ms (Views: 19.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:19.263956"], ["updated_at", "2018-07-01 20:22:19.263956"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:22:19.280058"], ["updated_at", "2018-07-01 20:22:19.280058"], ["price", 49.5]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.0ms)
  Rendered carts/_cart.html.erb (14.9ms)
  Rendered line_items/create.js.erb (18.6ms)
Completed 200 OK in 70ms (Views: 21.3ms | ActiveRecord: 4.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.8ms)
  Rendered line_items/edit.html.erb within layouts/application (7.3ms)
Completed 200 OK in 19ms (Views: 14.4ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 16ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 20:22:19.442419"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (18.4ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 87ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 20:22:19.596401"], ["updated_at", "2018-07-01 20:22:19.596401"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 15ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (12.3ms)
  Rendered products/edit.html.erb within layouts/application (16.2ms)
Completed 200 OK in 54ms (Views: 26.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (7.3ms)
  Rendered products/new.html.erb within layouts/application (10.0ms)
Completed 200 OK in 25ms (Views: 20.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (5.2ms)
Completed 200 OK in 19ms (Views: 13.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (18.8ms)
Completed 200 OK in 29ms (Views: 24.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 15:22:19 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:22:19.807039"], ["updated_at", "2018-07-01 20:22:19.807039"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (17.3ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.1ms)
Completed 200 OK in 45ms (Views: 34.0ms | ActiveRecord: 2.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (9.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-01 20:30:06.663494', '2018-07-01 20:30:06.663494', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-01 20:30:06.663494', '2018-07-01 20:30:06.663494', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 20:30:06.671219', '2018-07-01 20:30:06.671219', 980190962)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-01 20:30:06.671219', '2018-07-01 20:30:06.671219', 298486374)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-01 20:30:06.671219', '2018-07-01 20:30:06.671219', 207281424)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 20:30:06.676952', '2018-07-01 20:30:06.676952', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-01 20:30:06.676952', '2018-07-01 20:30:06.676952', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-01 20:30:06.681541', '2018-07-01 20:30:06.681541', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-01 20:30:06.681541', '2018-07-01 20:30:06.681541', 298486374, 980190962, 207281424)[0m
  [1m[35m (7.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:30:06 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:07.070202"], ["updated_at", "2018-07-01 20:30:07.070202"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (3.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:30:07.106924"], ["updated_at", "2018-07-01 20:30:07.106924"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 70ms (ActiveRecord: 6.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 15:30:07 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (544.6ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.1ms)
  Rendered carts/_cart.html.erb (15.4ms)
Completed 200 OK in 587ms (Views: 578.3ms | ActiveRecord: 2.4ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:30:07 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:07.741941"], ["updated_at", "2018-07-01 20:30:07.741941"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:30:07.757456"], ["updated_at", "2018-07-01 20:30:07.757456"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.4ms)
  Rendered carts/_cart.html.erb (11.2ms)
  Rendered line_items/create.js.erb (14.5ms)
Completed 200 OK in 73ms (Views: 22.2ms | ActiveRecord: 4.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 15:30:07 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 15:30:07 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (19.1ms)
  Rendered line_items/edit.html.erb within layouts/application (23.0ms)
Completed 200 OK in 34ms (Views: 29.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 15:30:07 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (10.1ms)
Completed 200 OK in 20ms (Views: 14.8ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 15:30:07 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 15:30:07 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.9ms)
Completed 200 OK in 49ms (Views: 21.9ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.2ms)
  Rendered line_items/new.html.erb within layouts/application (6.3ms)
Completed 200 OK in 16ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:08.153495"], ["updated_at", "2018-07-01 20:30:08.153495"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 16ms (Views: 12.5ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:08.212913"], ["updated_at", "2018-07-01 20:30:08.212913"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:30:08.227772"], ["updated_at", "2018-07-01 20:30:08.227772"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 4.4ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.1ms)
  Rendered carts/edit.html.erb within layouts/application (9.3ms)
  [1m[36mLineItem Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.1ms)
  Rendered carts/_cart.html.erb (9.2ms)
Completed 200 OK in 56ms (Views: 27.6ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (9.2ms)
  Rendered carts/show.html.erb within layouts/application (11.3ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.5ms)
Completed 200 OK in 25ms (Views: 20.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.7ms)
  Rendered carts/new.html.erb within layouts/application (3.8ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.0ms)
Completed 200 OK in 20ms (Views: 16.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.9ms)
Completed 200 OK in 28ms (Views: 24.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-01 20:30:08.494142"], ["updated_at", "2018-07-01 20:30:08.494142"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (11.7ms)
  Rendered products/edit.html.erb within layouts/application (16.6ms)
Completed 200 OK in 50ms (Views: 23.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 14ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (4.0ms)
Completed 200 OK in 39ms (Views: 12.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-01 20:30:08.674631"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (14.1ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 76ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (1.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 15:30:08 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (10.4ms)
  Rendered products/new.html.erb within layouts/application (17.7ms)
Completed 200 OK in 59ms (Views: 29.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:08.864151"], ["updated_at", "2018-07-01 20:30:08.864151"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:30:08.886612"], ["updated_at", "2018-07-01 20:30:08.886612"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (2.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-01 20:30:08.902016"], ["updated_at", "2018-07-01 20:30:08.902016"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:08.921941"], ["updated_at", "2018-07-01 20:30:08.921941"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:30:08.943174"], ["updated_at", "2018-07-01 20:30:08.943174"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-01 20:30:08.955582"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:09.025872"], ["updated_at", "2018-07-01 20:30:09.025872"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-01 20:30:09.043564"], ["updated_at", "2018-07-01 20:30:09.043564"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 28ms (ActiveRecord: 4.0ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (20.6ms)
  Rendered orders/new.html.erb within layouts/application (25.4ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.8ms)
  Rendered carts/_cart.html.erb (11.4ms)
Completed 200 OK in 62ms (Views: 49.1ms | ActiveRecord: 1.8ms)
  [1m[35m (1.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (8.2ms)
Completed 200 OK in 18ms (Views: 15.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (7.4ms)
  Rendered orders/edit.html.erb within layouts/application (11.3ms)
Completed 200 OK in 26ms (Views: 19.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:09.240460"], ["updated_at", "2018-07-01 20:30:09.240460"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:09.272233"], ["updated_at", "2018-07-01 20:30:09.272233"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-01 20:30:09.282793"], ["updated_at", "2018-07-01 20:30:09.282793"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (1.8ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 29ms (ActiveRecord: 5.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (1.1ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 24ms (ActiveRecord: 3.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (3.1ms)
Completed 200 OK in 40ms (Views: 14.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 12ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 15:30:09 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-01 20:30:09.444196"], ["updated_at", "2018-07-01 20:30:09.444196"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (55.8ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.2ms)
Completed 200 OK in 79ms (Views: 68.0ms | ActiveRecord: 2.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.0ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:06:19.417019', '2018-07-02 00:06:19.417019', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:06:19.417019', '2018-07-02 00:06:19.417019', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:06:19.423475', '2018-07-02 00:06:19.423475', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:06:19.423475', '2018-07-02 00:06:19.423475', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:06:19.423475', '2018-07-02 00:06:19.423475', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:06:19.429426', '2018-07-02 00:06:19.429426', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:06:19.429426', '2018-07-02 00:06:19.429426', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:06:19.434658', '2018-07-02 00:06:19.434658', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:06:19.434658', '2018-07-02 00:06:19.434658', 298486374, 980190962, 207281424)[0m
  [1m[35m (5.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:06:19 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:19.784223"], ["updated_at", "2018-07-02 00:06:19.784223"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (6.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:06:19.852410"], ["updated_at", "2018-07-02 00:06:19.852410"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (12.6ms)
  Rendered carts/_cart.html.erb (24.5ms)
  Rendered line_items/create.js.erb (30.1ms)
Completed 200 OK in 146ms (Views: 39.2ms | ActiveRecord: 10.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 19:06:19 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (20.9ms)
  Rendered line_items/edit.html.erb within layouts/application (24.6ms)
Completed 200 OK in 4551ms (Views: 4542.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 15ms (Views: 11.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:24.534002"], ["updated_at", "2018-07-02 00:06:24.534002"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:06:24.551197"], ["updated_at", "2018-07-02 00:06:24.551197"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 26ms (ActiveRecord: 3.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.1ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.1ms)
  Rendered carts/_cart.html.erb (12.2ms)
Completed 200 OK in 46ms (Views: 37.3ms | ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.4ms)
Completed 200 OK in 24ms (Views: 19.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 8ms (ActiveRecord: 1.5ms)
  [1m[35m (2.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.4ms)
Completed 200 OK in 42ms (Views: 13.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:24.794719"], ["updated_at", "2018-07-02 00:06:24.794719"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.9ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.8ms)
Completed 200 OK in 35ms (Views: 24.5ms | ActiveRecord: 3.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 00:06:24.887771"], ["updated_at", "2018-07-02 00:06:24.887771"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 15ms (Views: 9.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (13.5ms)
Completed 200 OK in 23ms (Views: 18.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 19:06:24 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 00:06:24.982361"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (14.7ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 66ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (11.2ms)
  Rendered products/edit.html.erb within layouts/application (15.0ms)
Completed 200 OK in 26ms (Views: 20.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.4ms)
  Rendered products/new.html.erb within layouts/application (7.9ms)
Completed 200 OK in 39ms (Views: 13.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:25.194843"], ["updated_at", "2018-07-02 00:06:25.194843"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:06:25.212349"], ["updated_at", "2018-07-02 00:06:25.212349"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 00:06:25.220805"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:25.231879"], ["updated_at", "2018-07-02 00:06:25.231879"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:06:25.249381"], ["updated_at", "2018-07-02 00:06:25.249381"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 00:06:25.259766"], ["updated_at", "2018-07-02 00:06:25.259766"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (12.0ms)
  Rendered orders/edit.html.erb within layouts/application (15.7ms)
Completed 200 OK in 29ms (Views: 22.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:25.461234"], ["updated_at", "2018-07-02 00:06:25.461234"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:06:25.475928"], ["updated_at", "2018-07-02 00:06:25.475928"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 3.7ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (8.4ms)
  Rendered orders/new.html.erb within layouts/application (11.6ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 60ms (Views: 28.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 13ms (Views: 7.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:25.609002"], ["updated_at", "2018-07-02 00:06:25.609002"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:25.636273"], ["updated_at", "2018-07-02 00:06:25.636273"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 00:06:25.646458"], ["updated_at", "2018-07-02 00:06:25.646458"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 4.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 24ms (ActiveRecord: 2.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (7.0ms)
Completed 200 OK in 40ms (Views: 12.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (11.3ms)
  Rendered carts/show.html.erb within layouts/application (14.0ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.4ms)
Completed 200 OK in 31ms (Views: 25.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:25.822021"], ["updated_at", "2018-07-02 00:06:25.822021"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:06:25.850764"], ["updated_at", "2018-07-02 00:06:25.850764"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:06:25.865930"], ["updated_at", "2018-07-02 00:06:25.865930"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 60ms (ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 19:06:25 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (6.7ms)
Completed 200 OK in 40ms (Views: 11.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 19:06:26 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/new.html.erb within layouts/application (6.9ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (3.7ms)
Completed 200 OK in 23ms (Views: 19.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 19:06:26 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.3ms)
  Rendered carts/edit.html.erb within layouts/application (4.7ms)
  [1m[36mLineItem Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 28ms (Views: 20.8ms | ActiveRecord: 3.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:11:05.078684', '2018-07-02 00:11:05.078684', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:11:05.078684', '2018-07-02 00:11:05.078684', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:11:05.085332', '2018-07-02 00:11:05.085332', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:11:05.085332', '2018-07-02 00:11:05.085332', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:11:05.085332', '2018-07-02 00:11:05.085332', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:11:05.090941', '2018-07-02 00:11:05.090941', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:11:05.090941', '2018-07-02 00:11:05.090941', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:11:05.095183', '2018-07-02 00:11:05.095183', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:11:05.095183', '2018-07-02 00:11:05.095183', 298486374, 980190962, 207281424)[0m
  [1m[35m (10.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
LineItemsTest: test_creating_a_Line_item
----------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
----------------------------------------
LineItemsTest: test_updating_a_Line_item
----------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_2[0m
------------------------------------------
LineItemsTest: test_destroying_a_Line_item
------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (20.9ms)[0m  [1m[35mSAVEPOINT active_record_3[0m
--------------------------------------
LineItemsTest: test_visiting_the_index
--------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_4[0m
---------------------------------
CartsTest: test_destroying_a_Cart
---------------------------------
  [1m[36mCart Load (23.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_5[0m
-------------------------------
CartsTest: test_updating_a_Cart
-------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_6[0m
-------------------------------
CartsTest: test_creating_a_Cart
-------------------------------
  [1m[36mCart Load (4.8ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (20.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:21:38.811848', '2018-07-02 00:21:38.811848', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:21:38.811848', '2018-07-02 00:21:38.811848', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:21:38.818270', '2018-07-02 00:21:38.818270', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:21:38.818270', '2018-07-02 00:21:38.818270', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:21:38.818270', '2018-07-02 00:21:38.818270', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:21:38.823947', '2018-07-02 00:21:38.823947', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:21:38.823947', '2018-07-02 00:21:38.823947', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:21:38.828156', '2018-07-02 00:21:38.828156', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:21:38.828156', '2018-07-02 00:21:38.828156', 298486374, 980190962, 207281424)[0m
  [1m[35m (30.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
CartsTest: test_destroying_a_Cart
---------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartsTest: test_visiting_the_index
----------------------------------
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 19:23:02 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (9.8ms)
Completed 200 OK in 8747ms (Views: 8726.1ms | ActiveRecord: 0.4ms)
Started GET "/assets/application-91ec29e6aaa8f22476196eeced9dcdca4074f824dfd9376dab0c281ab06a7afb.css" for 127.0.0.1 at 2018-07-01 19:23:11 -0500
Started GET "/assets/application-de4657333cff43830ec92fbe0bb3530a37f46ae2b0a3fd3baa7f888ae88b5d73.js" for 127.0.0.1 at 2018-07-01 19:23:11 -0500
Started GET "/assets/logo-a8906fb6c933f00883d2ad0385ae52201c0e1d1f9235c37f4a5762f02ad80936.svg" for 127.0.0.1 at 2018-07-01 19:23:11 -0500
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:12 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:12 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:12 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
CartsTest: test_creating_a_Cart
-------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 19:23:12 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (7.8ms)
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 0.3ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:12 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:12 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 19:23:13 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (32.4ms)
  Rendered carts/new.html.erb within layouts/application (36.6ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (20.5ms)
Completed 200 OK in 113ms (Views: 108.8ms | ActiveRecord: 0.0ms)
Started POST "/carts" for 127.0.0.1 at 2018-07-01 19:23:13 -0500
Processing by CartsController#create as HTML
  Parameters: {"utf8"=>"✓", "commit"=>"Create Cart"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (7.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:23:13.874515"], ["updated_at", "2018-07-02 00:23:13.874515"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://127.0.0.1:37907/carts/980190963
Completed 302 Found in 25ms (ActiveRecord: 7.6ms)
Started GET "/carts/980190963" for 127.0.0.1 at 2018-07-01 19:23:13 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (8.6ms)
  Rendered carts/show.html.erb within layouts/application (13.8ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.7ms)
Completed 200 OK in 31ms (Views: 22.4ms | ActiveRecord: 1.3ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:13 -0500
ProductsChannel stopped streaming from products
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:14 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:14 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:16 -0500
ProductsChannel stopped streaming from products
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------
CartsTest: test_updating_a_Cart
-------------------------------
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 19:23:16 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 18ms (Views: 12.4ms | ActiveRecord: 0.4ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:17 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:17 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started GET "/carts/298486374/edit" for 127.0.0.1 at 2018-07-01 19:23:17 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.2ms)
  Rendered carts/edit.html.erb within layouts/application (15.8ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 298486374]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.7ms)
Completed 200 OK in 80ms (Views: 41.7ms | ActiveRecord: 1.2ms)
Started PATCH "/carts/298486374" for 127.0.0.1 at 2018-07-01 19:23:17 -0500
Processing by CartsController#update as HTML
  Parameters: {"utf8"=>"✓", "commit"=>"Update Cart", "id"=>"298486374"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (2.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://127.0.0.1:37907/carts/298486374
Completed 302 Found in 35ms (ActiveRecord: 3.4ms)
Started GET "/carts/298486374" for 127.0.0.1 at 2018-07-01 19:23:17 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mCart Load (2.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 298486374]]
  Rendered collection of templates [0 times] (0.6ms)
  Rendered carts/_cart.html.erb (8.9ms)
  Rendered carts/show.html.erb within layouts/application (10.5ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (3.4ms)
Completed 200 OK in 34ms (Views: 23.4ms | ActiveRecord: 3.0ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:17 -0500
ProductsChannel stopped streaming from products
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:18 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:18 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:20 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------
OrdersTest: test_check_routing_number
-------------------------------------
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 19:23:20 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:23:20.912250"], ["updated_at", "2018-07-02 00:23:20.912250"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (63.5ms)
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.6ms)
Completed 200 OK in 103ms (Views: 84.3ms | ActiveRecord: 4.9ms)
Started GET "/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg" for 127.0.0.1 at 2018-07-01 19:23:21 -0500
Started GET "/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg" for 127.0.0.1 at 2018-07-01 19:23:21 -0500
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:21 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:21 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started POST "/line_items?product_id=298486374" for 127.0.0.1 at 2018-07-01 19:23:21 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (4.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 00:23:21.761215"], ["updated_at", "2018-07-02 00:23:21.761215"], ["price", 9.99]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.6ms)
  Rendered carts/_cart.html.erb (12.5ms)
  Rendered line_items/create.js.erb (15.8ms)
Completed 200 OK in 97ms (Views: 22.7ms | ActiveRecord: 7.6ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:23:22 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (62.3ms)
  Rendered orders/new.html.erb within layouts/application (70.7ms)
  [1m[36mLineItem Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (15.9ms)
  Rendered carts/_cart.html.erb (28.7ms)
Completed 200 OK in 134ms (Views: 116.6ms | ActiveRecord: 3.0ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:22 -0500
ProductsChannel stopped streaming from products
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:22 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:22 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:27 -0500
ProductsChannel stopped streaming from products
  [1m[35m (1.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
OrdersTest: test_updating_a_Order
---------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:23:27 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (6.8ms)
Completed 200 OK in 46ms (Views: 12.7ms | ActiveRecord: 0.4ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:27 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:27 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started GET "/orders/298486374/edit" for 127.0.0.1 at 2018-07-01 19:23:27 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (8.2ms)
  Rendered orders/edit.html.erb within layouts/application (10.3ms)
Completed 200 OK in 65ms (Views: 18.2ms | ActiveRecord: 0.2ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:31 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
OrdersTest: test_visiting_the_index
-----------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:23:32 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 19ms (Views: 17.1ms | ActiveRecord: 0.4ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:32 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:32 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:32 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------
OrdersTest: test_creating_a_Order
---------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:23:32 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (3.6ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.2ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:32 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:32 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:23:33 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:23:33.110203"], ["updated_at", "2018-07-02 00:23:33.110203"]]
  [1m[35m (4.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://127.0.0.1:37907/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 56ms (ActiveRecord: 5.8ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 19:23:33 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.0ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (7.8ms)
Completed 200 OK in 49ms (Views: 42.4ms | ActiveRecord: 2.0ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:35 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------
OrdersTest: test_destroying_a_Order
-----------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:23:35 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (6.6ms)
Completed 200 OK in 21ms (Views: 17.9ms | ActiveRecord: 0.4ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:35 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:35 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started DELETE "/orders/298486374" for 127.0.0.1 at 2018-07-01 19:23:36 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 298486374]]
  [1m[36mOrder Destroy (1.0ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 298486374]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://127.0.0.1:37907/orders
Completed 302 Found in 24ms (ActiveRecord: 3.4ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:23:36 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 14ms (Views: 12.4ms | ActiveRecord: 0.2ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:36 -0500
ProductsChannel stopped streaming from products
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:36 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:36 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:37 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------
ProductsTest: test_visiting_the_index
-------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:23:37 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (26.3ms)
Completed 200 OK in 46ms (Views: 38.0ms | ActiveRecord: 0.5ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:37 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:37 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:37 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------
ProductsTest: test_creating_a_Product
-------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:23:37 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (22.2ms)
Completed 200 OK in 33ms (Views: 30.4ms | ActiveRecord: 0.3ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:38 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:38 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:40 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------
ProductsTest: test_destroying_a_Product
---------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:23:40 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (18.6ms)
Completed 200 OK in 27ms (Views: 25.3ms | ActiveRecord: 0.3ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:40 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:40 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started DELETE "/products/207281424" for 127.0.0.1 at 2018-07-01 19:23:41 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"207281424"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (4.3ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://127.0.0.1:37907/products
Completed 302 Found in 21ms (ActiveRecord: 5.1ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:23:41 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (26.6ms)
Completed 200 OK in 44ms (Views: 38.2ms | ActiveRecord: 1.2ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:41 -0500
ProductsChannel stopped streaming from products
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:41 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:41 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:41 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------
ProductsTest: test_updating_a_Product
-------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:23:42 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (16.2ms)
Completed 200 OK in 33ms (Views: 29.2ms | ActiveRecord: 0.3ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:42 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:42 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started GET "/products/207281424/edit" for 127.0.0.1 at 2018-07-01 19:23:42 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"207281424"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (16.6ms)
  Rendered products/edit.html.erb within layouts/application (29.6ms)
Completed 200 OK in 69ms (Views: 37.3ms | ActiveRecord: 0.3ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:45 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
LineItemsTest: test_updating_a_Line_item
----------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:23:45 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (18.2ms)
Completed 200 OK in 30ms (Views: 24.5ms | ActiveRecord: 1.4ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:45 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:45 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started GET "/line_items/298486374/edit" for 127.0.0.1 at 2018-07-01 19:23:46 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (12.9ms)
  Rendered line_items/edit.html.erb within layouts/application (16.4ms)
Completed 200 OK in 73ms (Views: 25.3ms | ActiveRecord: 0.3ms)
Started PATCH "/line_items/298486374" for 127.0.0.1 at 2018-07-01 19:23:47 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"utf8"=>"✓", "line_item"=>{"product_id"=>"298486374", "cart_id"=>"980190962"}, "commit"=>"Update Line item", "id"=>"298486374"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Unpermitted parameter: :cart_id
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (13.5ms)
  Rendered line_items/edit.html.erb within layouts/application (15.3ms)
Completed 200 OK in 33ms (Views: 21.9ms | ActiveRecord: 0.9ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:47 -0500
ProductsChannel stopped streaming from products
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:47 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:47 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:50 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
LineItemsTest: test_creating_a_Line_item
----------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:23:50 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (15.4ms)
Completed 200 OK in 24ms (Views: 21.1ms | ActiveRecord: 1.1ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:50 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:50 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 19:23:50 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (26.8ms)
  Rendered line_items/new.html.erb within layouts/application (28.7ms)
Completed 200 OK in 63ms (Views: 33.6ms | ActiveRecord: 0.0ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:23:51 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"utf8"=>"✓", "line_item"=>{"product_id"=>"298486374", "cart_id"=>"980190962"}, "commit"=>"Create Line item"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:23:51.967788"], ["updated_at", "2018-07-02 00:23:51.967788"]]
  [1m[35m (5.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 404 Not Found in 15ms (ActiveRecord: 6.3ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:52 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
LineItemsTest: test_destroying_a_Line_item
------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:23:52 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (23.7ms)
Completed 200 OK in 35ms (Views: 31.5ms | ActiveRecord: 1.3ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:53 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:53 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Started DELETE "/line_items/298486374" for 127.0.0.1 at 2018-07-01 19:23:53 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (1.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://127.0.0.1:37907/line_items
Completed 302 Found in 16ms (ActiveRecord: 2.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:23:53 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (9.1ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (20.3ms)
Completed 200 OK in 35ms (Views: 23.6ms | ActiveRecord: 9.9ms)
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:53 -0500
ProductsChannel stopped streaming from products
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:53 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:53 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:53 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
LineItemsTest: test_visiting_the_index
--------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:23:54 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (25.4ms)
Completed 200 OK in 34ms (Views: 31.8ms | ActiveRecord: 1.1ms)
Started GET "/cable" for 127.0.0.1 at 2018-07-01 19:23:54 -0500
Started GET "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:54 -0500
Successfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)
ProductsChannel is transmitting the subscription confirmation
ProductsChannel is streaming from products
Finished "/cable/" [WebSocket] for 127.0.0.1 at 2018-07-01 19:23:54 -0500
ProductsChannel stopped streaming from products
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:25:10.170295', '2018-07-02 00:25:10.170295', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:25:10.170295', '2018-07-02 00:25:10.170295', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:25:10.176657', '2018-07-02 00:25:10.176657', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:25:10.176657', '2018-07-02 00:25:10.176657', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:25:10.176657', '2018-07-02 00:25:10.176657', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:25:10.182294', '2018-07-02 00:25:10.182294', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:25:10.182294', '2018-07-02 00:25:10.182294', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:25:10.186595', '2018-07-02 00:25:10.186595', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:25:10.186595', '2018-07-02 00:25:10.186595', 298486374, 980190962, 207281424)[0m
  [1m[35m (5.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 19:25:10 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:10.497565"], ["updated_at", "2018-07-02 00:25:10.497565"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (5170.5ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (8.1ms)
Completed 200 OK in 5278ms (Views: 5241.9ms | ActiveRecord: 3.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 19:25:15 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 00:25:15.797508"], ["updated_at", "2018-07-02 00:25:15.797508"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:25:15 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.5ms)
Completed 200 OK in 26ms (Views: 22.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 19:25:15 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (20.8ms)
  Rendered products/new.html.erb within layouts/application (23.9ms)
Completed 200 OK in 67ms (Views: 37.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 19:25:15 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 28ms (ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 19:25:15 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (4.2ms)
Completed 200 OK in 52ms (Views: 19.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 00:25:16.086690"], ["id", 980190962]]
  [1m[35m (2.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (22.9ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 94ms (ActiveRecord: 4.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (13.5ms)
  Rendered products/edit.html.erb within layouts/application (17.5ms)
Completed 200 OK in 35ms (Views: 29.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (2.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:16.270897"], ["updated_at", "2018-07-02 00:25:16.270897"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:25:16.343639"], ["updated_at", "2018-07-02 00:25:16.343639"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 00:25:16.355514"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:16.372992"], ["updated_at", "2018-07-02 00:25:16.372992"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:25:16.404956"], ["updated_at", "2018-07-02 00:25:16.404956"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 00:25:16.421179"], ["updated_at", "2018-07-02 00:25:16.421179"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:16.481503"], ["updated_at", "2018-07-02 00:25:16.481503"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:25:16.500976"], ["updated_at", "2018-07-02 00:25:16.500976"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 32ms (ActiveRecord: 3.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.3ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (7.0ms)
  Rendered carts/_cart.html.erb (16.1ms)
Completed 200 OK in 59ms (Views: 50.0ms | ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (3.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:16.608846"], ["updated_at", "2018-07-02 00:25:16.608846"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:25:16.629727"], ["updated_at", "2018-07-02 00:25:16.629727"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.4ms)
  Rendered carts/_cart.html.erb (12.4ms)
  Rendered line_items/create.js.erb (17.2ms)
Completed 200 OK in 58ms (Views: 27.6ms | ActiveRecord: 8.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.6ms)
  Rendered line_items/new.html.erb within layouts/application (9.5ms)
Completed 200 OK in 19ms (Views: 16.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.2ms)
Completed 200 OK in 22ms (Views: 18.7ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (10.5ms)
Completed 200 OK in 45ms (Views: 16.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.4ms)
  Rendered line_items/edit.html.erb within layouts/application (6.7ms)
Completed 200 OK in 16ms (Views: 12.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (6.9ms)
Completed 200 OK in 17ms (Views: 13.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (3.4ms)
Completed 200 OK in 37ms (Views: 9.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:25:16 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:17.021256"], ["updated_at", "2018-07-02 00:25:17.021256"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (10.7ms)
  Rendered orders/edit.html.erb within layouts/application (14.3ms)
Completed 200 OK in 23ms (Views: 19.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:17.084222"], ["updated_at", "2018-07-02 00:25:17.084222"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:25:17.098728"], ["updated_at", "2018-07-02 00:25:17.098728"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 4.1ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.5ms)
  Rendered orders/new.html.erb within layouts/application (7.6ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.3ms)
  Rendered carts/_cart.html.erb (9.5ms)
Completed 200 OK in 33ms (Views: 24.8ms | ActiveRecord: 1.8ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 17ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:17.198123"], ["updated_at", "2018-07-02 00:25:17.198123"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 00:25:17.207665"], ["updated_at", "2018-07-02 00:25:17.207665"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 4.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.2ms)
  Rendered carts/_cart.html.erb (10.1ms)
  Rendered carts/show.html.erb within layouts/application (12.3ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.5ms)
Completed 200 OK in 29ms (Views: 23.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 15ms (Views: 11.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (5.4ms)
  Rendered carts/edit.html.erb within layouts/application (15.2ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.5ms)
Completed 200 OK in 40ms (Views: 34.9ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by CartsController#create as HTML
  [1m[35m (1.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:17.475863"], ["updated_at", "2018-07-02 00:25:17.475863"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 10ms (ActiveRecord: 2.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/new.html.erb within layouts/application (7.0ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.7ms)
Completed 200 OK in 22ms (Views: 19.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:25:17.541985"], ["updated_at", "2018-07-02 00:25:17.541985"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:25:17.561229"], ["updated_at", "2018-07-02 00:25:17.561229"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 29ms (ActiveRecord: 4.9ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.4ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 19:25:17 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (24.1ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:34:32.083113', '2018-07-02 00:34:32.083113', 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:34:32.083113', '2018-07-02 00:34:32.083113', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:34:32.089681', '2018-07-02 00:34:32.089681', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:34:32.089681', '2018-07-02 00:34:32.089681', 298486374)[0m
  [1m[36mFixture Insert (9.5ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:34:32.089681', '2018-07-02 00:34:32.089681', 207281424)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:34:32.095158', '2018-07-02 00:34:32.095158', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:34:32.095158', '2018-07-02 00:34:32.095158', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:34:32.099350', '2018-07-02 00:34:32.099350', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:34:32.099350', '2018-07-02 00:34:32.099350', 298486374, 980190962, 207281424)[0m
  [1m[35m (19.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:35:31.825822', '2018-07-02 00:35:31.825822', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:35:31.825822', '2018-07-02 00:35:31.825822', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:35:31.832242', '2018-07-02 00:35:31.832242', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:35:31.832242', '2018-07-02 00:35:31.832242', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:35:31.832242', '2018-07-02 00:35:31.832242', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:35:31.837805', '2018-07-02 00:35:31.837805', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:35:31.837805', '2018-07-02 00:35:31.837805', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:35:31.842045', '2018-07-02 00:35:31.842045', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:35:31.842045', '2018-07-02 00:35:31.842045', 298486374, 980190962, 207281424)[0m
  [1m[35m (26.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:38:29.567320', '2018-07-02 00:38:29.567320', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:38:29.567320', '2018-07-02 00:38:29.567320', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:38:29.573979', '2018-07-02 00:38:29.573979', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:38:29.573979', '2018-07-02 00:38:29.573979', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:38:29.573979', '2018-07-02 00:38:29.573979', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:38:29.580376', '2018-07-02 00:38:29.580376', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:38:29.580376', '2018-07-02 00:38:29.580376', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:38:29.585541', '2018-07-02 00:38:29.585541', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:38:29.585541', '2018-07-02 00:38:29.585541', 298486374, 980190962, 207281424)[0m
  [1m[35m (32.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:29.655986"], ["updated_at", "2018-07-02 00:38:29.655986"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (7.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:38:29.757187"], ["updated_at", "2018-07-02 00:38:29.757187"], ["price", 49.5]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 00:38:29.778360"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:29.791751"], ["updated_at", "2018-07-02 00:38:29.791751"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:38:29.808234"], ["updated_at", "2018-07-02 00:38:29.808234"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 00:38:29.819877"], ["updated_at", "2018-07-02 00:38:29.819877"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (6.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:38:30 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 29ms (ActiveRecord: 1.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 19:38:30 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (15.4ms)
  Rendered line_items/edit.html.erb within layouts/application (19.6ms)
Completed 200 OK in 5672ms (Views: 5667.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:38:35 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 16ms (ActiveRecord: 1.9ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:38:35 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:35.992689"], ["updated_at", "2018-07-02 00:38:35.992689"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:38:36.008305"], ["updated_at", "2018-07-02 00:38:36.008305"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (6.0ms)
  Rendered carts/_cart.html.erb (16.1ms)
  Rendered line_items/create.js.erb (19.5ms)
Completed 200 OK in 47ms (Views: 22.2ms | ActiveRecord: 3.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (12.4ms)
Completed 200 OK in 20ms (Views: 16.3ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.2ms)
  Rendered line_items/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 14ms (Views: 11.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (9.0ms)
Completed 200 OK in 43ms (Views: 13.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:36.169298"], ["updated_at", "2018-07-02 00:38:36.169298"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:38:36.183176"], ["updated_at", "2018-07-02 00:38:36.183176"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.9ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.1ms)
  Rendered carts/_cart.html.erb (12.5ms)
Completed 200 OK in 45ms (Views: 37.3ms | ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.4ms)
  Rendered carts/new.html.erb within layouts/application (6.3ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.5ms)
Completed 200 OK in 21ms (Views: 18.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (9.0ms)
  Rendered carts/show.html.erb within layouts/application (10.7ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.2ms)
Completed 200 OK in 24ms (Views: 19.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.1ms)
  Rendered carts/edit.html.erb within layouts/application (4.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (8.4ms)
Completed 200 OK in 25ms (Views: 20.0ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (4.8ms)
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:36.413790"], ["updated_at", "2018-07-02 00:38:36.413790"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:36.439597"], ["updated_at", "2018-07-02 00:38:36.439597"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:38:36.453579"], ["updated_at", "2018-07-02 00:38:36.453579"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:36.494603"], ["updated_at", "2018-07-02 00:38:36.494603"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.1ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
Completed 200 OK in 33ms (Views: 24.6ms | ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:36.595503"], ["updated_at", "2018-07-02 00:38:36.595503"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 17ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 15ms (Views: 12.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:36.701577"], ["updated_at", "2018-07-02 00:38:36.701577"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 00:38:36.710221"], ["updated_at", "2018-07-02 00:38:36.710221"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 35ms (ActiveRecord: 4.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (13.3ms)
  Rendered orders/edit.html.erb within layouts/application (16.6ms)
Completed 200 OK in 26ms (Views: 21.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:38:36.789271"], ["updated_at", "2018-07-02 00:38:36.789271"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:38:36.803405"], ["updated_at", "2018-07-02 00:38:36.803405"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.9ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.1ms)
  Rendered orders/new.html.erb within layouts/application (6.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.5ms)
  Rendered carts/_cart.html.erb (8.1ms)
Completed 200 OK in 31ms (Views: 21.9ms | ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (3.6ms)
Completed 200 OK in 38ms (Views: 10.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 00:38:36.921932"], ["updated_at", "2018-07-02 00:38:36.921932"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 19:38:36 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (8.6ms)
  Rendered products/new.html.erb within layouts/application (13.8ms)
Completed 200 OK in 51ms (Views: 23.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 19:38:37 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 19:38:37 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (5.9ms)
  Rendered products/edit.html.erb within layouts/application (8.0ms)
Completed 200 OK in 18ms (Views: 13.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 19:38:37 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (3.5ms)
Completed 200 OK in 35ms (Views: 10.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 19:38:37 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 00:38:37.164009"], ["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (13.5ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 41ms (ActiveRecord: 3.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 19:38:37 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 19:38:37 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (13.5ms)
Completed 200 OK in 21ms (Views: 18.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:44:45.501026', '2018-07-02 00:44:45.501026', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:44:45.501026', '2018-07-02 00:44:45.501026', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:44:45.507571', '2018-07-02 00:44:45.507571', 980190962)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:44:45.507571', '2018-07-02 00:44:45.507571', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:44:45.507571', '2018-07-02 00:44:45.507571', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:44:45.513262', '2018-07-02 00:44:45.513262', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:44:45.513262', '2018-07-02 00:44:45.513262', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:44:45.518028', '2018-07-02 00:44:45.518028', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:44:45.518028', '2018-07-02 00:44:45.518028', 298486374, 980190962, 207281424)[0m
  [1m[35m (41.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (30.6ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (106.2ms)
OrderMailer#shipped: processed outbound mail in 129.9ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (5.0ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (10.6ms)
OrderMailer#received: processed outbound mail in 25.5ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 00:56:12.033592', '2018-07-02 00:56:12.033592', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 00:56:12.033592', '2018-07-02 00:56:12.033592', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:56:12.041462', '2018-07-02 00:56:12.041462', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 00:56:12.041462', '2018-07-02 00:56:12.041462', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 00:56:12.041462', '2018-07-02 00:56:12.041462', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:56:12.047170', '2018-07-02 00:56:12.047170', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 00:56:12.047170', '2018-07-02 00:56:12.047170', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 00:56:12.051329', '2018-07-02 00:56:12.051329', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 00:56:12.051329', '2018-07-02 00:56:12.051329', 298486374, 980190962, 207281424)[0m
  [1m[35m (6.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 19:56:12 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:56:12.410089"], ["updated_at", "2018-07-02 00:56:12.410089"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (6386.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (7.4ms)
Completed 200 OK in 6468ms (Views: 6422.3ms | ActiveRecord: 3.0ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 19:56:18 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 00:56:18.905301"], ["updated_at", "2018-07-02 00:56:18.905301"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.5ms)
  Rendered carts/_cart.html.erb (12.0ms)
  Rendered line_items/create.js.erb (15.1ms)
Completed 200 OK in 67ms (Views: 20.3ms | ActiveRecord: 3.2ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 19:56:18 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (24.4ms)
  Rendered orders/new.html.erb within layouts/application (27.5ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.2ms)
  Rendered carts/_cart.html.erb (11.1ms)
Completed 200 OK in 74ms (Views: 48.7ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 19:56:19 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 00:56:19.052118"], ["updated_at", "2018-07-02 00:56:19.052118"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 00:56:19.056141"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] Performing ChargeOrderJob (Job ID: fae04ff1-03fa-4b07-9038-07cfc37382c0) from Test(default) with arguments: #<GlobalID:0x00000008864450 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] Processing check: /
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] Done
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3] Performing ActionMailer::DeliveryJob (Job ID: de727dd2-14e3-4e3c-a1d5-066196101ec3) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000088c66a0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3]   [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3]   Rendered collection of line_items/_line_item.text.erb [1 times] (3.9ms)
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3]   Rendered order_mailer/received.text.erb within layouts/mailer (10.9ms)
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3] OrderMailer#received: processed outbound mail in 101.9ms
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3] Sent mail to dave@example.com (15.9ms)
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3] Date: Sun, 01 Jul 2018 19:56:19 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3978333a850_2e6bc2cf4018752@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] [ActionMailer::DeliveryJob] [de727dd2-14e3-4e3c-a1d5-066196101ec3] Performed ActionMailer::DeliveryJob (Job ID: de727dd2-14e3-4e3c-a1d5-066196101ec3) from Test(mailers) in 119.65ms
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] Enqueued ActionMailer::DeliveryJob (Job ID: de727dd2-14e3-4e3c-a1d5-066196101ec3) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008864450 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [fae04ff1-03fa-4b07-9038-07cfc37382c0] Performed ChargeOrderJob (Job ID: fae04ff1-03fa-4b07-9038-07cfc37382c0) from Test(default) in 140.65ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: fae04ff1-03fa-4b07-9038-07cfc37382c0) to Test(default) with arguments: #<GlobalID:0x0000000882c7f8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 211ms (ActiveRecord: 5.0ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 19:56:19 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 00:56:19.259513"], ["updated_at", "2018-07-02 00:56:19.259513"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.8ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.7ms)
Completed 200 OK in 45ms (Views: 35.4ms | ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (1.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:08:26.506680', '2018-07-02 01:08:26.506680', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:08:26.506680', '2018-07-02 01:08:26.506680', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:08:26.514041', '2018-07-02 01:08:26.514041', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:08:26.514041', '2018-07-02 01:08:26.514041', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:08:26.514041', '2018-07-02 01:08:26.514041', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:08:26.519613', '2018-07-02 01:08:26.519613', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:08:26.519613', '2018-07-02 01:08:26.519613', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:08:26.524360', '2018-07-02 01:08:26.524360', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:08:26.524360', '2018-07-02 01:08:26.524360', 298486374, 980190962, 207281424)[0m
  [1m[35m (28.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:08:26 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:08:26.783371"], ["updated_at", "2018-07-02 01:08:26.783371"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (5307.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (7.3ms)
Completed 200 OK in 5377ms (Views: 5343.0ms | ActiveRecord: 2.8ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:08:32.198265"], ["updated_at", "2018-07-02 01:08:32.198265"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.4ms)
  Rendered carts/_cart.html.erb (11.2ms)
  Rendered line_items/create.js.erb (14.2ms)
Completed 200 OK in 66ms (Views: 17.6ms | ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (19.9ms)
  Rendered orders/new.html.erb within layouts/application (22.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.2ms)
  Rendered carts/_cart.html.erb (10.9ms)
Completed 200 OK in 67ms (Views: 42.2ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:08:32.331867"], ["updated_at", "2018-07-02 01:08:32.331867"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:08:32.335899"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] Performing ChargeOrderJob (Job ID: 4517838c-aa05-40e1-aa79-349c901c00d6) from Test(default) with arguments: #<GlobalID:0x00000007f1f4a8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] Processing check: /
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] Done
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137] Performing ActionMailer::DeliveryJob (Job ID: c25d2984-37f4-4c0e-837b-307a06166137) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007ef2700 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137]   [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137]   Rendered collection of line_items/_line_item.text.erb [1 times] (4.0ms)
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137]   Rendered order_mailer/received.text.erb within layouts/mailer (10.8ms)
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137] OrderMailer#received: processed outbound mail in 69.5ms
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137] Sent mail to dave@example.com (8.9ms)
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137] Date: Sun, 01 Jul 2018 20:08:32 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b397b106d197_30221272f44458ad@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] [ActionMailer::DeliveryJob] [c25d2984-37f4-4c0e-837b-307a06166137] Performed ActionMailer::DeliveryJob (Job ID: c25d2984-37f4-4c0e-837b-307a06166137) from Test(mailers) in 80.25ms
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] Enqueued ActionMailer::DeliveryJob (Job ID: c25d2984-37f4-4c0e-837b-307a06166137) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007f1f4a8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4517838c-aa05-40e1-aa79-349c901c00d6] Performed ChargeOrderJob (Job ID: 4517838c-aa05-40e1-aa79-349c901c00d6) from Test(default) in 95.7ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 4517838c-aa05-40e1-aa79-349c901c00d6) to Test(default) with arguments: #<GlobalID:0x00000007f2be38 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 135ms (ActiveRecord: 5.2ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:08:32.463930"], ["updated_at", "2018-07-02 01:08:32.463930"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.7ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.5ms)
Completed 200 OK in 44ms (Views: 34.3ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:08:32.542567"], ["updated_at", "2018-07-02 01:08:32.542567"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.3ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.8ms)
Completed 200 OK in 32ms (Views: 23.9ms | ActiveRecord: 2.5ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:08:32.593386"], ["updated_at", "2018-07-02 01:08:32.593386"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (6.8ms)
  Rendered line_items/create.js.erb (7.7ms)
Completed 200 OK in 26ms (Views: 8.8ms | ActiveRecord: 3.1ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.4ms)
  Rendered orders/new.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (8.4ms)
Completed 200 OK in 29ms (Views: 21.4ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:08:32.669004"], ["updated_at", "2018-07-02 01:08:32.669004"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:08:32.672840"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] Performing ChargeOrderJob (Job ID: 9f0a98bd-9c90-4767-93ac-2c51338f5a9e) from Test(default) with arguments: #<GlobalID:0x000000077bfb68 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] Processing check: /
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] Done
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427] Performing ActionMailer::DeliveryJob (Job ID: c7a2372c-e011-4e1e-a915-3f9083e10427) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007784018 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427]   [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.6ms)
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427]   Rendered order_mailer/received.text.erb within layouts/mailer (6.1ms)
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427] OrderMailer#received: processed outbound mail in 9.2ms
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427] Sent mail to dave@example.com (4.5ms)
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427] Date: Sun, 01 Jul 2018 20:08:32 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b397b10acc27_30221272f44459f@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] [ActionMailer::DeliveryJob] [c7a2372c-e011-4e1e-a915-3f9083e10427] Performed ActionMailer::DeliveryJob (Job ID: c7a2372c-e011-4e1e-a915-3f9083e10427) from Test(mailers) in 15.37ms
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] Enqueued ActionMailer::DeliveryJob (Job ID: c7a2372c-e011-4e1e-a915-3f9083e10427) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000077bfb68 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [9f0a98bd-9c90-4767-93ac-2c51338f5a9e] Performed ChargeOrderJob (Job ID: 9f0a98bd-9c90-4767-93ac-2c51338f5a9e) from Test(default) in 20.81ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 9f0a98bd-9c90-4767-93ac-2c51338f5a9e) to Test(default) with arguments: #<GlobalID:0x000000077efc78 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 54ms (ActiveRecord: 4.8ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:08:32.722168"], ["updated_at", "2018-07-02 01:08:32.722168"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.3ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.0ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.7ms)
Completed 200 OK in 41ms (Views: 30.6ms | ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:08:32.796798"], ["updated_at", "2018-07-02 01:08:32.796798"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:08:32.810326"], ["updated_at", "2018-07-02 01:08:32.810326"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (7.4ms)
  Rendered line_items/create.js.erb (8.5ms)
Completed 200 OK in 31ms (Views: 9.6ms | ActiveRecord: 4.0ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:08:32.833999"], ["updated_at", "2018-07-02 01:08:32.833999"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 01:08:32.846913"], ["updated_at", "2018-07-02 01:08:32.846913"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (6.7ms)
  Rendered line_items/create.js.erb (7.7ms)
Completed 200 OK in 29ms (Views: 8.6ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.4ms)
  Rendered orders/new.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (8.9ms)
Completed 200 OK in 30ms (Views: 22.0ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:08:32 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:08:32.923514"], ["updated_at", "2018-07-02 01:08:32.923514"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:08:32.927459"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] Performing ChargeOrderJob (Job ID: 4e78d565-ee7e-40c2-80fe-05ea060e24eb) from Test(default) with arguments: #<GlobalID:0x00000004d95270 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] Processing check: /
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] Done
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26] Performing ActionMailer::DeliveryJob (Job ID: 4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000004800530 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26]   Rendered order_mailer/received.text.erb within layouts/mailer (6.3ms)
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26] OrderMailer#received: processed outbound mail in 9.4ms
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26] Sent mail to dave@example.com (50.8ms)
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26] Date: Sun, 01 Jul 2018 20:08:32 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b397b10eaca0_30221272f444604@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] [ActionMailer::DeliveryJob] [4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26] Performed ActionMailer::DeliveryJob (Job ID: 4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26) from Test(mailers) in 61.92ms
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] Enqueued ActionMailer::DeliveryJob (Job ID: 4a7f848d-f719-4b32-a8b8-e0ca6e8d2f26) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000004d95270 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4e78d565-ee7e-40c2-80fe-05ea060e24eb] Performed ChargeOrderJob (Job ID: 4e78d565-ee7e-40c2-80fe-05ea060e24eb) from Test(default) in 67.46ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 4e78d565-ee7e-40c2-80fe-05ea060e24eb) to Test(default) with arguments: #<GlobalID:0x00000004ed7c78 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 99ms (ActiveRecord: 4.8ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:08:33 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:08:33.023144"], ["updated_at", "2018-07-02 01:08:33.023144"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.0ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.1ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.8ms)
Completed 200 OK in 51ms (Views: 39.5ms | ActiveRecord: 4.0ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:08:33 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.4ms)
  Rendered orders/new.html.erb within layouts/application (6.1ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (9.1ms)
Completed 200 OK in 31ms (Views: 22.5ms | ActiveRecord: 2.1ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:08:33 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 01:08:33.155488"], ["updated_at", "2018-07-02 01:08:33.155488"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 01:08:33.159537"], ["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [13556626-1a66-4d78-81fd-0a6e90b5f9ae] Performing ChargeOrderJob (Job ID: 13556626-1a66-4d78-81fd-0a6e90b5f9ae) from Test(default) with arguments: #<GlobalID:0x0000000857e8f8 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [13556626-1a66-4d78-81fd-0a6e90b5f9ae] Error performing ChargeOrderJob (Job ID: 13556626-1a66-4d78-81fd-0a6e90b5f9ae) from Test(default) in 3.18ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:38:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:33:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 40ms (ActiveRecord: 4.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "carts"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "carts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "line_items"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "line_items" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer, "cart_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "quantity" integer DEFAULT 1, "price" decimal, "order_id" integer)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE  INDEX "index_line_items_on_cart_id" ON "line_items" ("cart_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX "index_line_items_on_product_id" ON "line_items" ("product_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "orders"[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "address" text, "email" varchar, "pay_type" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "products"[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar, "description" text, "image_url" varchar, "price" decimal(8,2), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users"[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "password_digest" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (4.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180702011130)[0m
  [1m[35m (4.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180701194723),
(20180701084959),
(20180701073008),
(20180701194705),
(20180701090620),
(20180701084733),
(20180701185821),
(20180701090305);

[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "test"], ["created_at", "2018-07-02 01:20:50.068820"], ["updated_at", "2018-07-02 01:20:50.068820"]]
  [1m[35m (3.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:20:50.506433', '2018-07-02 01:20:50.506433', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:20:50.506433', '2018-07-02 01:20:50.506433', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:20:50.514158', '2018-07-02 01:20:50.514158', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:20:50.514158', '2018-07-02 01:20:50.514158', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:20:50.514158', '2018-07-02 01:20:50.514158', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$RuVZuewtIW4vl355pzmDruojGYDRpcMfU7PsbWfkDC7Y.BvEK3ZMW', '2018-07-02 01:20:50.520344', '2018-07-02 01:20:50.520344', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$r8UUUGvWY8UXZX6g8YvTDeDSmI9/A3TiQwoU7TGAWbTKGjz89p6sy', '2018-07-02 01:20:50.520344', '2018-07-02 01:20:50.520344', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:20:50.546952', '2018-07-02 01:20:50.546952', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:20:50.546952', '2018-07-02 01:20:50.546952', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:20:50.551463', '2018-07-02 01:20:50.551463', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:20:50.551463', '2018-07-02 01:20:50.551463', 298486374, 980190962, 207281424)[0m
  [1m[35m (15.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 20:20:50 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 44ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 20:20:50 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 01:20:50.899362"], ["updated_at", "2018-07-02 01:20:50.899362"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 17ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 20:20:50 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (24.6ms)
  Rendered products/new.html.erb within layouts/application (30.0ms)
Completed 200 OK in 5726ms (Views: 5674.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 20:20:56 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 01:20:56.673659"], ["id", 980190962]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (24.8ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 75ms (ActiveRecord: 2.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 20:20:56 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (13.6ms)
Completed 200 OK in 22ms (Views: 18.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 20:20:56 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 20:20:56 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.2ms)
  Rendered products/edit.html.erb within layouts/application (12.9ms)
Completed 200 OK in 45ms (Views: 19.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 20:20:56 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 12ms (Views: 7.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:56 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:56.931101"], ["updated_at", "2018-07-02 01:20:56.931101"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:56.953389"], ["updated_at", "2018-07-02 01:20:56.953389"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 38ms (ActiveRecord: 4.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 20:20:56 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.9ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.9ms)
  Rendered carts/_cart.html.erb (14.8ms)
Completed 200 OK in 45ms (Views: 38.2ms | ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.2ms)
Completed 200 OK in 21ms (Views: 14.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.6ms)
  Rendered line_items/edit.html.erb within layouts/application (10.4ms)
Completed 200 OK in 20ms (Views: 15.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:57.126665"], ["updated_at", "2018-07-02 01:20:57.126665"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:57.140555"], ["updated_at", "2018-07-02 01:20:57.140555"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.3ms)
  Rendered carts/_cart.html.erb (10.7ms)
  Rendered line_items/create.js.erb (13.8ms)
Completed 200 OK in 40ms (Views: 16.5ms | ActiveRecord: 3.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 44ms (Views: 18.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.4ms)
  Rendered line_items/new.html.erb within layouts/application (12.4ms)
Completed 200 OK in 25ms (Views: 21.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$Fhrb4pw/9MbJKF2z4f4zwuoYy6AYEzfek6NIHT74MPtOmb7lev1/O"], ["created_at", "2018-07-02 01:20:57.325472"], ["updated_at", "2018-07-02 01:20:57.325472"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 14ms (ActiveRecord: 1.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by UsersController#new as HTML
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (30.9ms)
  Rendered users/new.html.erb within layouts/application (34.0ms)
Completed 200 OK in 46ms (Views: 42.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by UsersController#index as HTML
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 13ms (Views: 9.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (3.4ms)
  Rendered users/edit.html.erb within layouts/application (5.7ms)
Completed 200 OK in 16ms (Views: 11.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.0ms)
Completed 200 OK in 12ms (Views: 7.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$ilXtbQDcDp7AjvpPMRKlG.JXbprcE39MLHx2/ie3NZ15wbDrtsZ7y"], ["updated_at", "2018-07-02 01:20:57.514460"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 17ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:57.542697"], ["updated_at", "2018-07-02 01:20:57.542697"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.6ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.7ms)
Completed 200 OK in 37ms (Views: 26.5ms | ActiveRecord: 2.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:57.598285"], ["updated_at", "2018-07-02 01:20:57.598285"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.7ms)
  Rendered line_items/create.js.erb (7.7ms)
Completed 200 OK in 27ms (Views: 8.8ms | ActiveRecord: 3.2ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (11.5ms)
  Rendered orders/new.html.erb within layouts/application (15.5ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 124ms (Views: 33.8ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:20:57.807562"], ["updated_at", "2018-07-02 01:20:57.807562"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:20:57.811611"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.6ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] Performing ChargeOrderJob (Job ID: 0ae61008-f3b3-4259-9d12-2e3d79959693) from Test(default) with arguments: #<GlobalID:0x00000009486b48 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] Processing check: /
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] Done
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34] Performing ActionMailer::DeliveryJob (Job ID: 4cd6c90c-6bdc-4ccc-90e6-d9c375609d34) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000094414d0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34]   [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34]   Rendered collection of line_items/_line_item.text.erb [1 times] (3.8ms)
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34]   Rendered order_mailer/received.text.erb within layouts/mailer (12.9ms)
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34] OrderMailer#received: processed outbound mail in 98.9ms
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34] Sent mail to dave@example.com (12.2ms)
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34] Date: Sun, 01 Jul 2018 20:20:57 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b397df9ef8ec_33e810acf4883a3@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] [ActionMailer::DeliveryJob] [4cd6c90c-6bdc-4ccc-90e6-d9c375609d34] Performed ActionMailer::DeliveryJob (Job ID: 4cd6c90c-6bdc-4ccc-90e6-d9c375609d34) from Test(mailers) in 113.06ms
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] Enqueued ActionMailer::DeliveryJob (Job ID: 4cd6c90c-6bdc-4ccc-90e6-d9c375609d34) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000009486b48 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [0ae61008-f3b3-4259-9d12-2e3d79959693] Performed ChargeOrderJob (Job ID: 0ae61008-f3b3-4259-9d12-2e3d79959693) from Test(default) in 130.78ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 0ae61008-f3b3-4259-9d12-2e3d79959693) to Test(default) with arguments: #<GlobalID:0x000000094a8068 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 195ms (ActiveRecord: 5.5ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:20:57 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:57.999484"], ["updated_at", "2018-07-02 01:20:57.999484"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.3ms)
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.7ms)
Completed 200 OK in 45ms (Views: 34.9ms | ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.153892"], ["updated_at", "2018-07-02 01:20:58.153892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 15ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.180728"], ["updated_at", "2018-07-02 01:20:58.180728"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 01:20:58.190757"], ["updated_at", "2018-07-02 01:20:58.190757"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a) to Async(default) with arguments: #<GlobalID:0x000000090cba58 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 28ms (ActiveRecord: 4.1ms)
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a] Performing ChargeOrderJob (Job ID: 1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a) from Async(default) with arguments: #<GlobalID:0x00000009095868 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a] Processing check: /
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ChargeOrderJob] [1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a] Done
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
[ActiveJob] [ChargeOrderJob] [1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a] Enqueued ActionMailer::DeliveryJob (Job ID: 9ee0e316-0d95-4e33-a52d-52c1efc315d5) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000009095868 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a] Performed ChargeOrderJob (Job ID: 1fa98fe6-ea79-4e25-bc01-3b542cd5fa9a) from Async(default) in 15.38ms
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (7.8ms)
Completed 200 OK in 40ms (Views: 13.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.8ms)
  Rendered orders/edit.html.erb within layouts/application (8.3ms)
Completed 200 OK in 28ms (Views: 22.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 11ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.7ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 16ms (ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 12ms (Views: 8.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.427761"], ["updated_at", "2018-07-02 01:20:58.427761"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:58.442081"], ["updated_at", "2018-07-02 01:20:58.442081"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 3.9ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.4ms)
  Rendered orders/new.html.erb within layouts/application (6.2ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.1ms)
  Rendered carts/_cart.html.erb (9.6ms)
Completed 200 OK in 31ms (Views: 22.8ms | ActiveRecord: 1.7ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.500575"], ["updated_at", "2018-07-02 01:20:58.500575"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.3ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.7ms)
Completed 200 OK in 33ms (Views: 23.5ms | ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.5ms)
  Rendered carts/new.html.erb within layouts/application (7.0ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.6ms)
Completed 200 OK in 24ms (Views: 20.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.1ms)
  Rendered carts/edit.html.erb within layouts/application (4.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.0ms)
Completed 200 OK in 27ms (Views: 21.0ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 13ms (Views: 10.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.676586"], ["updated_at", "2018-07-02 01:20:58.676586"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.703978"], ["updated_at", "2018-07-02 01:20:58.703978"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:58.718185"], ["updated_at", "2018-07-02 01:20:58.718185"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 4.1ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (9.4ms)
  Rendered carts/show.html.erb within layouts/application (11.5ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.4ms)
Completed 200 OK in 47ms (Views: 20.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (6.3ms)
OrderMailer#received: processed outbound mail in 9.6ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.0ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (10.8ms)
OrderMailer#shipped: processed outbound mail in 45.9ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.920701"], ["updated_at", "2018-07-02 01:20:58.920701"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:58.934791"], ["updated_at", "2018-07-02 01:20:58.934791"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (6.8ms)
  Rendered line_items/create.js.erb (7.9ms)
Completed 200 OK in 31ms (Views: 9.1ms | ActiveRecord: 4.0ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:58.958597"], ["updated_at", "2018-07-02 01:20:58.958597"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 01:20:58.971485"], ["updated_at", "2018-07-02 01:20:58.971485"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.5ms)
  Rendered line_items/create.js.erb (7.4ms)
Completed 200 OK in 28ms (Views: 8.3ms | ActiveRecord: 3.2ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:20:58 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.3ms)
  Rendered orders/new.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (8.4ms)
Completed 200 OK in 29ms (Views: 21.1ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:20:59.045927"], ["updated_at", "2018-07-02 01:20:59.045927"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:20:59.049802"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] Performing ChargeOrderJob (Job ID: 4febdc56-4512-4b70-a586-1e12667cc382) from Test(default) with arguments: #<GlobalID:0x0000000851ad80 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] Processing check: /
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] Done
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26] Performing ActionMailer::DeliveryJob (Job ID: d12937fe-3077-4b90-bb1b-ba5cd71ead26) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008512428 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26]   Rendered order_mailer/received.text.erb within layouts/mailer (6.2ms)
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26] OrderMailer#received: processed outbound mail in 9.3ms
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26] Sent mail to dave@example.com (4.7ms)
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26] Date: Sun, 01 Jul 2018 20:20:59 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b397dfb143d4_33e810acf4884c9@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] [ActionMailer::DeliveryJob] [d12937fe-3077-4b90-bb1b-ba5cd71ead26] Performed ActionMailer::DeliveryJob (Job ID: d12937fe-3077-4b90-bb1b-ba5cd71ead26) from Test(mailers) in 15.68ms
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] Enqueued ActionMailer::DeliveryJob (Job ID: d12937fe-3077-4b90-bb1b-ba5cd71ead26) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000851ad80 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4febdc56-4512-4b70-a586-1e12667cc382] Performed ChargeOrderJob (Job ID: 4febdc56-4512-4b70-a586-1e12667cc382) from Test(default) in 20.98ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 4febdc56-4512-4b70-a586-1e12667cc382) to Test(default) with arguments: #<GlobalID:0x000000085239f8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 52ms (ActiveRecord: 4.7ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:59.099631"], ["updated_at", "2018-07-02 01:20:59.099631"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.7ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.5ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.5ms)
Completed 200 OK in 41ms (Views: 29.7ms | ActiveRecord: 3.6ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.1ms)
  Rendered orders/new.html.erb within layouts/application (5.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (8.3ms)
Completed 200 OK in 28ms (Views: 20.6ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 01:20:59.213290"], ["updated_at", "2018-07-02 01:20:59.213290"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 01:20:59.217161"], ["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [f2a0a53a-57cd-45eb-a87a-3953d3737fce] Performing ChargeOrderJob (Job ID: f2a0a53a-57cd-45eb-a87a-3953d3737fce) from Test(default) with arguments: #<GlobalID:0x0000000857a618 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [f2a0a53a-57cd-45eb-a87a-3953d3737fce] Error performing ChargeOrderJob (Job ID: f2a0a53a-57cd-45eb-a87a-3953d3737fce) from Test(default) in 3.07ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:38:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:33:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 4.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:59.256344"], ["updated_at", "2018-07-02 01:20:59.256344"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
Completed 200 OK in 33ms (Views: 24.7ms | ActiveRecord: 2.4ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:59.320962"], ["updated_at", "2018-07-02 01:20:59.320962"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.2ms)
  Rendered line_items/create.js.erb (8.3ms)
Completed 200 OK in 34ms (Views: 9.3ms | ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.5ms)
  Rendered orders/new.html.erb within layouts/application (6.4ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.9ms)
  Rendered carts/_cart.html.erb (10.5ms)
Completed 200 OK in 34ms (Views: 24.3ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:20:59.408225"], ["updated_at", "2018-07-02 01:20:59.408225"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:20:59.412430"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] Performing ChargeOrderJob (Job ID: 7ad04db3-d540-4e92-852a-48004c55309b) from Test(default) with arguments: #<GlobalID:0x00000007f67eb0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] Processing check: /
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] Done
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8] Performing ActionMailer::DeliveryJob (Job ID: e68aadb1-2784-4114-90aa-933c230072c8) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008254a88 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8]   Rendered order_mailer/received.text.erb within layouts/mailer (6.5ms)
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8] OrderMailer#received: processed outbound mail in 9.6ms
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8] Sent mail to dave@example.com (4.4ms)
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8] Date: Sun, 01 Jul 2018 20:20:59 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b397dfb6d1df_33e810acf48852b@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] [ActionMailer::DeliveryJob] [e68aadb1-2784-4114-90aa-933c230072c8] Performed ActionMailer::DeliveryJob (Job ID: e68aadb1-2784-4114-90aa-933c230072c8) from Test(mailers) in 16.01ms
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] Enqueued ActionMailer::DeliveryJob (Job ID: e68aadb1-2784-4114-90aa-933c230072c8) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007f67eb0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [7ad04db3-d540-4e92-852a-48004c55309b] Performed ChargeOrderJob (Job ID: 7ad04db3-d540-4e92-852a-48004c55309b) from Test(default) in 21.75ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 7ad04db3-d540-4e92-852a-48004c55309b) to Test(default) with arguments: #<GlobalID:0x00000007f6cc58 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 56ms (ActiveRecord: 4.8ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:20:59 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:59.463955"], ["updated_at", "2018-07-02 01:20:59.463955"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.4ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.1ms)
Completed 200 OK in 43ms (Views: 32.2ms | ActiveRecord: 4.0ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:59.536530"], ["updated_at", "2018-07-02 01:20:59.536530"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:59.551977"], ["updated_at", "2018-07-02 01:20:59.551977"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:59.563000"], ["updated_at", "2018-07-02 01:20:59.563000"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:20:59.576830"], ["updated_at", "2018-07-02 01:20:59.576830"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:20:59.592253"], ["updated_at", "2018-07-02 01:20:59.592253"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 01:20:59.599952"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:42:27.802707', '2018-07-02 01:42:27.802707', 980190962)[0m
  [1m[36mFixture Insert (1.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:42:27.802707', '2018-07-02 01:42:27.802707', 298486374)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:42:27.809156', '2018-07-02 01:42:27.809156', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:42:27.809156', '2018-07-02 01:42:27.809156', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:42:27.809156', '2018-07-02 01:42:27.809156', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$Wu/SU3HitTxvHcdG4zkcwOcb8yWQKcGczCGxXqUlag3nGcC1sRl46', '2018-07-02 01:42:27.814573', '2018-07-02 01:42:27.814573', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$MaP48RM6qwHkYbRRt7L7e.Qbp302GkdOa8RrLfyvv5BUjJaAvh/W6', '2018-07-02 01:42:27.814573', '2018-07-02 01:42:27.814573', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:42:27.819318', '2018-07-02 01:42:27.819318', 980190962)[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:42:27.819318', '2018-07-02 01:42:27.819318', 298486374)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:42:27.823568', '2018-07-02 01:42:27.823568', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:42:27.823568', '2018-07-02 01:42:27.823568', 298486374, 980190962, 207281424)[0m
  [1m[35m (6.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:42:28 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 25ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:42:28 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (106.4ms)
  Rendered carts/_cart.html.erb (179.5ms)
  Rendered carts/show.html.erb within layouts/application (192.1ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 7701ms (Views: 7694.3ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 20:42:35 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.8ms)
  Rendered carts/edit.html.erb within layouts/application (7.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.3ms)
  Rendered carts/_cart.html.erb (9.7ms)
Completed 200 OK in 34ms (Views: 27.0ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:36.009245"], ["updated_at", "2018-07-02 01:42:36.009245"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 11ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:36.070182"], ["updated_at", "2018-07-02 01:42:36.070182"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (5.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:36.086296"], ["updated_at", "2018-07-02 01:42:36.086296"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 29ms (ActiveRecord: 8.2ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.3ms)
Completed 200 OK in 14ms (Views: 10.4ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.0ms)
  Rendered carts/new.html.erb within layouts/application (4.4ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.8ms)
Completed 200 OK in 20ms (Views: 16.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:36.204843"], ["updated_at", "2018-07-02 01:42:36.204843"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (22.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.2ms)
Completed 200 OK in 49ms (Views: 36.3ms | ActiveRecord: 2.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 25ms (ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (6.3ms)
Completed 200 OK in 17ms (Views: 12.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:36.376031"], ["updated_at", "2018-07-02 01:42:36.376031"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:36.393070"], ["updated_at", "2018-07-02 01:42:36.393070"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 3.7ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (27.7ms)
  Rendered orders/new.html.erb within layouts/application (30.9ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.7ms)
  Rendered carts/_cart.html.erb (10.5ms)
Completed 200 OK in 84ms (Views: 49.6ms | ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (9.7ms)
  Rendered orders/edit.html.erb within layouts/application (13.4ms)
Completed 200 OK in 46ms (Views: 19.3ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 12ms (Views: 7.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:36.609272"], ["updated_at", "2018-07-02 01:42:36.609272"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:36.636076"], ["updated_at", "2018-07-02 01:42:36.636076"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 01:42:36.645725"], ["updated_at", "2018-07-02 01:42:36.645725"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] Enqueued ChargeOrderJob (Job ID: a2555e26-acf7-493e-b4d1-c82a20fb041f) to Async(default) with arguments: #<GlobalID:0x000000082d4e18 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [a2555e26-acf7-493e-b4d1-c82a20fb041f] Performing ChargeOrderJob (Job ID: a2555e26-acf7-493e-b4d1-c82a20fb041f) from Async(default) with arguments: #<GlobalID:0x000000082b3718 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
[ActiveJob] [ChargeOrderJob] [a2555e26-acf7-493e-b4d1-c82a20fb041f] Processing check: /
Completed 302 Found in 67ms (ActiveRecord: 4.2ms)
[ActiveJob] [ChargeOrderJob] [a2555e26-acf7-493e-b4d1-c82a20fb041f] Done
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [a2555e26-acf7-493e-b4d1-c82a20fb041f] Enqueued ActionMailer::DeliveryJob (Job ID: 8b8b32b6-1d8c-40c3-96e9-a243dfe0ef1a) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000082b3718 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [a2555e26-acf7-493e-b4d1-c82a20fb041f] Performed ChargeOrderJob (Job ID: a2555e26-acf7-493e-b4d1-c82a20fb041f) from Async(default) in 26.6ms
  [1m[36mOrder Load (1.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (17.2ms)
Completed 200 OK in 33ms (Views: 28.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (1.1ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 01:42:36.805635"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (14.3ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 73ms (ActiveRecord: 2.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 01:42:36.921763"], ["updated_at", "2018-07-02 01:42:36.921763"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 20:42:36 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (9.1ms)
  Rendered products/new.html.erb within layouts/application (12.6ms)
Completed 200 OK in 47ms (Views: 18.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.6ms)
Completed 200 OK in 13ms (Views: 8.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 9ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (6.4ms)
  Rendered products/edit.html.erb within layouts/application (8.8ms)
Completed 200 OK in 51ms (Views: 14.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:37.134698"], ["updated_at", "2018-07-02 01:42:37.134698"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:37.150308"], ["updated_at", "2018-07-02 01:42:37.150308"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.4ms)
  Rendered carts/_cart.html.erb (11.9ms)
  Rendered line_items/create.js.erb (15.4ms)
Completed 200 OK in 48ms (Views: 19.5ms | ActiveRecord: 3.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:37.189627"], ["updated_at", "2018-07-02 01:42:37.189627"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 01:42:37.204019"], ["updated_at", "2018-07-02 01:42:37.204019"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.9ms)
  Rendered line_items/create.js.erb (8.1ms)
Completed 200 OK in 31ms (Views: 9.2ms | ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.5ms)
  Rendered orders/new.html.erb within layouts/application (6.4ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.3ms)
  Rendered carts/_cart.html.erb (9.4ms)
Completed 200 OK in 33ms (Views: 24.6ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:42:37.287514"], ["updated_at", "2018-07-02 01:42:37.287514"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:42:37.291831"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] Performing ChargeOrderJob (Job ID: 1dfa8696-262d-4e4c-b623-1dd5faa27838) from Test(default) with arguments: #<GlobalID:0x00000006f911f8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] Processing check: /
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] Done
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f] Performing ActionMailer::DeliveryJob (Job ID: 3ff18c22-8b5f-424c-97bf-7f258551ce9f) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000006f326d0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f]   [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f]   [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f]   Rendered collection of line_items/_line_item.text.erb [1 times] (4.4ms)
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f]   Rendered order_mailer/received.text.erb within layouts/mailer (11.4ms)
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f] OrderMailer#received: processed outbound mail in 144.6ms
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f] Sent mail to dave@example.com (64.9ms)
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f] Date: Sun, 01 Jul 2018 20:42:37 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39830d72b3a_381ce7cf4848091@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] [ActionMailer::DeliveryJob] [3ff18c22-8b5f-424c-97bf-7f258551ce9f] Performed ActionMailer::DeliveryJob (Job ID: 3ff18c22-8b5f-424c-97bf-7f258551ce9f) from Test(mailers) in 212.18ms
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] Enqueued ActionMailer::DeliveryJob (Job ID: 3ff18c22-8b5f-424c-97bf-7f258551ce9f) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000006f911f8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [1dfa8696-262d-4e4c-b623-1dd5faa27838] Performed ChargeOrderJob (Job ID: 1dfa8696-262d-4e4c-b623-1dd5faa27838) from Test(default) in 219.23ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 1dfa8696-262d-4e4c-b623-1dd5faa27838) to Test(default) with arguments: #<GlobalID:0x00000006fbf378 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 254ms (ActiveRecord: 5.2ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:37.540879"], ["updated_at", "2018-07-02 01:42:37.540879"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.0ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (10.4ms)
Completed 200 OK in 69ms (Views: 58.2ms | ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.9ms)
  Rendered orders/new.html.erb within layouts/application (6.6ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.6ms)
  Rendered carts/_cart.html.erb (9.6ms)
Completed 200 OK in 31ms (Views: 23.1ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 01:42:37.695151"], ["updated_at", "2018-07-02 01:42:37.695151"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 01:42:37.699456"], ["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.3ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [6580218d-4aa6-4605-866b-0ae71941e0ba] Performing ChargeOrderJob (Job ID: 6580218d-4aa6-4605-866b-0ae71941e0ba) from Test(default) with arguments: #<GlobalID:0x00000008a5a4f8 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [6580218d-4aa6-4605-866b-0ae71941e0ba] Error performing ChargeOrderJob (Job ID: 6580218d-4aa6-4605-866b-0ae71941e0ba) from Test(default) in 3.16ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:38:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:33:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 37ms (ActiveRecord: 4.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:37.740721"], ["updated_at", "2018-07-02 01:42:37.740721"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.9ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.1ms)
Completed 200 OK in 34ms (Views: 25.3ms | ActiveRecord: 2.5ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:37.795109"], ["updated_at", "2018-07-02 01:42:37.795109"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.4ms)
  Rendered carts/_cart.html.erb (6.9ms)
  Rendered line_items/create.js.erb (7.9ms)
Completed 200 OK in 27ms (Views: 9.0ms | ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.5ms)
  Rendered orders/new.html.erb within layouts/application (6.1ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 29ms (Views: 21.5ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:42:37.872620"], ["updated_at", "2018-07-02 01:42:37.872620"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:42:37.876772"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.6ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] Performing ChargeOrderJob (Job ID: 52330d44-0e57-4afd-a23e-b8eb32c245a5) from Test(default) with arguments: #<GlobalID:0x000000088e1e28 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] Processing check: /
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] Done
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3] Performing ActionMailer::DeliveryJob (Job ID: b3bfcca0-b715-4959-92c6-44880d3f6fc3) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000088da3f8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3]   [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3]   Rendered collection of line_items/_line_item.text.erb [1 times] (3.0ms)
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3]   Rendered order_mailer/received.text.erb within layouts/mailer (6.4ms)
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3] OrderMailer#received: processed outbound mail in 9.4ms
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3] Sent mail to dave@example.com (4.6ms)
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3] Date: Sun, 01 Jul 2018 20:42:37 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39830dde433_381ce7cf4848154@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] [ActionMailer::DeliveryJob] [b3bfcca0-b715-4959-92c6-44880d3f6fc3] Performed ActionMailer::DeliveryJob (Job ID: b3bfcca0-b715-4959-92c6-44880d3f6fc3) from Test(mailers) in 15.71ms
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] Enqueued ActionMailer::DeliveryJob (Job ID: b3bfcca0-b715-4959-92c6-44880d3f6fc3) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000088e1e28 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [52330d44-0e57-4afd-a23e-b8eb32c245a5] Performed ChargeOrderJob (Job ID: 52330d44-0e57-4afd-a23e-b8eb32c245a5) from Test(default) in 21.24ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 52330d44-0e57-4afd-a23e-b8eb32c245a5) to Test(default) with arguments: #<GlobalID:0x000000088f33f8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 53ms (ActiveRecord: 5.1ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:42:37 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:37.932441"], ["updated_at", "2018-07-02 01:42:37.932441"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.1ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.6ms)
Completed 200 OK in 43ms (Views: 32.9ms | ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.5ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (6.8ms)
OrderMailer#received: processed outbound mail in 10.0ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.2ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (10.7ms)
OrderMailer#shipped: processed outbound mail in 55.1ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:38.088950"], ["updated_at", "2018-07-02 01:42:38.088950"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.6ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.6ms)
Completed 200 OK in 37ms (Views: 28.5ms | ActiveRecord: 2.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:38.145481"], ["updated_at", "2018-07-02 01:42:38.145481"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.7ms)
  Rendered line_items/create.js.erb (7.6ms)
Completed 200 OK in 27ms (Views: 8.7ms | ActiveRecord: 3.2ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.1ms)
  Rendered orders/new.html.erb within layouts/application (5.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 29ms (Views: 21.5ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:42:38.223493"], ["updated_at", "2018-07-02 01:42:38.223493"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:42:38.227377"], ["id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] Performing ChargeOrderJob (Job ID: 8cfedaec-b283-4a92-9cf4-849d48405d93) from Test(default) with arguments: #<GlobalID:0x00000008672b38 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] Processing check: /
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] Done
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926] Performing ActionMailer::DeliveryJob (Job ID: cd838afd-94ce-4adc-9933-f929e25ff926) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000866f5a0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926]   Rendered order_mailer/received.text.erb within layouts/mailer (6.4ms)
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926] OrderMailer#received: processed outbound mail in 9.8ms
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926] Sent mail to dave@example.com (4.9ms)
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926] Date: Sun, 01 Jul 2018 20:42:38 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39830e3fce5_381ce7cf484820@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] [ActionMailer::DeliveryJob] [cd838afd-94ce-4adc-9933-f929e25ff926] Performed ActionMailer::DeliveryJob (Job ID: cd838afd-94ce-4adc-9933-f929e25ff926) from Test(mailers) in 16.35ms
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] Enqueued ActionMailer::DeliveryJob (Job ID: cd838afd-94ce-4adc-9933-f929e25ff926) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008672b38 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [8cfedaec-b283-4a92-9cf4-849d48405d93] Performed ChargeOrderJob (Job ID: 8cfedaec-b283-4a92-9cf4-849d48405d93) from Test(default) in 21.68ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 8cfedaec-b283-4a92-9cf4-849d48405d93) to Test(default) with arguments: #<GlobalID:0x00000008677de0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 54ms (ActiveRecord: 5.0ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:38.277090"], ["updated_at", "2018-07-02 01:42:38.277090"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (4.0ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.0ms)
Completed 200 OK in 44ms (Views: 32.4ms | ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
Started GET "/admin" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by AdminController#index as HTML
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (2.3ms)
Completed 200 OK in 18ms (Views: 10.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_get_create
----------------------------------------------
Started GET "/sessions/create" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by SessionsController#create as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
SessionsControllerTest: test_should_get_destroy
-----------------------------------------------
Started GET "/sessions/destroy" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:42:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
Started GET "/login" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (6.8ms)
Completed 200 OK in 43ms (Views: 16.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$ehXfSesXHnuq4FMBJdiWUeUnAGCKKD9koN6JNSN5tkGhpj6wj5F/6"], ["created_at", "2018-07-02 01:42:39.115233"], ["updated_at", "2018-07-02 01:42:39.115233"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 16ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (8.5ms)
  Rendered users/edit.html.erb within layouts/application (12.3ms)
Completed 200 OK in 26ms (Views: 19.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by UsersController#index as HTML
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 14ms (Views: 10.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$7WA/Swod3xKXNaVdvMbvs.QIwO4S6gZlNVBKgRyCZ8rIZ7QAnKsY2"], ["updated_at", "2018-07-02 01:42:39.258147"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 15ms (ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by UsersController#new as HTML
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (4.2ms)
  Rendered users/new.html.erb within layouts/application (7.1ms)
Completed 200 OK in 43ms (Views: 13.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.2ms)
Completed 200 OK in 26ms (Views: 21.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.5ms)
  Rendered line_items/edit.html.erb within layouts/application (11.3ms)
Completed 200 OK in 45ms (Views: 17.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.1ms)
Completed 200 OK in 17ms (Views: 12.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:39.490374"], ["updated_at", "2018-07-02 01:42:39.490374"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:39.504607"], ["updated_at", "2018-07-02 01:42:39.504607"], ["price", 49.5]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 3.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.1ms)
  Rendered carts/_cart.html.erb (8.9ms)
Completed 200 OK in 36ms (Views: 30.5ms | ActiveRecord: 2.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.8ms)
  Rendered line_items/new.html.erb within layouts/application (10.1ms)
Completed 200 OK in 41ms (Views: 16.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:39.629151"], ["updated_at", "2018-07-02 01:42:39.629151"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:39.643648"], ["updated_at", "2018-07-02 01:42:39.643648"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.4ms)
  Rendered line_items/create.js.erb (8.4ms)
Completed 200 OK in 32ms (Views: 9.8ms | ActiveRecord: 3.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:42:39 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:39.718062"], ["updated_at", "2018-07-02 01:42:39.718062"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:39.734795"], ["updated_at", "2018-07-02 01:42:39.734795"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.4ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 01:42:39.743553"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:42:39.754652"], ["updated_at", "2018-07-02 01:42:39.754652"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:39.770979"], ["updated_at", "2018-07-02 01:42:39.770979"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 01:42:39.782079"], ["updated_at", "2018-07-02 01:42:39.782079"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:43:27.626533', '2018-07-02 01:43:27.626533', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:43:27.626533', '2018-07-02 01:43:27.626533', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:43:27.633509', '2018-07-02 01:43:27.633509', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:43:27.633509', '2018-07-02 01:43:27.633509', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:43:27.633509', '2018-07-02 01:43:27.633509', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$AqPXW9tfdz2CmrdSGBLdue9ovu1cSPNriy6QTthewuLSVi.cpGTRW', '2018-07-02 01:43:27.657244', '2018-07-02 01:43:27.657244', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$72.1dNSv/UK4t1fVqPPAruEy.JZmgXYizcJn4XgcJD10nzdZ.mdqW', '2018-07-02 01:43:27.657244', '2018-07-02 01:43:27.657244', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:43:27.662494', '2018-07-02 01:43:27.662494', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:43:27.662494', '2018-07-02 01:43:27.662494', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:43:27.667159', '2018-07-02 01:43:27.667159', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:43:27.667159', '2018-07-02 01:43:27.667159', 298486374, 980190962, 207281424)[0m
  [1m[35m (35.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
Started GET "/admin" for 127.0.0.1 at 2018-07-01 20:43:28 -0500
Processing by AdminController#index as HTML
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (3.1ms)
Completed 200 OK in 5083ms (Views: 5063.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:33.318990"], ["updated_at", "2018-07-02 01:43:33.318990"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:33.397518"], ["updated_at", "2018-07-02 01:43:33.397518"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 01:43:33.405850"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:33.418402"], ["updated_at", "2018-07-02 01:43:33.418402"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:33.433469"], ["updated_at", "2018-07-02 01:43:33.433469"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:33.443938"], ["updated_at", "2018-07-02 01:43:33.443938"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:43:33 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:33.501733"], ["updated_at", "2018-07-02 01:43:33.501733"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (29.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (6.3ms)
Completed 200 OK in 57ms (Views: 46.5ms | ActiveRecord: 2.4ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:33 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:33.592510"], ["updated_at", "2018-07-02 01:43:33.592510"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.4ms)
  Rendered carts/_cart.html.erb (11.1ms)
  Rendered line_items/create.js.erb (14.0ms)
Completed 200 OK in 40ms (Views: 17.6ms | ActiveRecord: 3.1ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:43:33 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (23.4ms)
  Rendered orders/new.html.erb within layouts/application (26.5ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.3ms)
  Rendered carts/_cart.html.erb (11.2ms)
Completed 200 OK in 72ms (Views: 46.2ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:43:33 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:43:33.732562"], ["updated_at", "2018-07-02 01:43:33.732562"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:43:33.736694"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] Performing ChargeOrderJob (Job ID: d3d90998-a4af-4460-a344-f1c8fcad4f29) from Test(default) with arguments: #<GlobalID:0x00000007e7a9a8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] Processing check: /
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] Done
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636] Performing ActionMailer::DeliveryJob (Job ID: be2e49a7-7b40-4d87-8a51-7179eaaa4636) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007e40438 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636]   [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636]   Rendered collection of line_items/_line_item.text.erb [1 times] (3.9ms)
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636]   Rendered order_mailer/received.text.erb within layouts/mailer (11.3ms)
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636] OrderMailer#received: processed outbound mail in 99.9ms
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636] Sent mail to dave@example.com (11.6ms)
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636] Date: Sun, 01 Jul 2018 20:43:33 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b398345dd01a_388511fef40607a6@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] [ActionMailer::DeliveryJob] [be2e49a7-7b40-4d87-8a51-7179eaaa4636] Performed ActionMailer::DeliveryJob (Job ID: be2e49a7-7b40-4d87-8a51-7179eaaa4636) from Test(mailers) in 113.42ms
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] Enqueued ActionMailer::DeliveryJob (Job ID: be2e49a7-7b40-4d87-8a51-7179eaaa4636) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007e7a9a8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [d3d90998-a4af-4460-a344-f1c8fcad4f29] Performed ChargeOrderJob (Job ID: d3d90998-a4af-4460-a344-f1c8fcad4f29) from Test(default) in 129.69ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: d3d90998-a4af-4460-a344-f1c8fcad4f29) to Test(default) with arguments: #<GlobalID:0x00000007e8b910 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 194ms (ActiveRecord: 5.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:43:33 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:33.922955"], ["updated_at", "2018-07-02 01:43:33.922955"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.1ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.7ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.8ms)
Completed 200 OK in 48ms (Views: 37.7ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:33 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:34.004490"], ["updated_at", "2018-07-02 01:43:34.004490"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:34.017758"], ["updated_at", "2018-07-02 01:43:34.017758"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.4ms)
  Rendered carts/_cart.html.erb (7.4ms)
  Rendered line_items/create.js.erb (8.5ms)
Completed 200 OK in 30ms (Views: 9.7ms | ActiveRecord: 3.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:34.041684"], ["updated_at", "2018-07-02 01:43:34.041684"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 01:43:34.055221"], ["updated_at", "2018-07-02 01:43:34.055221"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.6ms)
  Rendered line_items/create.js.erb (7.5ms)
Completed 200 OK in 29ms (Views: 8.4ms | ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.7ms)
  Rendered orders/new.html.erb within layouts/application (6.5ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 30ms (Views: 22.3ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:43:34.131580"], ["updated_at", "2018-07-02 01:43:34.131580"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:43:34.135534"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] Performing ChargeOrderJob (Job ID: 0cef21ce-646d-43bf-9628-ff5f651ab29c) from Test(default) with arguments: #<GlobalID:0x000000066285a8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] Processing check: /
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] Done
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868] Performing ActionMailer::DeliveryJob (Job ID: ae3b9ad6-feae-432f-a63c-930070492868) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000065e6a68 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868]   Rendered order_mailer/received.text.erb within layouts/mailer (6.2ms)
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868] OrderMailer#received: processed outbound mail in 9.3ms
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868] Sent mail to dave@example.com (4.7ms)
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868] Date: Sun, 01 Jul 2018 20:43:34 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39834629648_388511fef4060843@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] [ActionMailer::DeliveryJob] [ae3b9ad6-feae-432f-a63c-930070492868] Performed ActionMailer::DeliveryJob (Job ID: ae3b9ad6-feae-432f-a63c-930070492868) from Test(mailers) in 15.75ms
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] Enqueued ActionMailer::DeliveryJob (Job ID: ae3b9ad6-feae-432f-a63c-930070492868) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000066285a8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [0cef21ce-646d-43bf-9628-ff5f651ab29c] Performed ChargeOrderJob (Job ID: 0cef21ce-646d-43bf-9628-ff5f651ab29c) from Test(default) in 21.48ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 0cef21ce-646d-43bf-9628-ff5f651ab29c) to Test(default) with arguments: #<GlobalID:0x000000066465f8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 53ms (ActiveRecord: 4.8ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:34.184050"], ["updated_at", "2018-07-02 01:43:34.184050"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.7ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.1ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.8ms)
Completed 200 OK in 41ms (Views: 31.1ms | ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.7ms)
  Rendered orders/new.html.erb within layouts/application (6.4ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.0ms)
Completed 200 OK in 30ms (Views: 22.8ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 01:43:34.347242"], ["updated_at", "2018-07-02 01:43:34.347242"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 01:43:34.351107"], ["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [64b6e106-329d-4d7b-9f47-fd58ffdfffd6] Performing ChargeOrderJob (Job ID: 64b6e106-329d-4d7b-9f47-fd58ffdfffd6) from Test(default) with arguments: #<GlobalID:0x000000089e9078 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [64b6e106-329d-4d7b-9f47-fd58ffdfffd6] Error performing ChargeOrderJob (Job ID: 64b6e106-329d-4d7b-9f47-fd58ffdfffd6) from Test(default) in 3.52ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:38:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:33:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 4.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 16ms (Views: 9.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.8ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 01:43:34.470874"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (21.3ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 76ms (ActiveRecord: 2.6ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#index as HTML
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (16.0ms)
Completed 200 OK in 50ms (Views: 22.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (10.3ms)
  Rendered products/edit.html.erb within layouts/application (23.7ms)
Completed 200 OK in 65ms (Views: 30.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#new as HTML
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.7ms)
  Rendered products/new.html.erb within layouts/application (8.0ms)
Completed 200 OK in 17ms (Views: 13.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 01:43:34.767698"], ["updated_at", "2018-07-02 01:43:34.767698"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (1.0ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.9ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 14ms (ActiveRecord: 3.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#index as HTML
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (9.6ms)
Completed 200 OK in 42ms (Views: 15.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 12ms (Views: 8.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:34.943500"], ["updated_at", "2018-07-02 01:43:34.943500"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:34.958104"], ["updated_at", "2018-07-02 01:43:34.958104"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 3.9ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:43:34 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.8ms)
  Rendered orders/new.html.erb within layouts/application (6.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 32ms (Views: 22.6ms | ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:35.038719"], ["updated_at", "2018-07-02 01:43:35.038719"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:35.065021"], ["updated_at", "2018-07-02 01:43:35.065021"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 01:43:35.074398"], ["updated_at", "2018-07-02 01:43:35.074398"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 03292119-277e-4a57-98ba-d2cab0920433) to Async(default) with arguments: #<GlobalID:0x00000008593e88 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 34ms (ActiveRecord: 4.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [03292119-277e-4a57-98ba-d2cab0920433] Performing ChargeOrderJob (Job ID: 03292119-277e-4a57-98ba-d2cab0920433) from Async(default) with arguments: #<GlobalID:0x00000008580658 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [03292119-277e-4a57-98ba-d2cab0920433] Processing check: /
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ChargeOrderJob] [03292119-277e-4a57-98ba-d2cab0920433] Done
------------------------------------------
OrdersControllerTest: test_should_get_edit
[ActiveJob] [ChargeOrderJob] [03292119-277e-4a57-98ba-d2cab0920433] Enqueued ActionMailer::DeliveryJob (Job ID: ef2c5a87-0336-4252-816e-d7140e68ef2c) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008580658 @uri=#<URI::GID gid://depot/Order/980190963>>
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [03292119-277e-4a57-98ba-d2cab0920433] Performed ChargeOrderJob (Job ID: 03292119-277e-4a57-98ba-d2cab0920433) from Async(default) in 7.28ms
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (6.7ms)
  Rendered orders/edit.html.erb within layouts/application (9.7ms)
Completed 200 OK in 43ms (Views: 16.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:35.181285"], ["updated_at", "2018-07-02 01:43:35.181285"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.8ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 36ms (Views: 26.9ms | ActiveRecord: 2.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:35.238683"], ["updated_at", "2018-07-02 01:43:35.238683"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (6.8ms)
  Rendered line_items/create.js.erb (7.7ms)
Completed 200 OK in 29ms (Views: 8.7ms | ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.1ms)
  Rendered orders/new.html.erb within layouts/application (5.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (8.6ms)
Completed 200 OK in 29ms (Views: 21.2ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:43:35.314073"], ["updated_at", "2018-07-02 01:43:35.314073"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:43:35.317941"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] Performing ChargeOrderJob (Job ID: 0bc41c59-9347-40e2-b695-2df592e0c7a0) from Test(default) with arguments: #<GlobalID:0x00000008394150 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] Processing check: /
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] Done
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a] Performing ActionMailer::DeliveryJob (Job ID: dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000837e4e0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a]   Rendered order_mailer/received.text.erb within layouts/mailer (6.2ms)
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a] OrderMailer#received: processed outbound mail in 9.3ms
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a] Sent mail to dave@example.com (4.7ms)
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a] Date: Sun, 01 Jul 2018 20:43:35 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3983475633d_388511fef406098a@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] [ActionMailer::DeliveryJob] [dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a] Performed ActionMailer::DeliveryJob (Job ID: dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a) from Test(mailers) in 15.87ms
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] Enqueued ActionMailer::DeliveryJob (Job ID: dbdc5b5d-3777-47ee-9bbe-fe444d9f1e1a) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008394150 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [0bc41c59-9347-40e2-b695-2df592e0c7a0] Performed ChargeOrderJob (Job ID: 0bc41c59-9347-40e2-b695-2df592e0c7a0) from Test(default) in 23.05ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 0bc41c59-9347-40e2-b695-2df592e0c7a0) to Test(default) with arguments: #<GlobalID:0x0000000839ac30 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 54ms (ActiveRecord: 4.9ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:35.367970"], ["updated_at", "2018-07-02 01:43:35.367970"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.7ms)
  [1m[36mLineItem Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.8ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.8ms)
Completed 200 OK in 44ms (Views: 33.3ms | ActiveRecord: 4.5ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
Started GET "/login" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 18ms (Views: 14.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 124ms (ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 119ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.9ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (8.1ms)
OrderMailer#received: processed outbound mail in 11.4ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.9ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (11.4ms)
OrderMailer#shipped: processed outbound mail in 50.2ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
Started GET "/" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:35.850772"], ["updated_at", "2018-07-02 01:43:35.850772"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.1ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.0ms)
Completed 200 OK in 35ms (Views: 26.2ms | ActiveRecord: 2.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 20:43:35 -0500
Processing by LineItemsController#new as HTML
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.7ms)
  Rendered line_items/new.html.erb within layouts/application (11.8ms)
Completed 200 OK in 45ms (Views: 19.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:36.044116"], ["updated_at", "2018-07-02 01:43:36.044116"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:36.058091"], ["updated_at", "2018-07-02 01:43:36.058091"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.8ms)
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 36ms (Views: 30.1ms | ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:36.130451"], ["updated_at", "2018-07-02 01:43:36.130451"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:36.145816"], ["updated_at", "2018-07-02 01:43:36.145816"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (7.2ms)
  Rendered line_items/create.js.erb (8.3ms)
Completed 200 OK in 33ms (Views: 9.5ms | ActiveRecord: 3.9ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#index as HTML
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.6ms)
Completed 200 OK in 44ms (Views: 19.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.1ms)
Completed 200 OK in 19ms (Views: 13.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (8.4ms)
  Rendered line_items/edit.html.erb within layouts/application (11.9ms)
Completed 200 OK in 47ms (Views: 20.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by CartsController#new as HTML
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.2ms)
  Rendered carts/new.html.erb within layouts/application (7.9ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.2ms)
Completed 200 OK in 26ms (Views: 22.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (2.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.7ms)
  Rendered carts/edit.html.erb within layouts/application (10.1ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.4ms)
  Rendered carts/_cart.html.erb (9.5ms)
Completed 200 OK in 41ms (Views: 31.5ms | ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by CartsController#index as HTML
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 15ms (Views: 11.1ms | ActiveRecord: 0.4ms)
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:36.532219"], ["updated_at", "2018-07-02 01:43:36.532219"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:43:36.590606"], ["updated_at", "2018-07-02 01:43:36.590606"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:43:36.606001"], ["updated_at", "2018-07-02 01:43:36.606001"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 4.4ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.6ms)
  Rendered carts/show.html.erb within layouts/application (12.9ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.3ms)
  Rendered carts/_cart.html.erb (4.2ms)
Completed 200 OK in 55ms (Views: 25.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by UsersController#index as HTML
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (7.8ms)
Completed 200 OK in 19ms (Views: 15.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by UsersController#new as HTML
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (8.9ms)
  Rendered users/new.html.erb within layouts/application (13.0ms)
Completed 200 OK in 24ms (Views: 20.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 15ms (Views: 8.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 10ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$ate/X0GT96tDWqW90Rb4r.F4oyonDeMKs9UZYTjHgASXVY4sQFHOi"], ["updated_at", "2018-07-02 01:43:36.861742"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 18ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$uLuYVcDTh2IQk8lJ8Lrd1.UW9d23FMm9D/rn7oj9yfTZMEZEn.2im"], ["created_at", "2018-07-02 01:43:36.897929"], ["updated_at", "2018-07-02 01:43:36.897929"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 16ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 20:43:36 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (3.6ms)
  Rendered users/edit.html.erb within layouts/application (8.4ms)
Completed 200 OK in 21ms (Views: 15.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:47:34.151151', '2018-07-02 01:47:34.151151', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:47:34.151151', '2018-07-02 01:47:34.151151', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:47:34.157515', '2018-07-02 01:47:34.157515', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:47:34.157515', '2018-07-02 01:47:34.157515', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:47:34.157515', '2018-07-02 01:47:34.157515', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$QXkb.PsbRXAZBW5DXiUDz.fXoQ0NGnU/nsraK5PkVC7uwrlLjiuaG', '2018-07-02 01:47:34.162952', '2018-07-02 01:47:34.162952', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$I8gcox5WXGNtHiNrl7H/zu94N0PCBCKcY5wZehL47ilKxHDindN9O', '2018-07-02 01:47:34.162952', '2018-07-02 01:47:34.162952', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:47:34.167591', '2018-07-02 01:47:34.167591', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:47:34.167591', '2018-07-02 01:47:34.167591', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:47:34.171642', '2018-07-02 01:47:34.171642', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:47:34.171642', '2018-07-02 01:47:34.171642', 298486374, 980190962, 207281424)[0m
  [1m[35m (25.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:34 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 128ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:47:34 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:34.648779"], ["updated_at", "2018-07-02 01:47:34.648779"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (5306.9ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (7.8ms)
Completed 200 OK in 5359ms (Views: 5340.4ms | ActiveRecord: 2.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:40.079560"], ["updated_at", "2018-07-02 01:47:40.079560"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.7ms)
  Rendered carts/_cart.html.erb (12.0ms)
  Rendered line_items/create.js.erb (15.4ms)
Completed 200 OK in 68ms (Views: 19.0ms | ActiveRecord: 3.6ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (20.2ms)
  Rendered orders/new.html.erb within layouts/application (23.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.9ms)
  Rendered carts/_cart.html.erb (54.3ms)
Completed 200 OK in 115ms (Views: 86.8ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:47:40.297321"], ["updated_at", "2018-07-02 01:47:40.297321"]]
  [1m[36mLineItem Update (0.7ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:47:40.301626"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] Performing ChargeOrderJob (Job ID: c7286ebd-32c1-486c-9fc5-c9c732742297) from Test(default) with arguments: #<GlobalID:0x00000007680ab8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] Processing check: /
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] Done
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3] Performing ActionMailer::DeliveryJob (Job ID: e7a33be6-6da7-4d35-b499-440b056cf1f3) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000076478a8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3]   [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3]   Rendered collection of line_items/_line_item.text.erb [1 times] (4.2ms)
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3]   Rendered order_mailer/received.text.erb within layouts/mailer (11.8ms)
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3] OrderMailer#received: processed outbound mail in 87.6ms
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3] Sent mail to dave@example.com (8.7ms)
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3] Date: Sun, 01 Jul 2018 20:47:40 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39843c697ba_3956a32f3c59bd@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] [ActionMailer::DeliveryJob] [e7a33be6-6da7-4d35-b499-440b056cf1f3] Performed ActionMailer::DeliveryJob (Job ID: e7a33be6-6da7-4d35-b499-440b056cf1f3) from Test(mailers) in 98.34ms
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] Enqueued ActionMailer::DeliveryJob (Job ID: e7a33be6-6da7-4d35-b499-440b056cf1f3) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007680ab8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [c7286ebd-32c1-486c-9fc5-c9c732742297] Performed ChargeOrderJob (Job ID: c7286ebd-32c1-486c-9fc5-c9c732742297) from Test(default) in 114.12ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: c7286ebd-32c1-486c-9fc5-c9c732742297) to Test(default) with arguments: #<GlobalID:0x00000007691c28 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 156ms (ActiveRecord: 5.7ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:40.449866"], ["updated_at", "2018-07-02 01:47:40.449866"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.4ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.3ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.9ms)
Completed 200 OK in 50ms (Views: 39.3ms | ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (4.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 16ms (ActiveRecord: 2.8ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (7.3ms)
Completed 200 OK in 18ms (Views: 12.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.2ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 14ms (Views: 7.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:42.024614"], ["updated_at", "2018-07-02 01:47:42.024614"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:42.038795"], ["updated_at", "2018-07-02 01:47:42.038795"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 4.0ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.9ms)
  Rendered orders/new.html.erb within layouts/application (6.7ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.3ms)
Completed 200 OK in 31ms (Views: 22.5ms | ActiveRecord: 2.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:42.219940"], ["updated_at", "2018-07-02 01:47:42.219940"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 01:47:42.229239"], ["updated_at", "2018-07-02 01:47:42.229239"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 5fd63d66-8844-46bd-b596-ddd2e5d8ad20) to Async(default) with arguments: #<GlobalID:0x000000070c45c0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [5fd63d66-8844-46bd-b596-ddd2e5d8ad20] Performing ChargeOrderJob (Job ID: 5fd63d66-8844-46bd-b596-ddd2e5d8ad20) from Async(default) with arguments: #<GlobalID:0x000000070bf9a8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
[ActiveJob] [ChargeOrderJob] [5fd63d66-8844-46bd-b596-ddd2e5d8ad20] Processing check: /
Completed 302 Found in 39ms (ActiveRecord: 4.5ms)
[ActiveJob] [ChargeOrderJob] [5fd63d66-8844-46bd-b596-ddd2e5d8ad20] Done
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [5fd63d66-8844-46bd-b596-ddd2e5d8ad20] Enqueued ActionMailer::DeliveryJob (Job ID: 5474301c-0787-4955-bc32-4484e4eecfb7) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000070bf9a8 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [5fd63d66-8844-46bd-b596-ddd2e5d8ad20] Performed ChargeOrderJob (Job ID: 5fd63d66-8844-46bd-b596-ddd2e5d8ad20) from Async(default) in 15.24ms
  [1m[36mOrder Load (2.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:42.407361"], ["updated_at", "2018-07-02 01:47:42.407361"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 121ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (6.0ms)
  Rendered orders/edit.html.erb within layouts/application (8.3ms)
Completed 200 OK in 19ms (Views: 13.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:42.804347"], ["updated_at", "2018-07-02 01:47:42.804347"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.3ms)
Completed 200 OK in 33ms (Views: 23.9ms | ActiveRecord: 2.7ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.7ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-01 20:47:42 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 16ms (Views: 8.8ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.1ms)
  Rendered line_items/edit.html.erb within layouts/application (10.5ms)
Completed 200 OK in 25ms (Views: 17.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.8ms)
Completed 200 OK in 21ms (Views: 13.9ms | ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (12.5ms)
Completed 200 OK in 23ms (Views: 16.9ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:43.626436"], ["updated_at", "2018-07-02 01:47:43.626436"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:43.640373"], ["updated_at", "2018-07-02 01:47:43.640373"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (7.0ms)
  Rendered line_items/create.js.erb (8.1ms)
Completed 200 OK in 32ms (Views: 9.5ms | ActiveRecord: 4.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 10ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:44.092372"], ["updated_at", "2018-07-02 01:47:44.092372"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:44.106123"], ["updated_at", "2018-07-02 01:47:44.106123"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 3.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.5ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (28.6ms)
  Rendered carts/_cart.html.erb (34.1ms)
Completed 200 OK in 62ms (Views: 55.9ms | ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.2ms)
  Rendered line_items/new.html.erb within layouts/application (7.5ms)
Completed 200 OK in 19ms (Views: 14.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 16ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.6ms)
  Rendered products/edit.html.erb within layouts/application (13.0ms)
Completed 200 OK in 27ms (Views: 20.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 12ms (ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 20:47:44 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 01:47:45.007595"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (13.6ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 45ms (ActiveRecord: 3.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 01:47:45.188633"], ["updated_at", "2018-07-02 01:47:45.188633"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.4ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.0ms)
Completed 200 OK in 51ms (Views: 20.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (4.3ms)
Completed 200 OK in 43ms (Views: 12.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.9ms)
  Rendered products/new.html.erb within layouts/application (8.5ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.5ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:45.855068"], ["updated_at", "2018-07-02 01:47:45.855068"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:45.869664"], ["updated_at", "2018-07-02 01:47:45.869664"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 4.0ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.7ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.3ms)
  Rendered carts/new.html.erb within layouts/application (7.4ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (3.0ms)
Completed 200 OK in 27ms (Views: 21.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 118ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.8ms)
  Rendered carts/edit.html.erb within layouts/application (8.8ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.2ms)
  Rendered carts/_cart.html.erb (12.8ms)
Completed 200 OK in 42ms (Views: 33.8ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.5ms)
  Rendered carts/_cart.html.erb (10.7ms)
  Rendered carts/show.html.erb within layouts/application (13.8ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (4.4ms)
Completed 200 OK in 40ms (Views: 32.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:46.605627"], ["updated_at", "2018-07-02 01:47:46.605627"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 10ms (ActiveRecord: 2.3ms)
  [1m[35m (13.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 10ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (12.9ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (7.1ms)
Completed 200 OK in 21ms (Views: 15.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:47:46 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:46.975865"], ["updated_at", "2018-07-02 01:47:46.975865"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (17.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.1ms)
Completed 200 OK in 47ms (Views: 36.9ms | ActiveRecord: 2.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:47.045089"], ["updated_at", "2018-07-02 01:47:47.045089"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.9ms)
  Rendered carts/_cart.html.erb (8.6ms)
  Rendered line_items/create.js.erb (12.2ms)
Completed 200 OK in 35ms (Views: 13.5ms | ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (9.3ms)
  Rendered orders/new.html.erb within layouts/application (10.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.5ms)
  Rendered carts/_cart.html.erb (11.6ms)
Completed 200 OK in 41ms (Views: 32.4ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:47:47.149532"], ["updated_at", "2018-07-02 01:47:47.149532"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:47:47.155088"], ["id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] Performing ChargeOrderJob (Job ID: bdc66898-94b0-4bea-bca3-c2a7d13e953c) from Test(default) with arguments: #<GlobalID:0x0000000717dd18 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] Processing check: /
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] Done
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc] Performing ActionMailer::DeliveryJob (Job ID: 66a9edee-dabb-42d6-be07-51ff3c5f0dfc) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000071b3a30 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc]   [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc]   Rendered order_mailer/received.text.erb within layouts/mailer (7.8ms)
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc] OrderMailer#received: processed outbound mail in 12.3ms
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc] Sent mail to dave@example.com (8.1ms)
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc] Date: Sun, 01 Jul 2018 20:47:47 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b398443314f4_3956a32f3c6017@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] [ActionMailer::DeliveryJob] [66a9edee-dabb-42d6-be07-51ff3c5f0dfc] Performed ActionMailer::DeliveryJob (Job ID: 66a9edee-dabb-42d6-be07-51ff3c5f0dfc) from Test(mailers) in 22.19ms
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] Enqueued ActionMailer::DeliveryJob (Job ID: 66a9edee-dabb-42d6-be07-51ff3c5f0dfc) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000717dd18 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [bdc66898-94b0-4bea-bca3-c2a7d13e953c] Performed ChargeOrderJob (Job ID: bdc66898-94b0-4bea-bca3-c2a7d13e953c) from Test(default) in 32.16ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: bdc66898-94b0-4bea-bca3-c2a7d13e953c) to Test(default) with arguments: #<GlobalID:0x00000007164bd8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 74ms (ActiveRecord: 5.4ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:47.223936"], ["updated_at", "2018-07-02 01:47:47.223936"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (16.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.7ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (8.5ms)
Completed 200 OK in 55ms (Views: 44.0ms | ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:47.321609"], ["updated_at", "2018-07-02 01:47:47.321609"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:47.338183"], ["updated_at", "2018-07-02 01:47:47.338183"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.4ms)
  Rendered carts/_cart.html.erb (8.9ms)
  Rendered line_items/create.js.erb (11.4ms)
Completed 200 OK in 39ms (Views: 12.6ms | ActiveRecord: 3.8ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (2.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:47.373944"], ["updated_at", "2018-07-02 01:47:47.373944"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (2.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 01:47:47.390052"], ["updated_at", "2018-07-02 01:47:47.390052"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.3ms)
  Rendered carts/_cart.html.erb (10.2ms)
  Rendered line_items/create.js.erb (11.1ms)
Completed 200 OK in 39ms (Views: 12.1ms | ActiveRecord: 6.7ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (9.0ms)
  Rendered orders/new.html.erb within layouts/application (9.6ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.5ms)
  Rendered carts/_cart.html.erb (12.0ms)
Completed 200 OK in 44ms (Views: 35.5ms | ActiveRecord: 1.7ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:47:47.497865"], ["updated_at", "2018-07-02 01:47:47.497865"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:47:47.501725"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] Performing ChargeOrderJob (Job ID: 175d78bd-bcaf-4670-8f93-785d8cee3060) from Test(default) with arguments: #<GlobalID:0x000000076c1d60 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] Processing check: /
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] Done
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34] Performing ActionMailer::DeliveryJob (Job ID: 1c0a6506-ddba-4692-b929-3f4284e99a34) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000076da748 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34]   Rendered order_mailer/received.text.erb within layouts/mailer (6.5ms)
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34] OrderMailer#received: processed outbound mail in 26.5ms
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34] Sent mail to dave@example.com (5.2ms)
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34] Date: Sun, 01 Jul 2018 20:47:47 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3984438961d_3956a32f3c615@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] [ActionMailer::DeliveryJob] [1c0a6506-ddba-4692-b929-3f4284e99a34] Performed ActionMailer::DeliveryJob (Job ID: 1c0a6506-ddba-4692-b929-3f4284e99a34) from Test(mailers) in 33.52ms
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] Enqueued ActionMailer::DeliveryJob (Job ID: 1c0a6506-ddba-4692-b929-3f4284e99a34) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000076c1d60 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [175d78bd-bcaf-4670-8f93-785d8cee3060] Performed ChargeOrderJob (Job ID: 175d78bd-bcaf-4670-8f93-785d8cee3060) from Test(default) in 40.08ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 175d78bd-bcaf-4670-8f93-785d8cee3060) to Test(default) with arguments: #<GlobalID:0x000000076acde8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 84ms (ActiveRecord: 4.7ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:47.578470"], ["updated_at", "2018-07-02 01:47:47.578470"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.6ms)
  [1m[36mLineItem Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.2ms)
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.1ms)
Completed 200 OK in 46ms (Views: 34.8ms | ActiveRecord: 4.5ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.6ms)
  Rendered orders/new.html.erb within layouts/application (6.3ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.1ms)
  Rendered carts/_cart.html.erb (9.2ms)
Completed 200 OK in 30ms (Views: 22.2ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 01:47:47.701449"], ["updated_at", "2018-07-02 01:47:47.701449"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 01:47:47.705291"], ["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [05bc8912-fa3a-4dc3-bfb2-2a992a664163] Performing ChargeOrderJob (Job ID: 05bc8912-fa3a-4dc3-bfb2-2a992a664163) from Test(default) with arguments: #<GlobalID:0x0000000753f528 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [05bc8912-fa3a-4dc3-bfb2-2a992a664163] Error performing ChargeOrderJob (Job ID: 05bc8912-fa3a-4dc3-bfb2-2a992a664163) from Test(default) in 3.12ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:39:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:34:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 4.2ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:47.735241"], ["updated_at", "2018-07-02 01:47:47.735241"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:47.752067"], ["updated_at", "2018-07-02 01:47:47.752067"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:47.763343"], ["updated_at", "2018-07-02 01:47:47.763343"], ["price", 9.99]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:47:47.778958"], ["updated_at", "2018-07-02 01:47:47.778958"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:47:47.794624"], ["updated_at", "2018-07-02 01:47:47.794624"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 01:47:47.802967"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.6ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (6.3ms)
OrderMailer#received: processed outbound mail in 9.7ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.5ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (11.4ms)
OrderMailer#shipped: processed outbound mail in 23.6ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 20:47:47 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 11ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (7.0ms)
  Rendered users/new.html.erb within layouts/application (9.9ms)
Completed 200 OK in 22ms (Views: 17.6ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (5.8ms)
Completed 200 OK in 16ms (Views: 10.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.1ms)
Completed 200 OK in 13ms (Views: 7.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$uf24zmrV3fKA/Eym37XVr.DdvOn.6dZnt6fRLMaD.oCDrXRgmvp7a"], ["updated_at", "2018-07-02 01:47:48.589631"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 18ms (ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$SnqRfrb/u5HgiUzrqwPUiOt3nYnm8whwDQ0G2VDxgak/LH6vqOSde"], ["created_at", "2018-07-02 01:47:48.738685"], ["updated_at", "2018-07-02 01:47:48.738685"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 15ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 20:47:48 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (3.3ms)
  Rendered users/edit.html.erb within layouts/application (5.8ms)
Completed 200 OK in 17ms (Views: 11.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (2.8ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:51:45.559384', '2018-07-02 01:51:45.559384', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:51:45.559384', '2018-07-02 01:51:45.559384', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:51:45.567516', '2018-07-02 01:51:45.567516', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:51:45.567516', '2018-07-02 01:51:45.567516', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:51:45.567516', '2018-07-02 01:51:45.567516', 207281424)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$hVP64xvn9TQjgLVgrUn9peL8FstndaQ.FT.sfSmuJaAGLZK.26/Rm', '2018-07-02 01:51:45.591197', '2018-07-02 01:51:45.591197', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$mNxUOBcS2SufpsAbOUbsYe33uVaepCisZ91/AAzeAMFqr9f4aM7AS', '2018-07-02 01:51:45.591197', '2018-07-02 01:51:45.591197', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:51:45.596399', '2018-07-02 01:51:45.596399', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:51:45.596399', '2018-07-02 01:51:45.596399', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:51:45.600974', '2018-07-02 01:51:45.600974', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:51:45.600974', '2018-07-02 01:51:45.600974', 298486374, 980190962, 207281424)[0m
  [1m[35m (7.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 127ms (ActiveRecord: 0.6ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 20:51:46 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 20:51:46 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (6.5ms)
Completed 200 OK in 6091ms (Views: 6060.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (22.7ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (65.9ms)
OrderMailer#received: processed outbound mail in 82.3ms
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (14.7ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (20.7ms)
OrderMailer#shipped: processed outbound mail in 36.5ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:53.227098"], ["updated_at", "2018-07-02 01:51:53.227098"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (3.4ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:53.246369"], ["updated_at", "2018-07-02 01:51:53.246369"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.4ms)
  Rendered carts/_cart.html.erb (14.2ms)
  Rendered line_items/create.js.erb (18.8ms)
Completed 200 OK in 64ms (Views: 24.1ms | ActiveRecord: 6.9ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:53.290712"], ["updated_at", "2018-07-02 01:51:53.290712"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 01:51:53.305849"], ["updated_at", "2018-07-02 01:51:53.305849"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.7ms)
  Rendered line_items/create.js.erb (7.7ms)
Completed 200 OK in 32ms (Views: 8.8ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (24.6ms)
  Rendered orders/new.html.erb within layouts/application (27.9ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.2ms)
  Rendered carts/_cart.html.erb (12.7ms)
Completed 200 OK in 61ms (Views: 50.4ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:51:53.423275"], ["updated_at", "2018-07-02 01:51:53.423275"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:51:53.427349"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] Performing ChargeOrderJob (Job ID: 135928f6-5740-4a91-9fba-5e350d74078e) from Test(default) with arguments: #<GlobalID:0x000000092617c8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] Processing check: /
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] Done
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212] Performing ActionMailer::DeliveryJob (Job ID: d3a6e5d3-6120-416a-9f6c-f1224fbfd212) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000009277b68 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.9ms)
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212]   Rendered order_mailer/received.text.erb within layouts/mailer (6.6ms)
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212] OrderMailer#received: processed outbound mail in 9.8ms
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212] Sent mail to dave@example.com (8.4ms)
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212] Date: Sun, 01 Jul 2018 20:51:53 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3985397904e_3b0eedcf4c168dc@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] [ActionMailer::DeliveryJob] [d3a6e5d3-6120-416a-9f6c-f1224fbfd212] Performed ActionMailer::DeliveryJob (Job ID: d3a6e5d3-6120-416a-9f6c-f1224fbfd212) from Test(mailers) in 20.16ms
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] Enqueued ActionMailer::DeliveryJob (Job ID: d3a6e5d3-6120-416a-9f6c-f1224fbfd212) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000092617c8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [135928f6-5740-4a91-9fba-5e350d74078e] Performed ChargeOrderJob (Job ID: 135928f6-5740-4a91-9fba-5e350d74078e) from Test(default) in 27.37ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 135928f6-5740-4a91-9fba-5e350d74078e) to Test(default) with arguments: #<GlobalID:0x000000071c29b8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 91ms (ActiveRecord: 4.8ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:53.518234"], ["updated_at", "2018-07-02 01:51:53.518234"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.1ms)
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.1ms)
Completed 200 OK in 52ms (Views: 40.2ms | ActiveRecord: 3.2ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.9ms)
  Rendered orders/new.html.erb within layouts/application (6.6ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (8.9ms)
Completed 200 OK in 31ms (Views: 22.5ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 01:51:53.652989"], ["updated_at", "2018-07-02 01:51:53.652989"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 01:51:53.657096"], ["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [304e3fb0-f8bf-47f7-b4b4-fc496a1c73f7] Performing ChargeOrderJob (Job ID: 304e3fb0-f8bf-47f7-b4b4-fc496a1c73f7) from Test(default) with arguments: #<GlobalID:0x0000000947d250 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [304e3fb0-f8bf-47f7-b4b4-fc496a1c73f7] Error performing ChargeOrderJob (Job ID: 304e3fb0-f8bf-47f7-b4b4-fc496a1c73f7) from Test(default) in 3.13ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:39:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:34:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 4.3ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:53.699581"], ["updated_at", "2018-07-02 01:51:53.699581"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.7ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.5ms)
Completed 200 OK in 34ms (Views: 25.4ms | ActiveRecord: 2.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:53.754012"], ["updated_at", "2018-07-02 01:51:53.754012"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.9ms)
  Rendered line_items/create.js.erb (8.0ms)
Completed 200 OK in 28ms (Views: 9.2ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.2ms)
  Rendered orders/new.html.erb within layouts/application (5.9ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (8.7ms)
Completed 200 OK in 29ms (Views: 21.6ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:51:53.830823"], ["updated_at", "2018-07-02 01:51:53.830823"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:51:53.834737"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] Performing ChargeOrderJob (Job ID: f9bcec15-a0ff-4806-9e84-e96c0bde7ae4) from Test(default) with arguments: #<GlobalID:0x00000006d515f0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] Processing check: /
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] Done
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4]   [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b] Performing ActionMailer::DeliveryJob (Job ID: 7c752bb6-d1e7-40b3-8821-c17b4d3a045b) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000968aa98 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b]   Rendered order_mailer/received.text.erb within layouts/mailer (6.4ms)
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b] OrderMailer#received: processed outbound mail in 9.6ms
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b] Sent mail to dave@example.com (4.7ms)
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b] Date: Sun, 01 Jul 2018 20:51:53 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b398539d4386_3b0eedcf4c169e2@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] [ActionMailer::DeliveryJob] [7c752bb6-d1e7-40b3-8821-c17b4d3a045b] Performed ActionMailer::DeliveryJob (Job ID: 7c752bb6-d1e7-40b3-8821-c17b4d3a045b) from Test(mailers) in 16.15ms
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] Enqueued ActionMailer::DeliveryJob (Job ID: 7c752bb6-d1e7-40b3-8821-c17b4d3a045b) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000006d515f0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [f9bcec15-a0ff-4806-9e84-e96c0bde7ae4] Performed ChargeOrderJob (Job ID: f9bcec15-a0ff-4806-9e84-e96c0bde7ae4) from Test(default) in 21.73ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: f9bcec15-a0ff-4806-9e84-e96c0bde7ae4) to Test(default) with arguments: #<GlobalID:0x00000009673eb0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 54ms (ActiveRecord: 4.8ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:51:53 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:53.884176"], ["updated_at", "2018-07-02 01:51:53.884176"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.0ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.1ms)
Completed 200 OK in 46ms (Views: 35.7ms | ActiveRecord: 4.5ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:54.161461"], ["updated_at", "2018-07-02 01:51:54.161461"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.7ms)
  Rendered carts/new.html.erb within layouts/application (8.0ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.5ms)
Completed 200 OK in 53ms (Views: 22.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.0ms)
  Rendered carts/edit.html.erb within layouts/application (6.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 55ms (Views: 23.8ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 41ms (Views: 12.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:51:54 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (10.9ms)
  Rendered carts/show.html.erb within layouts/application (14.2ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.2ms)
Completed 200 OK in 55ms (Views: 24.0ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:55.175176"], ["updated_at", "2018-07-02 01:51:55.175176"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:55.189027"], ["updated_at", "2018-07-02 01:51:55.189027"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:55.307554"], ["updated_at", "2018-07-02 01:51:55.307554"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:55.323554"], ["updated_at", "2018-07-02 01:51:55.323554"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:55.335102"], ["updated_at", "2018-07-02 01:51:55.335102"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:55.349740"], ["updated_at", "2018-07-02 01:51:55.349740"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:55.366632"], ["updated_at", "2018-07-02 01:51:55.366632"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 01:51:55.375226"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (8.3ms)
  Rendered products/edit.html.erb within layouts/application (12.1ms)
Completed 200 OK in 27ms (Views: 19.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 01:51:55.687301"], ["updated_at", "2018-07-02 01:51:55.687301"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 15ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 01:51:55.838589"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (12.2ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 68ms (ActiveRecord: 2.8ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 14ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (15.5ms)
Completed 200 OK in 47ms (Views: 21.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.5ms)
  Rendered products/new.html.erb within layouts/application (7.6ms)
Completed 200 OK in 42ms (Views: 13.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 37ms (Views: 8.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:56.841114"], ["updated_at", "2018-07-02 01:51:56.841114"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
Completed 200 OK in 33ms (Views: 24.3ms | ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 16ms (Views: 9.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:57.186849"], ["updated_at", "2018-07-02 01:51:57.186849"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.6ms)
  [1m[36mLineItem Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 34ms (Views: 25.2ms | ActiveRecord: 2.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:57.238232"], ["updated_at", "2018-07-02 01:51:57.238232"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (6.4ms)
  Rendered line_items/create.js.erb (7.4ms)
Completed 200 OK in 25ms (Views: 8.4ms | ActiveRecord: 2.9ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.5ms)
  Rendered orders/new.html.erb within layouts/application (6.2ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 30ms (Views: 22.5ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 01:51:57.315186"], ["updated_at", "2018-07-02 01:51:57.315186"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 01:51:57.319253"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] Performing ChargeOrderJob (Job ID: 62481a19-bb34-471b-8d30-2abcba6cd3b6) from Test(default) with arguments: #<GlobalID:0x00000008349f10 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] Processing check: /
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] Done
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6] Performing ActionMailer::DeliveryJob (Job ID: df8f44a8-7392-4eef-b64f-c1482ad498b6) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000833edb8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6]   Rendered order_mailer/received.text.erb within layouts/mailer (6.3ms)
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6] OrderMailer#received: processed outbound mail in 9.4ms
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6] Sent mail to dave@example.com (4.6ms)
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6] Date: Sun, 01 Jul 2018 20:51:57 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39853d566c3_3b0eedcf4c1703f@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] [ActionMailer::DeliveryJob] [df8f44a8-7392-4eef-b64f-c1482ad498b6] Performed ActionMailer::DeliveryJob (Job ID: df8f44a8-7392-4eef-b64f-c1482ad498b6) from Test(mailers) in 15.95ms
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] Enqueued ActionMailer::DeliveryJob (Job ID: df8f44a8-7392-4eef-b64f-c1482ad498b6) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008349f10 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [62481a19-bb34-471b-8d30-2abcba6cd3b6] Performed ChargeOrderJob (Job ID: 62481a19-bb34-471b-8d30-2abcba6cd3b6) from Test(default) in 21.61ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 62481a19-bb34-471b-8d30-2abcba6cd3b6) to Test(default) with arguments: #<GlobalID:0x0000000834ebf0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 54ms (ActiveRecord: 5.0ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:57.368691"], ["updated_at", "2018-07-02 01:51:57.368691"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.3ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.0ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.9ms)
Completed 200 OK in 42ms (Views: 31.7ms | ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 43ms (Views: 13.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.1ms)
Completed 200 OK in 39ms (Views: 7.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (6.5ms)
  Rendered users/new.html.erb within layouts/application (9.9ms)
Completed 200 OK in 45ms (Views: 15.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$czer8gyKWYe7qigCnVmRUO7dIteSyOqbDKe5lKLM.Kv5WaY9AvJI."], ["created_at", "2018-07-02 01:51:58.257103"], ["updated_at", "2018-07-02 01:51:58.257103"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 15ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (4.6ms)
  Rendered users/edit.html.erb within layouts/application (7.8ms)
Completed 200 OK in 43ms (Views: 13.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$yzG9k6WGdB/4ubHGpQWLL.oK6HsN5EC1vf4/449pAL90C011l56S."], ["updated_at", "2018-07-02 01:51:58.574445"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 17ms (ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:58.718024"], ["updated_at", "2018-07-02 01:51:58.718024"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 01:51:58.727045"], ["updated_at", "2018-07-02 01:51:58.727045"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
[ActiveJob] Enqueued ChargeOrderJob (Job ID: b0ebaa49-202d-468d-bbf2-4ba2f6d16b39) to Async(default) with arguments: #<GlobalID:0x00000007abca78 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
Completed 302 Found in 28ms (ActiveRecord: 4.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.6ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 40ms (Views: 11.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.6ms)
  Rendered orders/edit.html.erb within layouts/application (8.1ms)
Completed 200 OK in 43ms (Views: 14.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (3.1ms)
Completed 200 OK in 44ms (Views: 10.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:59.412494"], ["updated_at", "2018-07-02 01:51:59.412494"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 15ms (ActiveRecord: 3.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 10ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:51:59.848510"], ["updated_at", "2018-07-02 01:51:59.848510"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:51:59.862459"], ["updated_at", "2018-07-02 01:51:59.862459"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 4.0ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:51:59 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.3ms)
  Rendered orders/new.html.erb within layouts/application (6.1ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.1ms)
Completed 200 OK in 31ms (Views: 22.6ms | ActiveRecord: 1.9ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:52:00.131753', '2018-07-02 01:52:00.131753', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:52:00.131753', '2018-07-02 01:52:00.131753', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:52:00.134543', '2018-07-02 01:52:00.134543', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:52:00.134543', '2018-07-02 01:52:00.134543', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:52:00.134543', '2018-07-02 01:52:00.134543', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$P1WmI6JM2IQpZAQqxcWEzeV63rezCHqSIAyP4YgUgWw/6NCD/3Hja', '2018-07-02 01:52:00.136536', '2018-07-02 01:52:00.136536', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$LVm39jyn5R4AzYVtdGY8M.49AbvyCSoxvYjEOFeXb5dZKFk7sepvy', '2018-07-02 01:52:00.136536', '2018-07-02 01:52:00.136536', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:52:00.138220', '2018-07-02 01:52:00.138220', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:52:00.138220', '2018-07-02 01:52:00.138220', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:52:00.139645', '2018-07-02 01:52:00.139645', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:52:00.139645', '2018-07-02 01:52:00.139645', 298486374, 980190962, 207281424)[0m
  [1m[35m (28.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:52:00.337543"], ["updated_at", "2018-07-02 01:52:00.337543"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:52:00.351305"], ["updated_at", "2018-07-02 01:52:00.351305"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.9ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (8.8ms)
Completed 200 OK in 36ms (Views: 30.0ms | ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 11ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (18.8ms)
Completed 200 OK in 53ms (Views: 24.3ms | ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:52:01 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.4ms)
Completed 200 OK in 43ms (Views: 14.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:52:01 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:52:01.214247"], ["updated_at", "2018-07-02 01:52:01.214247"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:52:01.228136"], ["updated_at", "2018-07-02 01:52:01.228136"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.1ms)
  Rendered line_items/create.js.erb (8.2ms)
Completed 200 OK in 31ms (Views: 9.2ms | ActiveRecord: 4.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 20:52:01 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.0ms)
  Rendered line_items/edit.html.erb within layouts/application (11.5ms)
Completed 200 OK in 25ms (Views: 18.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:52:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.2ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 20:52:01 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (4.9ms)
  Rendered line_items/new.html.erb within layouts/application (7.7ms)
Completed 200 OK in 42ms (Views: 14.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (22.2ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 01:56:53.970221', '2018-07-02 01:56:53.970221', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 01:56:53.970221', '2018-07-02 01:56:53.970221', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:56:53.977005', '2018-07-02 01:56:53.977005', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 01:56:53.977005', '2018-07-02 01:56:53.977005', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 01:56:53.977005', '2018-07-02 01:56:53.977005', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$cDWvtw8yWQFBQng/1ZzNSeox15GqMJZTaDvtP2VMrB11L.d4M0W7W', '2018-07-02 01:56:53.982417', '2018-07-02 01:56:53.982417', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$n80Rie0GwEJPszybcheqQ.pEqQoOzd2ryPnfwlQr8TSkPgYFQeZnS', '2018-07-02 01:56:53.982417', '2018-07-02 01:56:53.982417', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:56:53.987831', '2018-07-02 01:56:53.987831', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 01:56:53.987831', '2018-07-02 01:56:53.987831', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 01:56:53.992226', '2018-07-02 01:56:53.992226', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 01:56:53.992226', '2018-07-02 01:56:53.992226', 298486374, 980190962, 207281424)[0m
  [1m[35m (6.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:56:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 130ms (ActiveRecord: 0.6ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 20:56:54 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:56:54.458019"], ["updated_at", "2018-07-02 01:56:54.458019"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (6328.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (7.8ms)
Completed 200 OK in 6385ms (Views: 6363.7ms | ActiveRecord: 3.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 20:57:00 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (11.6ms)
  Rendered carts/edit.html.erb within layouts/application (21.3ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (8.5ms)
  Rendered carts/_cart.html.erb (59.6ms)
Completed 200 OK in 115ms (Views: 97.0ms | ActiveRecord: 2.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 124ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (2.4ms)
  Rendered carts/new.html.erb within layouts/application (5.7ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (2.8ms)
Completed 200 OK in 51ms (Views: 19.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:57:01.460987"], ["updated_at", "2018-07-02 01:57:01.460987"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:57:01.642830"], ["updated_at", "2018-07-02 01:57:01.642830"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (5.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:57:01.659057"], ["updated_at", "2018-07-02 01:57:01.659057"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 30ms (ActiveRecord: 8.6ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 116ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.6ms)
Completed 200 OK in 42ms (Views: 11.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (10.7ms)
  Rendered carts/show.html.erb within layouts/application (14.1ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.3ms)
Completed 200 OK in 57ms (Views: 24.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:57:02.346761"], ["updated_at", "2018-07-02 01:57:02.346761"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:57:02.361292"], ["updated_at", "2018-07-02 01:57:02.361292"], ["price", 49.5]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.7ms)
  Rendered carts/_cart.html.erb (11.6ms)
  Rendered line_items/create.js.erb (15.4ms)
Completed 200 OK in 70ms (Views: 21.9ms | ActiveRecord: 4.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.4ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (23.2ms)
  Rendered line_items/edit.html.erb within layouts/application (26.8ms)
Completed 200 OK in 65ms (Views: 34.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 121ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:57:02.771659"], ["updated_at", "2018-07-02 01:57:02.771659"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:57:02.787191"], ["updated_at", "2018-07-02 01:57:02.787191"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 25ms (ActiveRecord: 4.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (12.9ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (9.0ms)
Completed 200 OK in 37ms (Views: 30.7ms | ActiveRecord: 2.3ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 20:57:02 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (14.9ms)
Completed 200 OK in 54ms (Views: 20.4ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 117ms (ActiveRecord: 0.2ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 14ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 10ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.0ms)
  Rendered line_items/new.html.erb within layouts/application (8.4ms)
Completed 200 OK in 43ms (Views: 15.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.2ms)
Completed 200 OK in 47ms (Views: 14.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:57:03.869304"], ["updated_at", "2018-07-02 01:57:03.869304"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 13ms (ActiveRecord: 2.1ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:57:04.018709"], ["updated_at", "2018-07-02 01:57:04.018709"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 01:57:04.028033"], ["updated_at", "2018-07-02 01:57:04.028033"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 6582aa98-2c13-4534-bd39-ca70270ea8c8) to Async(default) with arguments: #<GlobalID:0x0000000793d9e0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [6582aa98-2c13-4534-bd39-ca70270ea8c8] Performing ChargeOrderJob (Job ID: 6582aa98-2c13-4534-bd39-ca70270ea8c8) from Async(default) with arguments: #<GlobalID:0x0000000792fc00 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/
[ActiveJob] [ChargeOrderJob] [6582aa98-2c13-4534-bd39-ca70270ea8c8] Processing check: /
Completed 302 Found in 68ms (ActiveRecord: 4.3ms)
[ActiveJob] [ChargeOrderJob] [6582aa98-2c13-4534-bd39-ca70270ea8c8] Done
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [6582aa98-2c13-4534-bd39-ca70270ea8c8] Enqueued ActionMailer::DeliveryJob (Job ID: 2c5f8ea6-0820-4145-88d3-d4e1d834250b) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000792fc00 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (1.1ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [6582aa98-2c13-4534-bd39-ca70270ea8c8] Performed ChargeOrderJob (Job ID: 6582aa98-2c13-4534-bd39-ca70270ea8c8) from Async(default) in 41.51ms
  [1m[36mOrder Load (2.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 22ms (ActiveRecord: 3.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (8.2ms)
Completed 200 OK in 33ms (Views: 16.1ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 01:57:04.594989"], ["updated_at", "2018-07-02 01:57:04.594989"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 01:57:04.610018"], ["updated_at", "2018-07-02 01:57:04.610018"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 4.2ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (12.9ms)
  Rendered orders/new.html.erb within layouts/application (17.2ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.3ms)
Completed 200 OK in 68ms (Views: 35.1ms | ActiveRecord: 3.5ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (6.4ms)
  Rendered orders/edit.html.erb within layouts/application (10.0ms)
Completed 200 OK in 47ms (Views: 16.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:04 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (4.4ms)
Completed 200 OK in 43ms (Views: 11.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 16ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ProductsControllerTest: test_should_require_login
-------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 124ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.5ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (6.2ms)
Completed 200 OK in 42ms (Views: 15.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 49ms (Views: 14.1ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 125ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 11ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:05 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (19.4ms)
Completed 200 OK in 61ms (Views: 25.7ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 01:57:06.303129"], ["updated_at", "2018-07-02 01:57:06.303129"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 130ms (ActiveRecord: 0.9ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (8.9ms)
  Rendered products/edit.html.erb within layouts/application (13.8ms)
Completed 200 OK in 49ms (Views: 20.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.7ms)
  Rendered products/new.html.erb within layouts/application (8.6ms)
Completed 200 OK in 43ms (Views: 15.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (1.1ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 01:57:06.839953"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (12.6ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 67ms (ActiveRecord: 3.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.5ms)
Started GET "/users" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 20ms (Views: 14.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$9zoaH2sxFsYT6GWvUd.pfOhVGexAjaLsd0w4rCltYAmQtPm4t9iYO"], ["updated_at", "2018-07-02 01:57:07.234155"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 21ms (ActiveRecord: 3.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 116ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$uG8aiMytcW.vARQwD.6zUuftx5mCtS8ZKy83GO/d0ddwJYtlW.QTW"], ["created_at", "2018-07-02 01:57:07.389031"], ["updated_at", "2018-07-02 01:57:07.389031"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 15ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 117ms (ActiveRecord: 0.3ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (7.1ms)
  Rendered users/new.html.erb within layouts/application (12.1ms)
Completed 200 OK in 52ms (Views: 19.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 130ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (4.1ms)
Completed 200 OK in 41ms (Views: 11.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 123ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (1.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 14ms (ActiveRecord: 4.1ms)
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:07 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.2ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (4.2ms)
  Rendered users/edit.html.erb within layouts/application (7.8ms)
Completed 200 OK in 42ms (Views: 14.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 21ms (Views: 10.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (1.6ms)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 20:57:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (1.7ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 02:43:29.800515', '2018-07-02 02:43:29.800515', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 02:43:29.800515', '2018-07-02 02:43:29.800515', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:43:29.807400', '2018-07-02 02:43:29.807400', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:43:29.807400', '2018-07-02 02:43:29.807400', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 02:43:29.807400', '2018-07-02 02:43:29.807400', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$I2sI1W5JzeNccblN1o1/IOoUNamDb5W3rY8FCK.oz0sdiJ2y2GRNu', '2018-07-02 02:43:29.812958', '2018-07-02 02:43:29.812958', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$KbwVyOinxbEY8EMNED98yO3CK6ZG1JR0b84Ly7NLoLrPLPJIF7oN6', '2018-07-02 02:43:29.812958', '2018-07-02 02:43:29.812958', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:43:29.818068', '2018-07-02 02:43:29.818068', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:43:29.818068', '2018-07-02 02:43:29.818068', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 02:43:29.822233', '2018-07-02 02:43:29.822233', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 02:43:29.822233', '2018-07-02 02:43:29.822233', 298486374, 980190962, 207281424)[0m
  [1m[35m (5.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (45.4ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (84.7ms)
OrderMailer#shipped: processed outbound mail in 105.9ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (3.8ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (9.9ms)
OrderMailer#received: processed outbound mail in 23.2ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:30 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 127ms (ActiveRecord: 0.5ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:43:30 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 15ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:30 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 116ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:43:30 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:30.754460"], ["updated_at", "2018-07-02 02:43:30.754460"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (17.0ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 02:43:30.768194"], ["updated_at", "2018-07-02 02:43:30.768194"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
  [1m[36mOrder Load (1.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] Enqueued ChargeOrderJob (Job ID: e49bfe91-7c9f-43d0-b3a3-57fcd610b801) to Async(default) with arguments: #<GlobalID:0x00000004297738 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [e49bfe91-7c9f-43d0-b3a3-57fcd610b801] Performing ChargeOrderJob (Job ID: e49bfe91-7c9f-43d0-b3a3-57fcd610b801) from Async(default) with arguments: #<GlobalID:0x00000004256670 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
[ActiveJob] [ChargeOrderJob] [e49bfe91-7c9f-43d0-b3a3-57fcd610b801] Processing check: /
Completed 302 Found in 79ms (ActiveRecord: 22.5ms)
[ActiveJob] [ChargeOrderJob] [e49bfe91-7c9f-43d0-b3a3-57fcd610b801] Done
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [e49bfe91-7c9f-43d0-b3a3-57fcd610b801] Enqueued ActionMailer::DeliveryJob (Job ID: 4efc7954-7cfb-437a-ab48-09a0ccf190a0) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000004256670 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [e49bfe91-7c9f-43d0-b3a3-57fcd610b801] Performed ChargeOrderJob (Job ID: e49bfe91-7c9f-43d0-b3a3-57fcd610b801) from Async(default) in 17.28ms
  [1m[36mOrder Load (1.8ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:30 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 137ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:43:31 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.6ms)
Completed 200 OK in 7936ms (Views: 7929.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (1.0ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 16ms (ActiveRecord: 3.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (7.5ms)
Completed 200 OK in 50ms (Views: 20.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 131ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (69.0ms)
  Rendered orders/edit.html.erb within layouts/application (73.1ms)
Completed 200 OK in 88ms (Views: 81.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:39.660715"], ["updated_at", "2018-07-02 02:43:39.660715"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 14ms (ActiveRecord: 1.8ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 124ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:39.857472"], ["updated_at", "2018-07-02 02:43:39.857472"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:39.878379"], ["updated_at", "2018-07-02 02:43:39.878379"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 33ms (ActiveRecord: 4.9ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:43:39 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.7ms)
  Rendered orders/new.html.erb within layouts/application (9.3ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.1ms)
  Rendered carts/_cart.html.erb (17.4ms)
Completed 200 OK in 57ms (Views: 44.1ms | ActiveRecord: 2.1ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:39.967275"], ["updated_at", "2018-07-02 02:43:39.967275"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:39.983631"], ["updated_at", "2018-07-02 02:43:39.983631"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (4.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 02:43:39.996413"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:40.009197"], ["updated_at", "2018-07-02 02:43:40.009197"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:40.026938"], ["updated_at", "2018-07-02 02:43:40.026938"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:40.038841"], ["updated_at", "2018-07-02 02:43:40.038841"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:40.224375"], ["updated_at", "2018-07-02 02:43:40.224375"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 9ms (ActiveRecord: 1.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (11.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:40.375503"], ["updated_at", "2018-07-02 02:43:40.375503"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:40.399580"], ["updated_at", "2018-07-02 02:43:40.399580"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 33ms (ActiveRecord: 14.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 14ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.9ms)
  Rendered carts/edit.html.erb within layouts/application (7.7ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.9ms)
  Rendered carts/_cart.html.erb (10.7ms)
Completed 200 OK in 60ms (Views: 30.0ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 42ms (Views: 12.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 21:43:40 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.5ms)
  Rendered carts/new.html.erb within layouts/application (12.7ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.3ms)
Completed 200 OK in 66ms (Views: 36.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (9.8ms)
  Rendered carts/show.html.erb within layouts/application (12.8ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (0.9ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 65ms (Views: 28.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 9ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:41.604481"], ["updated_at", "2018-07-02 02:43:41.604481"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (16.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.9ms)
Completed 200 OK in 46ms (Views: 33.2ms | ActiveRecord: 3.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 123ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:41.835853"], ["updated_at", "2018-07-02 02:43:41.835853"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.8ms)
Completed 200 OK in 37ms (Views: 27.8ms | ActiveRecord: 2.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:41.894294"], ["updated_at", "2018-07-02 02:43:41.894294"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.6ms)
  Rendered carts/_cart.html.erb (12.0ms)
  Rendered line_items/create.js.erb (16.5ms)
Completed 200 OK in 68ms (Views: 25.0ms | ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:43:41 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.4ms)
  Rendered orders/new.html.erb within layouts/application (6.4ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (10.5ms)
Completed 200 OK in 34ms (Views: 26.3ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:43:42.018546"], ["updated_at", "2018-07-02 02:43:42.018546"]]
  [1m[36mLineItem Update (0.8ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:43:42.022562"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] Performing ChargeOrderJob (Job ID: 20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8) from Test(default) with arguments: #<GlobalID:0x00000007791b78 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] Processing check: /
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] Done
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44] Performing ActionMailer::DeliveryJob (Job ID: 98af5547-eea7-4092-865e-75a1c94e8d44) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007789018 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.6ms)
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44]   Rendered order_mailer/received.text.erb within layouts/mailer (6.0ms)
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44] OrderMailer#received: processed outbound mail in 9.1ms
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44] Sent mail to dave@example.com (32.9ms)
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44] Date: Sun, 01 Jul 2018 21:43:42 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39915e13869_46a75fcf4436634@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] [ActionMailer::DeliveryJob] [98af5547-eea7-4092-865e-75a1c94e8d44] Performed ActionMailer::DeliveryJob (Job ID: 98af5547-eea7-4092-865e-75a1c94e8d44) from Test(mailers) in 45.02ms
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] Enqueued ActionMailer::DeliveryJob (Job ID: 98af5547-eea7-4092-865e-75a1c94e8d44) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007791b78 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8] Performed ChargeOrderJob (Job ID: 20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8) from Test(default) in 50.7ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 20f1e0e4-9ed7-48f9-8b0d-5027b6576fd8) to Test(default) with arguments: #<GlobalID:0x00000007797f78 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 84ms (ActiveRecord: 5.5ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:42.102812"], ["updated_at", "2018-07-02 02:43:42.102812"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.9ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.3ms)
Completed 200 OK in 50ms (Views: 38.6ms | ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 120ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 125ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 18ms (Views: 14.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:43:42 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:42.985834"], ["updated_at", "2018-07-02 02:43:42.985834"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.6ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.4ms)
Completed 200 OK in 40ms (Views: 30.9ms | ActiveRecord: 2.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:43.046195"], ["updated_at", "2018-07-02 02:43:43.046195"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (7.5ms)
  Rendered line_items/create.js.erb (8.8ms)
Completed 200 OK in 28ms (Views: 10.0ms | ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.9ms)
  Rendered orders/new.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.7ms)
  Rendered carts/_cart.html.erb (11.9ms)
Completed 200 OK in 36ms (Views: 27.8ms | ActiveRecord: 2.2ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:43:43.132824"], ["updated_at", "2018-07-02 02:43:43.132824"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:43:43.136779"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] Performing ChargeOrderJob (Job ID: b66ea81f-cb61-4197-8070-2342acbd3fb3) from Test(default) with arguments: #<GlobalID:0x0000000699b960 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] Processing check: /
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] Done
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43] Performing ActionMailer::DeliveryJob (Job ID: 1c435ca4-8aeb-444f-b7a2-551ccbd9da43) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000698c988 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43]   Rendered order_mailer/received.text.erb within layouts/mailer (6.2ms)
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43] OrderMailer#received: processed outbound mail in 9.5ms
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43] Sent mail to dave@example.com (4.4ms)
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43] Date: Sun, 01 Jul 2018 21:43:43 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39915f29dba_46a75fcf443677e@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] [ActionMailer::DeliveryJob] [1c435ca4-8aeb-444f-b7a2-551ccbd9da43] Performed ActionMailer::DeliveryJob (Job ID: 1c435ca4-8aeb-444f-b7a2-551ccbd9da43) from Test(mailers) in 21.74ms
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] Enqueued ActionMailer::DeliveryJob (Job ID: 1c435ca4-8aeb-444f-b7a2-551ccbd9da43) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000699b960 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [b66ea81f-cb61-4197-8070-2342acbd3fb3] Performed ChargeOrderJob (Job ID: b66ea81f-cb61-4197-8070-2342acbd3fb3) from Test(default) in 29.21ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: b66ea81f-cb61-4197-8070-2342acbd3fb3) to Test(default) with arguments: #<GlobalID:0x000000069a7468 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 63ms (ActiveRecord: 5.0ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:43.197152"], ["updated_at", "2018-07-02 02:43:43.197152"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.1ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.7ms)
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.6ms)
Completed 200 OK in 50ms (Views: 36.4ms | ActiveRecord: 5.1ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:43.282025"], ["updated_at", "2018-07-02 02:43:43.282025"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:43.295714"], ["updated_at", "2018-07-02 02:43:43.295714"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (8.1ms)
  Rendered line_items/create.js.erb (9.2ms)
Completed 200 OK in 33ms (Views: 10.1ms | ActiveRecord: 4.0ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:43.325136"], ["updated_at", "2018-07-02 02:43:43.325136"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 02:43:43.338809"], ["updated_at", "2018-07-02 02:43:43.338809"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.6ms)
  Rendered line_items/create.js.erb (8.6ms)
Completed 200 OK in 31ms (Views: 9.3ms | ActiveRecord: 3.6ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.7ms)
  Rendered orders/new.html.erb within layouts/application (5.9ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.2ms)
  Rendered carts/_cart.html.erb (9.7ms)
Completed 200 OK in 33ms (Views: 25.6ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:43:43.421294"], ["updated_at", "2018-07-02 02:43:43.421294"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:43:43.425203"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] Performing ChargeOrderJob (Job ID: 01a2682f-e18f-4cc7-9096-f614ccf2d1af) from Test(default) with arguments: #<GlobalID:0x0000000563ef98 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] Processing check: /
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] Done
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c] Performing ActionMailer::DeliveryJob (Job ID: 3af2c85e-14bc-47f0-8df0-71c09406cb9c) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000004e3eb68 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c]   Rendered order_mailer/received.text.erb within layouts/mailer (6.1ms)
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c] OrderMailer#received: processed outbound mail in 9.6ms
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c] Sent mail to dave@example.com (5.1ms)
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c] Date: Sun, 01 Jul 2018 21:43:43 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39915f70454_46a75fcf4436857@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] [ActionMailer::DeliveryJob] [3af2c85e-14bc-47f0-8df0-71c09406cb9c] Performed ActionMailer::DeliveryJob (Job ID: 3af2c85e-14bc-47f0-8df0-71c09406cb9c) from Test(mailers) in 16.46ms
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] Enqueued ActionMailer::DeliveryJob (Job ID: 3af2c85e-14bc-47f0-8df0-71c09406cb9c) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000563ef98 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [01a2682f-e18f-4cc7-9096-f614ccf2d1af] Performed ChargeOrderJob (Job ID: 01a2682f-e18f-4cc7-9096-f614ccf2d1af) from Test(default) in 22.32ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 01a2682f-e18f-4cc7-9096-f614ccf2d1af) to Test(default) with arguments: #<GlobalID:0x00000005a80520 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 55ms (ActiveRecord: 4.9ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:43.509416"], ["updated_at", "2018-07-02 02:43:43.509416"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.6ms)
  [1m[36mLineItem Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (6.2ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.9ms)
Completed 200 OK in 50ms (Views: 37.9ms | ActiveRecord: 4.6ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.1ms)
  Rendered orders/new.html.erb within layouts/application (6.1ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.9ms)
Completed 200 OK in 37ms (Views: 28.9ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 02:43:43.642980"], ["updated_at", "2018-07-02 02:43:43.642980"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 02:43:43.647008"], ["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [fbe7a478-b2d4-4ccc-9631-7dc7cc629df8] Performing ChargeOrderJob (Job ID: fbe7a478-b2d4-4ccc-9631-7dc7cc629df8) from Test(default) with arguments: #<GlobalID:0x000000078e7c70 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [fbe7a478-b2d4-4ccc-9631-7dc7cc629df8] Error performing ChargeOrderJob (Job ID: fbe7a478-b2d4-4ccc-9631-7dc7cc629df8) from Test(default) in 3.44ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:39:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:34:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-js-3.0.10/lib/i18n/js/middleware.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 4.6ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (16.1ms)
Completed 200 OK in 33ms (Views: 25.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 21:43:43 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 15ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ProductsControllerTest: test_should_require_login
-------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.5ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (9.4ms)
  Rendered products/edit.html.erb within layouts/application (13.6ms)
Completed 200 OK in 57ms (Views: 22.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 122ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 02:43:44.527645"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (14.7ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 74ms (ActiveRecord: 2.9ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (7.9ms)
  Rendered products/new.html.erb within layouts/application (11.7ms)
Completed 200 OK in 53ms (Views: 21.0ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 117ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (4.8ms)
Completed 200 OK in 45ms (Views: 14.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:44 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 02:43:45.272303"], ["updated_at", "2018-07-02 02:43:45.272303"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 139ms (ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:45.458852"], ["updated_at", "2018-07-02 02:43:45.458852"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:45.473477"], ["updated_at", "2018-07-02 02:43:45.473477"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.3ms)
  Rendered carts/_cart.html.erb (8.3ms)
  Rendered line_items/create.js.erb (9.6ms)
Completed 200 OK in 35ms (Views: 11.0ms | ActiveRecord: 4.2ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 17ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (16.4ms)
Completed 200 OK in 64ms (Views: 32.4ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:43:45 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (12.7ms)
  Rendered line_items/edit.html.erb within layouts/application (19.8ms)
Completed 200 OK in 60ms (Views: 30.6ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 118ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:43:46.357413"], ["updated_at", "2018-07-02 02:43:46.357413"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:43:46.385255"], ["updated_at", "2018-07-02 02:43:46.385255"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 37ms (ActiveRecord: 3.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (20.4ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.4ms)
  Rendered carts/_cart.html.erb (11.7ms)
Completed 200 OK in 72ms (Views: 65.0ms | ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.0ms)
  Rendered line_items/new.html.erb within layouts/application (9.5ms)
Completed 200 OK in 52ms (Views: 23.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (10.3ms)
Completed 200 OK in 57ms (Views: 25.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-01 21:43:46 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (2.5ms)
Completed 200 OK in 26ms (Views: 15.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (12.8ms)
  Rendered users/edit.html.erb within layouts/application (17.5ms)
Completed 200 OK in 42ms (Views: 31.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (9.9ms)
Completed 200 OK in 51ms (Views: 21.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$9TfVSxEN7f3e9fOtl/nP4eEwbzVPEL2Zu9X2HG4tVAUSeNfs.0c76"], ["updated_at", "2018-07-02 02:43:47.612125"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 21ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 12ms (ActiveRecord: 3.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.7ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (3.4ms)
  Rendered users/new.html.erb within layouts/application (5.8ms)
Completed 200 OK in 47ms (Views: 17.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:47 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 21:43:48 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (5.8ms)
Completed 200 OK in 52ms (Views: 19.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:43:48 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 21:43:48 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$FklO9TQsQm1LU1PK3XHXXOw8uiECY1LcoYBAmhkpi8MPMwH5yuEKC"], ["created_at", "2018-07-02 02:43:48.294027"], ["updated_at", "2018-07-02 02:43:48.294027"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 16ms (ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 02:46:48.464603', '2018-07-02 02:46:48.464603', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 02:46:48.464603', '2018-07-02 02:46:48.464603', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:46:48.471393', '2018-07-02 02:46:48.471393', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:46:48.471393', '2018-07-02 02:46:48.471393', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 02:46:48.471393', '2018-07-02 02:46:48.471393', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$nhD9ToBMwxez6wFSpkzlueCUOzMoE7BpI0oz2cMUqa7/pLiMxEawK', '2018-07-02 02:46:48.477309', '2018-07-02 02:46:48.477309', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$rkcWY.dWImDobtW0LRqaXO/Y5VFqjvMAlD8ON6hr/TiwzQNBTjo/C', '2018-07-02 02:46:48.477309', '2018-07-02 02:46:48.477309', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:46:48.482273', '2018-07-02 02:46:48.482273', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:46:48.482273', '2018-07-02 02:46:48.482273', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 02:46:48.487457', '2018-07-02 02:46:48.487457', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 02:46:48.487457', '2018-07-02 02:46:48.487457', 298486374, 980190962, 207281424)[0m
  [1m[35m (5.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:46:48 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:48.840691"], ["updated_at", "2018-07-02 02:46:48.840691"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (4942.7ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (8.2ms)
Completed 200 OK in 5052ms (Views: 5019.7ms | ActiveRecord: 2.4ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:46:53 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:46:53.931222"], ["updated_at", "2018-07-02 02:46:53.931222"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.3ms)
  Rendered carts/_cart.html.erb (11.9ms)
  Rendered line_items/create.js.erb (15.2ms)
Completed 200 OK in 64ms (Views: 18.4ms | ActiveRecord: 3.1ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:46:53 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (22.5ms)
  Rendered orders/new.html.erb within layouts/application (25.9ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.2ms)
  Rendered carts/_cart.html.erb (12.0ms)
Completed 200 OK in 74ms (Views: 48.3ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:46:54.113740"], ["updated_at", "2018-07-02 02:46:54.113740"]]
  [1m[36mLineItem Update (0.7ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:46:54.118415"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] Performing ChargeOrderJob (Job ID: 08dbb1ee-48ed-40f0-bc78-47334882bc18) from Test(default) with arguments: #<GlobalID:0x00000005302d48 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] Processing check: /
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] Done
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda] Performing ActionMailer::DeliveryJob (Job ID: f3738af4-3288-4f0e-9048-759b16b71eda) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000051b0fd0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda]   [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda]   Rendered collection of line_items/_line_item.text.erb [1 times] (4.3ms)
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda]   Rendered order_mailer/received.text.erb within layouts/mailer (21.7ms)
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda] OrderMailer#received: processed outbound mail in 171.4ms
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda] Sent mail to dave@example.com (12.2ms)
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda] Date: Sun, 01 Jul 2018 21:46:54 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39921e61f1c_4794400f4c842aa@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] [ActionMailer::DeliveryJob] [f3738af4-3288-4f0e-9048-759b16b71eda] Performed ActionMailer::DeliveryJob (Job ID: f3738af4-3288-4f0e-9048-759b16b71eda) from Test(mailers) in 185.92ms
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] Enqueued ActionMailer::DeliveryJob (Job ID: f3738af4-3288-4f0e-9048-759b16b71eda) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000005302d48 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [08dbb1ee-48ed-40f0-bc78-47334882bc18] Performed ChargeOrderJob (Job ID: 08dbb1ee-48ed-40f0-bc78-47334882bc18) from Test(default) in 241.27ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 08dbb1ee-48ed-40f0-bc78-47334882bc18) to Test(default) with arguments: #<GlobalID:0x0000000536bb68 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 316ms (ActiveRecord: 6.1ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:54.421436"], ["updated_at", "2018-07-02 02:46:54.421436"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.5ms)
  [1m[36mLineItem Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.2ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.5ms)
Completed 200 OK in 78ms (Views: 66.7ms | ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (45.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:54.586363"], ["updated_at", "2018-07-02 02:46:54.586363"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:46:54.599868"], ["updated_at", "2018-07-02 02:46:54.599868"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.3ms)
  Rendered carts/_cart.html.erb (8.1ms)
  Rendered line_items/create.js.erb (9.2ms)
Completed 200 OK in 32ms (Views: 10.6ms | ActiveRecord: 3.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:54.625280"], ["updated_at", "2018-07-02 02:46:54.625280"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 02:46:54.638863"], ["updated_at", "2018-07-02 02:46:54.638863"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.4ms)
  Rendered line_items/create.js.erb (8.4ms)
Completed 200 OK in 30ms (Views: 9.3ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.0ms)
  Rendered orders/new.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.6ms)
Completed 200 OK in 32ms (Views: 24.1ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:46:54.719600"], ["updated_at", "2018-07-02 02:46:54.719600"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:46:54.723587"], ["id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] Performing ChargeOrderJob (Job ID: 65d724d4-1e25-4c70-b244-a5bb9b94d073) from Test(default) with arguments: #<GlobalID:0x00000006ac9800 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] Processing check: /
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] Done
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111] Performing ActionMailer::DeliveryJob (Job ID: dde4cb93-4f90-4196-b91c-c463bab32111) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000006aae028 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.9ms)
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111]   Rendered order_mailer/received.text.erb within layouts/mailer (6.4ms)
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111] OrderMailer#received: processed outbound mail in 10.0ms
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111] Sent mail to dave@example.com (4.9ms)
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111] Date: Sun, 01 Jul 2018 21:46:54 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39921eb986b_4794400f4c8430@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] [ActionMailer::DeliveryJob] [dde4cb93-4f90-4196-b91c-c463bab32111] Performed ActionMailer::DeliveryJob (Job ID: dde4cb93-4f90-4196-b91c-c463bab32111) from Test(mailers) in 16.58ms
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] Enqueued ActionMailer::DeliveryJob (Job ID: dde4cb93-4f90-4196-b91c-c463bab32111) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000006ac9800 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [65d724d4-1e25-4c70-b244-a5bb9b94d073] Performed ChargeOrderJob (Job ID: 65d724d4-1e25-4c70-b244-a5bb9b94d073) from Test(default) in 22.06ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 65d724d4-1e25-4c70-b244-a5bb9b94d073) to Test(default) with arguments: #<GlobalID:0x00000006ae0ed8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 56ms (ActiveRecord: 5.2ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:54.775627"], ["updated_at", "2018-07-02 02:46:54.775627"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.9ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.9ms)
Completed 200 OK in 47ms (Views: 36.2ms | ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.2ms)
  Rendered orders/new.html.erb within layouts/application (6.3ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.8ms)
Completed 200 OK in 35ms (Views: 26.4ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 02:46:54.908615"], ["updated_at", "2018-07-02 02:46:54.908615"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 02:46:54.912716"], ["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [b30449cc-3c8e-4cf3-9d19-055461f908d0] Performing ChargeOrderJob (Job ID: b30449cc-3c8e-4cf3-9d19-055461f908d0) from Test(default) with arguments: #<GlobalID:0x00000005730ff0 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [b30449cc-3c8e-4cf3-9d19-055461f908d0] Error performing ChargeOrderJob (Job ID: b30449cc-3c8e-4cf3-9d19-055461f908d0) from Test(default) in 3.38ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:39:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:34:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-js-3.0.10/lib/i18n/js/middleware.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 4.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:54 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 116ms (ActiveRecord: 1.9ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.8ms)
Completed 200 OK in 23ms (Views: 14.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 02:46:55.346112"], ["updated_at", "2018-07-02 02:46:55.346112"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 23ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (2.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 116ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 20ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (18.1ms)
  Rendered products/edit.html.erb within layouts/application (23.3ms)
Completed 200 OK in 78ms (Views: 46.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (11.6ms)
  Rendered products/new.html.erb within layouts/application (13.7ms)
Completed 200 OK in 65ms (Views: 33.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ProductsControllerTest: test_should_require_login
-------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:55 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 2.1ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.4ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (8.5ms)
Completed 200 OK in 63ms (Views: 34.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (2.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 15ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (22.6ms)
Completed 200 OK in 67ms (Views: 34.8ms | ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 02:46:56.770042"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (24.0ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 86ms (ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:56 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:57.078980"], ["updated_at", "2018-07-02 02:46:57.078980"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.8ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.9ms)
Completed 200 OK in 39ms (Views: 29.0ms | ActiveRecord: 3.0ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (8.6ms)
Completed 200 OK in 24ms (Views: 16.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:57.423213"], ["updated_at", "2018-07-02 02:46:57.423213"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:46:57.437587"], ["updated_at", "2018-07-02 02:46:57.437587"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 4.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.7ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.5ms)
Completed 200 OK in 39ms (Views: 32.9ms | ActiveRecord: 2.4ms)
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:57.638797"], ["updated_at", "2018-07-02 02:46:57.638797"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:46:57.652871"], ["updated_at", "2018-07-02 02:46:57.652871"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.7ms)
  Rendered line_items/create.js.erb (8.8ms)
Completed 200 OK in 33ms (Views: 10.2ms | ActiveRecord: 4.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 13ms (ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 21:46:57 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (7.1ms)
  Rendered line_items/edit.html.erb within layouts/application (12.3ms)
Completed 200 OK in 49ms (Views: 21.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 10ms (ActiveRecord: 2.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.0ms)
  Rendered line_items/new.html.erb within layouts/application (8.0ms)
Completed 200 OK in 45ms (Views: 16.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 117ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (15.3ms)
Completed 200 OK in 50ms (Views: 22.4ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 119ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:58.672510"], ["updated_at", "2018-07-02 02:46:58.672510"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 1.8ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 147ms (ActiveRecord: 1.3ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 16ms (Views: 10.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 21:46:58 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 19ms (Views: 13.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:59.158728"], ["updated_at", "2018-07-02 02:46:59.158728"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:46:59.173175"], ["updated_at", "2018-07-02 02:46:59.173175"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 4.0ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.7ms)
  Rendered orders/new.html.erb within layouts/application (5.7ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.6ms)
Completed 200 OK in 32ms (Views: 24.6ms | ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.0ms)
  Rendered orders/edit.html.erb within layouts/application (7.5ms)
Completed 200 OK in 21ms (Views: 15.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:46:59.655770"], ["updated_at", "2018-07-02 02:46:59.655770"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 02:46:59.664344"], ["updated_at", "2018-07-02 02:46:59.664344"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 40273303-0bcf-44f8-9414-87eb687d03bb) to Async(default) with arguments: #<GlobalID:0x00000004cd6e38 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/en
[ActiveJob] [ChargeOrderJob] [40273303-0bcf-44f8-9414-87eb687d03bb] Performing ChargeOrderJob (Job ID: 40273303-0bcf-44f8-9414-87eb687d03bb) from Async(default) with arguments: #<GlobalID:0x00000004c758e0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Completed 302 Found in 39ms (ActiveRecord: 3.9ms)
[ActiveJob] [ChargeOrderJob] [40273303-0bcf-44f8-9414-87eb687d03bb] Processing check: /
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [40273303-0bcf-44f8-9414-87eb687d03bb] Done
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [40273303-0bcf-44f8-9414-87eb687d03bb] Enqueued ActionMailer::DeliveryJob (Job ID: 34d09803-bb12-4799-a920-3d4c933347cc) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000004c758e0 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ChargeOrderJob] [40273303-0bcf-44f8-9414-87eb687d03bb] Performed ChargeOrderJob (Job ID: 40273303-0bcf-44f8-9414-87eb687d03bb) from Async(default) in 20.08ms
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.6ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 15ms (ActiveRecord: 3.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 21:46:59 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.6ms)
  Rendered carts/new.html.erb within layouts/application (6.8ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 52ms (Views: 23.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:00.359978"], ["updated_at", "2018-07-02 02:47:00.359978"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:00.373783"], ["updated_at", "2018-07-02 02:47:00.373783"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 23ms (ActiveRecord: 4.6ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 12ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.4ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.2ms)
  Rendered carts/edit.html.erb within layouts/application (9.4ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.5ms)
Completed 200 OK in 60ms (Views: 29.7ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:00.736088"], ["updated_at", "2018-07-02 02:47:00.736088"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.3ms)
Completed 200 OK in 17ms (Views: 12.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (9.7ms)
  Rendered carts/show.html.erb within layouts/application (11.6ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.0ms)
  Rendered carts/_cart.html.erb (3.9ms)
Completed 200 OK in 30ms (Views: 23.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.9ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (14.3ms)
OrderMailer#shipped: processed outbound mail in 53.0ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (6.2ms)
OrderMailer#received: processed outbound mail in 9.4ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 11ms (Views: 9.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:01 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 12ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$bzKtFXwTHpsixRde0//q3ORayc0oySHIqSdzn///hTX/n8bNqqU6C"], ["created_at", "2018-07-02 02:47:02.215030"], ["updated_at", "2018-07-02 02:47:02.215030"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 15ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (7.9ms)
  Rendered users/new.html.erb within layouts/application (11.3ms)
Completed 200 OK in 49ms (Views: 21.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.2ms)
Completed 200 OK in 40ms (Views: 10.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (5.5ms)
Completed 200 OK in 41ms (Views: 12.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (3.4ms)
  Rendered users/edit.html.erb within layouts/application (5.7ms)
Completed 200 OK in 48ms (Views: 13.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:02 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$5AjkxEUu9Q.ffhbfAoDUg.OL09T8fI8zjwn/n1QVuMS0Dk5lZxtP6"], ["updated_at", "2018-07-02 02:47:03.063687"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 17ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:03.208438"], ["updated_at", "2018-07-02 02:47:03.208438"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.0ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.9ms)
Completed 200 OK in 39ms (Views: 29.4ms | ActiveRecord: 2.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:03.266995"], ["updated_at", "2018-07-02 02:47:03.266995"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (8.0ms)
  Rendered line_items/create.js.erb (9.1ms)
Completed 200 OK in 29ms (Views: 10.4ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.7ms)
  Rendered orders/new.html.erb within layouts/application (5.7ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.9ms)
Completed 200 OK in 33ms (Views: 24.9ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:47:03.351338"], ["updated_at", "2018-07-02 02:47:03.351338"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:47:03.355468"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] Performing ChargeOrderJob (Job ID: 4b083e56-5ba1-4f55-98a0-812d1b082086) from Test(default) with arguments: #<GlobalID:0x00000003a7e628 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] Processing check: /
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] Done
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9] Performing ActionMailer::DeliveryJob (Job ID: 0ffe7aed-24c8-48a9-b614-6435bf9984f9) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000038b55d0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.9ms)
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9]   Rendered order_mailer/received.text.erb within layouts/mailer (6.4ms)
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9] OrderMailer#received: processed outbound mail in 9.9ms
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9] Sent mail to dave@example.com (26.7ms)
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9] Date: Sun, 01 Jul 2018 21:47:03 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3992275f7c2_4794400f4c844df@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] [ActionMailer::DeliveryJob] [0ffe7aed-24c8-48a9-b614-6435bf9984f9] Performed ActionMailer::DeliveryJob (Job ID: 0ffe7aed-24c8-48a9-b614-6435bf9984f9) from Test(mailers) in 38.46ms
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] Enqueued ActionMailer::DeliveryJob (Job ID: 0ffe7aed-24c8-48a9-b614-6435bf9984f9) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000003a7e628 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [4b083e56-5ba1-4f55-98a0-812d1b082086] Performed ChargeOrderJob (Job ID: 4b083e56-5ba1-4f55-98a0-812d1b082086) from Test(default) in 44.12ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 4b083e56-5ba1-4f55-98a0-812d1b082086) to Test(default) with arguments: #<GlobalID:0x00000003be3bd0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 78ms (ActiveRecord: 5.0ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:03.428539"], ["updated_at", "2018-07-02 02:47:03.428539"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.6ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.7ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.8ms)
Completed 200 OK in 46ms (Views: 35.3ms | ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:03.497515"], ["updated_at", "2018-07-02 02:47:03.497515"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:03.513051"], ["updated_at", "2018-07-02 02:47:03.513051"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:03.523828"], ["updated_at", "2018-07-02 02:47:03.523828"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:03.538235"], ["updated_at", "2018-07-02 02:47:03.538235"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:03.554049"], ["updated_at", "2018-07-02 02:47:03.554049"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 02:47:03.562203"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-01 21:47:03 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (1.6ms)
Completed 200 OK in 19ms (Views: 11.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 02:47:26.451066', '2018-07-02 02:47:26.451066', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 02:47:26.451066', '2018-07-02 02:47:26.451066', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:47:26.458655', '2018-07-02 02:47:26.458655', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:47:26.458655', '2018-07-02 02:47:26.458655', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 02:47:26.458655', '2018-07-02 02:47:26.458655', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$FYj8AylFbtLtUJ.v3uiaDuX/8xsAOgMcHTUZSPy/0yQYRp7gAZK66', '2018-07-02 02:47:26.464881', '2018-07-02 02:47:26.464881', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$OBes2chM0hxD1Jzwi3MNcufKv0XZ60teRUMx.Lh9yI2Zdi8z/u.B.', '2018-07-02 02:47:26.464881', '2018-07-02 02:47:26.464881', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:47:26.470106', '2018-07-02 02:47:26.470106', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:47:26.470106', '2018-07-02 02:47:26.470106', 298486374)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 02:47:26.475151', '2018-07-02 02:47:26.475151', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 02:47:26.475151', '2018-07-02 02:47:26.475151', 298486374, 980190962, 207281424)[0m
  [1m[35m (28.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:26 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 128ms (ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:47:27 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:27.038701"], ["updated_at", "2018-07-02 02:47:27.038701"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (6008.7ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (9.1ms)
Completed 200 OK in 6085ms (Views: 6063.8ms | ActiveRecord: 3.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (7.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:33.186652"], ["updated_at", "2018-07-02 02:47:33.186652"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.5ms)
  Rendered carts/_cart.html.erb (12.4ms)
  Rendered line_items/create.js.erb (15.5ms)
Completed 200 OK in 90ms (Views: 19.0ms | ActiveRecord: 10.6ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (18.4ms)
  Rendered orders/new.html.erb within layouts/application (21.5ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.3ms)
  Rendered carts/_cart.html.erb (12.0ms)
Completed 200 OK in 74ms (Views: 43.9ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:47:33.338266"], ["updated_at", "2018-07-02 02:47:33.338266"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:47:33.342311"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] Performing ChargeOrderJob (Job ID: 43e39949-24e7-4bf6-8b41-ad6a01283bdc) from Test(default) with arguments: #<GlobalID:0x00000007cbacf8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] Processing check: /
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] Done
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd] Performing ActionMailer::DeliveryJob (Job ID: 5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007c8db18 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd]   [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd]   Rendered collection of line_items/_line_item.text.erb [1 times] (3.9ms)
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd]   Rendered order_mailer/received.text.erb within layouts/mailer (11.2ms)
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd] OrderMailer#received: processed outbound mail in 85.8ms
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd] Sent mail to dave@example.com (8.8ms)
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd] Date: Sun, 01 Jul 2018 21:47:33 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39924572e75_4822920f40993ed@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] [ActionMailer::DeliveryJob] [5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd] Performed ActionMailer::DeliveryJob (Job ID: 5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd) from Test(mailers) in 96.73ms
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] Enqueued ActionMailer::DeliveryJob (Job ID: 5a9bffdf-70c8-4add-a6d1-5d2e40c89bcd) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007cbacf8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [43e39949-24e7-4bf6-8b41-ad6a01283bdc] Performed ChargeOrderJob (Job ID: 43e39949-24e7-4bf6-8b41-ad6a01283bdc) from Test(default) in 113.88ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 43e39949-24e7-4bf6-8b41-ad6a01283bdc) to Test(default) with arguments: #<GlobalID:0x00000007cc3808 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 158ms (ActiveRecord: 5.1ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:33.495273"], ["updated_at", "2018-07-02 02:47:33.495273"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.2ms)
  [1m[36mLineItem Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.0ms)
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.0ms)
Completed 200 OK in 57ms (Views: 44.4ms | ActiveRecord: 4.5ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:33.576741"], ["updated_at", "2018-07-02 02:47:33.576741"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (7.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:33.607193"], ["updated_at", "2018-07-02 02:47:33.607193"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 02:47:33.622436"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:33.637296"], ["updated_at", "2018-07-02 02:47:33.637296"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:33.666734"], ["updated_at", "2018-07-02 02:47:33.666734"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:33.676984"], ["updated_at", "2018-07-02 02:47:33.676984"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.2ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 16ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:47:33 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 11ms (ActiveRecord: 3.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.6ms)
  Rendered line_items/edit.html.erb within layouts/application (10.3ms)
Completed 200 OK in 26ms (Views: 19.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (12.5ms)
Completed 200 OK in 24ms (Views: 18.4ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:34.450908"], ["updated_at", "2018-07-02 02:47:34.450908"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:34.464122"], ["updated_at", "2018-07-02 02:47:34.464122"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 21ms (ActiveRecord: 3.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.5ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (9.3ms)
Completed 200 OK in 39ms (Views: 31.9ms | ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 117ms (ActiveRecord: 0.3ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:34.671118"], ["updated_at", "2018-07-02 02:47:34.671118"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:34.687858"], ["updated_at", "2018-07-02 02:47:34.687858"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (8.8ms)
  Rendered line_items/create.js.erb (9.8ms)
Completed 200 OK in 37ms (Views: 10.7ms | ActiveRecord: 4.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.7ms)
  Rendered line_items/new.html.erb within layouts/application (5.4ms)
Completed 200 OK in 16ms (Views: 12.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:47:34 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.9ms)
Completed 200 OK in 45ms (Views: 14.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (1.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:35.142738"], ["updated_at", "2018-07-02 02:47:35.142738"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.9ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.0ms)
Completed 200 OK in 37ms (Views: 28.3ms | ActiveRecord: 2.5ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:35.200533"], ["updated_at", "2018-07-02 02:47:35.200533"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.9ms)
  Rendered line_items/create.js.erb (8.9ms)
Completed 200 OK in 29ms (Views: 10.0ms | ActiveRecord: 3.4ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.8ms)
  Rendered orders/new.html.erb within layouts/application (5.7ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (9.3ms)
Completed 200 OK in 31ms (Views: 23.1ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:47:35.282594"], ["updated_at", "2018-07-02 02:47:35.282594"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:47:35.286538"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] Performing ChargeOrderJob (Job ID: 7931a551-07a3-4bf7-86b6-35504e348f0f) from Test(default) with arguments: #<GlobalID:0x0000000762af28 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] Processing check: /
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] Done
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752] Performing ActionMailer::DeliveryJob (Job ID: 08e57b9a-428c-4ed5-99b9-5adaf3e75752) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000076132b0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752]   Rendered order_mailer/received.text.erb within layouts/mailer (6.1ms)
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752] OrderMailer#received: processed outbound mail in 9.3ms
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752] Sent mail to dave@example.com (4.6ms)
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752] Date: Sun, 01 Jul 2018 21:47:35 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3992474e2b8_4822920f4099441@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] [ActionMailer::DeliveryJob] [08e57b9a-428c-4ed5-99b9-5adaf3e75752] Performed ActionMailer::DeliveryJob (Job ID: 08e57b9a-428c-4ed5-99b9-5adaf3e75752) from Test(mailers) in 15.6ms
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] Enqueued ActionMailer::DeliveryJob (Job ID: 08e57b9a-428c-4ed5-99b9-5adaf3e75752) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000762af28 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [7931a551-07a3-4bf7-86b6-35504e348f0f] Performed ChargeOrderJob (Job ID: 7931a551-07a3-4bf7-86b6-35504e348f0f) from Test(default) in 21.04ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 7931a551-07a3-4bf7-86b6-35504e348f0f) to Test(default) with arguments: #<GlobalID:0x000000076329a8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 53ms (ActiveRecord: 4.9ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:35.345625"], ["updated_at", "2018-07-02 02:47:35.345625"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.8ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.8ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.7ms)
Completed 200 OK in 55ms (Views: 44.8ms | ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:35.440781"], ["updated_at", "2018-07-02 02:47:35.440781"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:35.453921"], ["updated_at", "2018-07-02 02:47:35.453921"], ["price", 49.5]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (8.0ms)
  Rendered line_items/create.js.erb (9.2ms)
Completed 200 OK in 32ms (Views: 10.4ms | ActiveRecord: 3.6ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:35.480027"], ["updated_at", "2018-07-02 02:47:35.480027"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 02:47:35.493956"], ["updated_at", "2018-07-02 02:47:35.493956"], ["price", 9.99]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.4ms)
  Rendered line_items/create.js.erb (8.3ms)
Completed 200 OK in 30ms (Views: 9.2ms | ActiveRecord: 3.7ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.0ms)
  Rendered orders/new.html.erb within layouts/application (6.1ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.8ms)
Completed 200 OK in 34ms (Views: 24.4ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:47:35.591765"], ["updated_at", "2018-07-02 02:47:35.591765"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:47:35.595839"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] Performing ChargeOrderJob (Job ID: e39a3ca5-c863-4c77-92a2-2335e98c464a) from Test(default) with arguments: #<GlobalID:0x000000045308f0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] Processing check: /
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] Done
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d] Performing ActionMailer::DeliveryJob (Job ID: 01320cd3-2c80-4c38-ba3a-a9771007019d) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000004735678 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d]   Rendered order_mailer/received.text.erb within layouts/mailer (6.1ms)
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d] OrderMailer#received: processed outbound mail in 9.2ms
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d] Sent mail to dave@example.com (6.2ms)
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d] Date: Sun, 01 Jul 2018 21:47:35 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39924799ae9_4822920f40995a6@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] [ActionMailer::DeliveryJob] [01320cd3-2c80-4c38-ba3a-a9771007019d] Performed ActionMailer::DeliveryJob (Job ID: 01320cd3-2c80-4c38-ba3a-a9771007019d) from Test(mailers) in 16.99ms
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] Enqueued ActionMailer::DeliveryJob (Job ID: 01320cd3-2c80-4c38-ba3a-a9771007019d) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000045308f0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [e39a3ca5-c863-4c77-92a2-2335e98c464a] Performed ChargeOrderJob (Job ID: e39a3ca5-c863-4c77-92a2-2335e98c464a) from Test(default) in 22.53ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: e39a3ca5-c863-4c77-92a2-2335e98c464a) to Test(default) with arguments: #<GlobalID:0x000000044553b8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 60ms (ActiveRecord: 4.9ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:35.647820"], ["updated_at", "2018-07-02 02:47:35.647820"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (58.0ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.0ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.2ms)
Completed 200 OK in 92ms (Views: 80.2ms | ActiveRecord: 4.4ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.4ms)
  Rendered orders/new.html.erb within layouts/application (5.4ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (9.5ms)
Completed 200 OK in 31ms (Views: 23.0ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 02:47:35.818543"], ["updated_at", "2018-07-02 02:47:35.818543"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 02:47:35.822447"], ["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [7004cb0e-1d15-43a1-8ed8-8d7857fcceec] Performing ChargeOrderJob (Job ID: 7004cb0e-1d15-43a1-8ed8-8d7857fcceec) from Test(default) with arguments: #<GlobalID:0x000000080503b8 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [7004cb0e-1d15-43a1-8ed8-8d7857fcceec] Error performing ChargeOrderJob (Job ID: 7004cb0e-1d15-43a1-8ed8-8d7857fcceec) from Test(default) in 3.22ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:39:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:34:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-js-3.0.10/lib/i18n/js/middleware.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 35ms (ActiveRecord: 4.3ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-01 21:47:35 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (7.1ms)
Completed 200 OK in 48ms (Views: 18.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:36.176283"], ["updated_at", "2018-07-02 02:47:36.176283"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (4.8ms)
  Rendered carts/edit.html.erb within layouts/application (7.8ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.4ms)
Completed 200 OK in 34ms (Views: 27.4ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (10.5ms)
  Rendered carts/show.html.erb within layouts/application (12.6ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (0.9ms)
  Rendered carts/_cart.html.erb (4.0ms)
Completed 200 OK in 54ms (Views: 24.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:36.684191"], ["updated_at", "2018-07-02 02:47:36.684191"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:36.697482"], ["updated_at", "2018-07-02 02:47:36.697482"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 21ms (ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/new.html.erb within layouts/application (3.8ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.1ms)
Completed 200 OK in 47ms (Views: 17.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:36 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 123ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$1snJBYCvzP9C7IQbE9EWqOTDH0pyQ8p1q5NOV3cmjQPD3DZncDTm2"], ["updated_at", "2018-07-02 02:47:37.215823"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 20ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.4ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (6.9ms)
  Rendered users/edit.html.erb within layouts/application (10.1ms)
Completed 200 OK in 25ms (Views: 19.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (2.9ms)
  Rendered users/new.html.erb within layouts/application (4.8ms)
Completed 200 OK in 16ms (Views: 11.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$UXMsgR6zDRy9csZ3dgXiOei8oUEsZQMRG0zc.RFuruCt4iywK/ws."], ["created_at", "2018-07-02 02:47:37.673825"], ["updated_at", "2018-07-02 02:47:37.673825"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 12ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (5.1ms)
Completed 200 OK in 17ms (Views: 11.8ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:37 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 138ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (1.9ms)
Completed 200 OK in 14ms (Views: 9.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 13ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (11.7ms)
  Rendered products/edit.html.erb within layouts/application (39.1ms)
Completed 200 OK in 54ms (Views: 48.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (13.9ms)
Completed 200 OK in 26ms (Views: 21.0ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 117ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 15ms (ActiveRecord: 3.0ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ProductsControllerTest: test_should_require_login
-------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 118ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:47:38 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (6.1ms)
Completed 200 OK in 18ms (Views: 15.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 118ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 02:47:39.161919"], ["updated_at", "2018-07-02 02:47:39.161919"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 125ms (ActiveRecord: 0.4ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (3.5ms)
Completed 200 OK in 46ms (Views: 14.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (5.4ms)
  Rendered products/new.html.erb within layouts/application (7.4ms)
Completed 200 OK in 19ms (Views: 14.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 02:47:39.679226"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (12.4ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 40ms (ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:39.847754"], ["updated_at", "2018-07-02 02:47:39.847754"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.5ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.9ms)
Completed 200 OK in 38ms (Views: 28.4ms | ActiveRecord: 2.8ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:39 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (5.5ms)
  Rendered orders/edit.html.erb within layouts/application (10.4ms)
Completed 200 OK in 52ms (Views: 19.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:47:40 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:41.135518"], ["updated_at", "2018-07-02 02:47:41.135518"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 02:47:41.144179"], ["updated_at", "2018-07-02 02:47:41.144179"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 621bb4a8-de77-432e-bb8a-864905866162) to Async(default) with arguments: #<GlobalID:0x000000073226c8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
  [1m[36mOrder Load (1.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/en
[ActiveJob] [ChargeOrderJob] [621bb4a8-de77-432e-bb8a-864905866162] Performing ChargeOrderJob (Job ID: 621bb4a8-de77-432e-bb8a-864905866162) from Async(default) with arguments: #<GlobalID:0x000000073140a0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Completed 302 Found in 40ms (ActiveRecord: 4.3ms)
[ActiveJob] [ChargeOrderJob] [621bb4a8-de77-432e-bb8a-864905866162] Processing check: /
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [621bb4a8-de77-432e-bb8a-864905866162] Done
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [621bb4a8-de77-432e-bb8a-864905866162] Enqueued ActionMailer::DeliveryJob (Job ID: cb3442c4-c708-4e0b-a51c-76ef58a4129d) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000073140a0 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [ChargeOrderJob] [621bb4a8-de77-432e-bb8a-864905866162] Performed ChargeOrderJob (Job ID: 621bb4a8-de77-432e-bb8a-864905866162) from Async(default) in 20.79ms
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 14ms (ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:41.483197"], ["updated_at", "2018-07-02 02:47:41.483197"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:47:41.496956"], ["updated_at", "2018-07-02 02:47:41.496956"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 22ms (ActiveRecord: 3.4ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.1ms)
  Rendered orders/new.html.erb within layouts/application (5.3ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.4ms)
Completed 200 OK in 30ms (Views: 23.1ms | ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:47:41.673123"], ["updated_at", "2018-07-02 02:47:41.673123"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 40ms (Views: 12.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:47:41 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.1ms)
Completed 200 OK in 15ms (Views: 9.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:47:42 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.4ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-01 21:47:42 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 17ms (Views: 11.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.7ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (6.3ms)
OrderMailer#received: processed outbound mail in 9.6ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (6.9ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (13.4ms)
OrderMailer#shipped: processed outbound mail in 26.1ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 02:48:00.287312', '2018-07-02 02:48:00.287312', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 02:48:00.287312', '2018-07-02 02:48:00.287312', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:48:00.293797', '2018-07-02 02:48:00.293797', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 02:48:00.293797', '2018-07-02 02:48:00.293797', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 02:48:00.293797', '2018-07-02 02:48:00.293797', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$QwJ5jfZR8j5sJswSVCKf7ulZR4IZ/TKAy8mV8IxNftzn5/uT6r5FS', '2018-07-02 02:48:00.299101', '2018-07-02 02:48:00.299101', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$97ixzPq7iHjKS.iSOrg1OeNCTv.75ZaucyhWWi8Fk4zN0nX6rk506', '2018-07-02 02:48:00.299101', '2018-07-02 02:48:00.299101', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:48:00.303826', '2018-07-02 02:48:00.303826', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 02:48:00.303826', '2018-07-02 02:48:00.303826', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 02:48:00.307977', '2018-07-02 02:48:00.307977', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 02:48:00.307977', '2018-07-02 02:48:00.307977', 298486374, 980190962, 207281424)[0m
  [1m[35m (32.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 128ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-01 21:48:00 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 23ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:00 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 123ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-01 21:48:00 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (17.6ms)
  Rendered products/new.html.erb within layouts/application (21.9ms)
Completed 200 OK in 4856ms (Views: 4850.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:05 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-01 21:48:05 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.9ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 02:48:05.956461"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (20.1ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 48ms (ActiveRecord: 2.9ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.8ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 14ms (ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.2ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 16ms (Views: 10.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 02:48:06.436362"], ["updated_at", "2018-07-02 02:48:06.436362"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 15ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ProductsControllerTest: test_should_require_login
-------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (4.9ms)
Completed 200 OK in 16ms (Views: 13.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/products" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (14.7ms)
Completed 200 OK in 28ms (Views: 22.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (5.8ms)
  Rendered products/edit.html.erb within layouts/application (8.2ms)
Completed 200 OK in 22ms (Views: 15.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:48:06 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:06.999468"], ["updated_at", "2018-07-02 02:48:06.999468"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.8ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (8.3ms)
Completed 200 OK in 53ms (Views: 35.7ms | ActiveRecord: 2.7ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:07.094983"], ["updated_at", "2018-07-02 02:48:07.094983"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.5ms)
  Rendered carts/_cart.html.erb (12.2ms)
  Rendered line_items/create.js.erb (15.5ms)
Completed 200 OK in 64ms (Views: 18.9ms | ActiveRecord: 3.2ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (9.6ms)
  Rendered orders/new.html.erb within layouts/application (12.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.4ms)
  Rendered carts/_cart.html.erb (12.3ms)
Completed 200 OK in 61ms (Views: 35.4ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:48:07.225823"], ["updated_at", "2018-07-02 02:48:07.225823"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:48:07.229932"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] Performing ChargeOrderJob (Job ID: ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d) from Test(default) with arguments: #<GlobalID:0x0000000797f4f8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] Processing check: /
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] Done
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0] Performing ActionMailer::DeliveryJob (Job ID: 609bd10e-b4c1-4b23-9259-9f2e6fc739b0) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007953498 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0]   [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0]   Rendered collection of line_items/_line_item.text.erb [1 times] (4.0ms)
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0]   Rendered order_mailer/received.text.erb within layouts/mailer (10.9ms)
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0] OrderMailer#received: processed outbound mail in 68.3ms
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0] Sent mail to dave@example.com (8.3ms)
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0] Date: Sun, 01 Jul 2018 21:48:07 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39926752d4f_48b1ce6f44925ca@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] [ActionMailer::DeliveryJob] [609bd10e-b4c1-4b23-9259-9f2e6fc739b0] Performed ActionMailer::DeliveryJob (Job ID: 609bd10e-b4c1-4b23-9259-9f2e6fc739b0) from Test(mailers) in 78.79ms
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] Enqueued ActionMailer::DeliveryJob (Job ID: 609bd10e-b4c1-4b23-9259-9f2e6fc739b0) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000797f4f8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d] Performed ChargeOrderJob (Job ID: ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d) from Test(default) in 93.97ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: ac73133b-92d2-4f41-abd1-8a5ffd0f0b0d) to Test(default) with arguments: #<GlobalID:0x0000000798b960 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 135ms (ActiveRecord: 5.4ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:07.358079"], ["updated_at", "2018-07-02 02:48:07.358079"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.0ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.2ms)
Completed 200 OK in 52ms (Views: 41.2ms | ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:07.447090"], ["updated_at", "2018-07-02 02:48:07.447090"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:07.460890"], ["updated_at", "2018-07-02 02:48:07.460890"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (8.2ms)
  Rendered line_items/create.js.erb (9.4ms)
Completed 200 OK in 32ms (Views: 10.6ms | ActiveRecord: 3.8ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:07.486833"], ["updated_at", "2018-07-02 02:48:07.486833"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 02:48:07.500726"], ["updated_at", "2018-07-02 02:48:07.500726"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.5ms)
  Rendered line_items/create.js.erb (8.5ms)
Completed 200 OK in 31ms (Views: 9.6ms | ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.8ms)
  Rendered orders/new.html.erb within layouts/application (5.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.8ms)
  Rendered carts/_cart.html.erb (9.6ms)
Completed 200 OK in 32ms (Views: 24.0ms | ActiveRecord: 1.9ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:48:07.582036"], ["updated_at", "2018-07-02 02:48:07.582036"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:48:07.586084"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] Performing ChargeOrderJob (Job ID: 355d0542-4783-4a2c-aa77-b216dbbb95d1) from Test(default) with arguments: #<GlobalID:0x00000005954840 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] Processing check: /
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] Done
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c] Performing ActionMailer::DeliveryJob (Job ID: 36fdfba3-7579-4b38-aab6-95b57e74500c) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000588b530 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c]   Rendered order_mailer/received.text.erb within layouts/mailer (6.4ms)
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c] OrderMailer#received: processed outbound mail in 9.6ms
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c] Sent mail to dave@example.com (4.7ms)
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c] Date: Sun, 01 Jul 2018 21:48:07 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39926797f60_48b1ce6f4492672@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] [ActionMailer::DeliveryJob] [36fdfba3-7579-4b38-aab6-95b57e74500c] Performed ActionMailer::DeliveryJob (Job ID: 36fdfba3-7579-4b38-aab6-95b57e74500c) from Test(mailers) in 16.18ms
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] Enqueued ActionMailer::DeliveryJob (Job ID: 36fdfba3-7579-4b38-aab6-95b57e74500c) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000005954840 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [355d0542-4783-4a2c-aa77-b216dbbb95d1] Performed ChargeOrderJob (Job ID: 355d0542-4783-4a2c-aa77-b216dbbb95d1) from Test(default) in 22.22ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 355d0542-4783-4a2c-aa77-b216dbbb95d1) to Test(default) with arguments: #<GlobalID:0x00000005a956c8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 57ms (ActiveRecord: 5.0ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:07.638957"], ["updated_at", "2018-07-02 02:48:07.638957"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (58.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.5ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (6.4ms)
Completed 200 OK in 91ms (Views: 80.7ms | ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.8ms)
  Rendered orders/new.html.erb within layouts/application (5.8ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (10.4ms)
Completed 200 OK in 34ms (Views: 25.7ms | ActiveRecord: 2.2ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 02:48:07.813682"], ["updated_at", "2018-07-02 02:48:07.813682"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 02:48:07.817760"], ["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [dbbcfe66-45c3-41d2-bf25-41f81e91546b] Performing ChargeOrderJob (Job ID: dbbcfe66-45c3-41d2-bf25-41f81e91546b) from Test(default) with arguments: #<GlobalID:0x000000077e2230 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [dbbcfe66-45c3-41d2-bf25-41f81e91546b] Error performing ChargeOrderJob (Job ID: dbbcfe66-45c3-41d2-bf25-41f81e91546b) from Test(default) in 3.37ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:39:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:34:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-js-3.0.10/lib/i18n/js/middleware.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 36ms (ActiveRecord: 4.4ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-01 21:48:07 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (7.7ms)
  Rendered users/edit.html.erb within layouts/application (11.2ms)
Completed 200 OK in 29ms (Views: 21.2ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.4ms)
Started GET "/users" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 19ms (Views: 13.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.1ms)
Completed 200 OK in 17ms (Views: 10.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$ufxpnIcFf6tlrFRJYLRb6ukiTJWOTH7ZazEt1Vy1FnMrIXcTC8SUq"], ["updated_at", "2018-07-02 02:48:08.451065"], ["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 19ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 12ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$K.oudIKOB20hnsHWBBuWfuTHJsWNWWovGjeVhK/QFw.APSl4YwZUO"], ["created_at", "2018-07-02 02:48:08.748546"], ["updated_at", "2018-07-02 02:48:08.748546"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 15ms (ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (3.4ms)
  Rendered users/new.html.erb within layouts/application (5.6ms)
Completed 200 OK in 19ms (Views: 14.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (6.6ms)
OrderMailer#received: processed outbound mail in 10.0ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.5ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (11.7ms)
OrderMailer#shipped: processed outbound mail in 24.1ms
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:08 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:09.105147"], ["updated_at", "2018-07-02 02:48:09.105147"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.2ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:09.119600"], ["updated_at", "2018-07-02 02:48:09.119600"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 24ms (ActiveRecord: 4.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.8ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.2ms)
  Rendered carts/_cart.html.erb (10.6ms)
Completed 200 OK in 43ms (Views: 36.7ms | ActiveRecord: 2.6ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 14ms (ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (11.1ms)
  Rendered line_items/edit.html.erb within layouts/application (15.8ms)
Completed 200 OK in 37ms (Views: 30.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 1.0ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 17ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:09.840577"], ["updated_at", "2018-07-02 02:48:09.840577"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.9ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:09.857386"], ["updated_at", "2018-07-02 02:48:09.857386"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (13.6ms)
  Rendered line_items/create.js.erb (14.9ms)
Completed 200 OK in 62ms (Views: 16.0ms | ActiveRecord: 4.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 122ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (7.9ms)
Completed 200 OK in 27ms (Views: 20.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (15.3ms)
Completed 200 OK in 35ms (Views: 27.3ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (5.1ms)
  Rendered line_items/new.html.erb within layouts/application (8.2ms)
Completed 200 OK in 29ms (Views: 22.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.2ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.4ms)
  Rendered carts/_cart.html.erb (15.1ms)
  Rendered carts/show.html.erb within layouts/application (17.3ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (0.9ms)
  Rendered carts/_cart.html.erb (5.8ms)
Completed 200 OK in 50ms (Views: 41.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:10.766279"], ["updated_at", "2018-07-02 02:48:10.766279"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 12ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-01 21:48:10 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (6.5ms)
  Rendered carts/edit.html.erb within layouts/application (9.7ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.5ms)
  Rendered carts/_cart.html.erb (12.8ms)
Completed 200 OK in 50ms (Views: 41.5ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.2ms)
  Rendered carts/new.html.erb within layouts/application (6.4ms)
  Rendered collection of templates [0 times] (0.1ms)
  Rendered carts/_cart.html.erb (4.7ms)
Completed 200 OK in 34ms (Views: 27.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:11.327592"], ["updated_at", "2018-07-02 02:48:11.327592"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (3.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:11.347142"], ["updated_at", "2018-07-02 02:48:11.347142"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 32ms (ActiveRecord: 7.0ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.5ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 31ms (ActiveRecord: 2.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 18ms (Views: 13.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:11.832692"], ["updated_at", "2018-07-02 02:48:11.832692"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.3ms)
  [1m[36mLineItem Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.3ms)
Completed 200 OK in 40ms (Views: 29.9ms | ActiveRecord: 3.0ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:11.893117"], ["updated_at", "2018-07-02 02:48:11.893117"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (7.8ms)
  Rendered line_items/create.js.erb (9.1ms)
Completed 200 OK in 29ms (Views: 10.3ms | ActiveRecord: 3.6ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (7.1ms)
  Rendered orders/new.html.erb within layouts/application (8.1ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.3ms)
  Rendered carts/_cart.html.erb (10.4ms)
Completed 200 OK in 36ms (Views: 27.9ms | ActiveRecord: 2.0ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:48:11 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 02:48:11.982447"], ["updated_at", "2018-07-02 02:48:11.982447"]]
  [1m[36mLineItem Update (0.7ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 02:48:11.986703"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] Performing ChargeOrderJob (Job ID: 1b37de59-8845-4ba1-901e-43db68cbb993) from Test(default) with arguments: #<GlobalID:0x000000077d1a20 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] Processing check: /
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] Done
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791] Performing ActionMailer::DeliveryJob (Job ID: efa74dca-dbdb-4bf8-badf-a4c3651fb791) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000077c74a8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791]   [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.8ms)
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791]   Rendered order_mailer/received.text.erb within layouts/mailer (6.3ms)
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791] OrderMailer#received: processed outbound mail in 9.4ms
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791] Sent mail to dave@example.com (4.7ms)
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791] Date: Sun, 01 Jul 2018 21:48:12 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b39926c580b_48b1ce6f44927b6@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] [ActionMailer::DeliveryJob] [efa74dca-dbdb-4bf8-badf-a4c3651fb791] Performed ActionMailer::DeliveryJob (Job ID: efa74dca-dbdb-4bf8-badf-a4c3651fb791) from Test(mailers) in 15.96ms
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] Enqueued ActionMailer::DeliveryJob (Job ID: efa74dca-dbdb-4bf8-badf-a4c3651fb791) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000077d1a20 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [1b37de59-8845-4ba1-901e-43db68cbb993] Performed ChargeOrderJob (Job ID: 1b37de59-8845-4ba1-901e-43db68cbb993) from Test(default) in 21.84ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 1b37de59-8845-4ba1-901e-43db68cbb993) to Test(default) with arguments: #<GlobalID:0x000000077da058 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 57ms (ActiveRecord: 5.4ms)
Started GET "/en" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:12.038911"], ["updated_at", "2018-07-02 02:48:12.038911"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.8ms)
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.9ms)
Completed 200 OK in 46ms (Views: 35.4ms | ActiveRecord: 3.8ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:12.108412"], ["updated_at", "2018-07-02 02:48:12.108412"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.0ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:12.124443"], ["updated_at", "2018-07-02 02:48:12.124443"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:12.135606"], ["updated_at", "2018-07-02 02:48:12.135606"], ["price", 9.99]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:12.150617"], ["updated_at", "2018-07-02 02:48:12.150617"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.1ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:12.166746"], ["updated_at", "2018-07-02 02:48:12.166746"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 02:48:12.175619"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.9ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:12.393798"], ["updated_at", "2018-07-02 02:48:12.393798"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (15.8ms)
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (5.1ms)
Completed 200 OK in 41ms (Views: 31.0ms | ActiveRecord: 3.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 126ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-01 21:48:12 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 12ms (Views: 9.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 21ms (Views: 12.3ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 124ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 17ms (Views: 10.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:13.718769"], ["updated_at", "2018-07-02 02:48:13.718769"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 13ms (ActiveRecord: 2.0ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 117ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (1.0ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:13.882669"], ["updated_at", "2018-07-02 02:48:13.882669"]]
  [1m[35m (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (1.3ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 02:48:13.900388"], ["updated_at", "2018-07-02 02:48:13.900388"], ["price", 49.5]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 29ms (ActiveRecord: 4.9ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.7ms)
  Rendered orders/new.html.erb within layouts/application (5.7ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (6.2ms)
  Rendered carts/_cart.html.erb (13.9ms)
Completed 200 OK in 44ms (Views: 32.1ms | ActiveRecord: 2.9ms)
  [1m[35m (0.7ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 119ms (ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 02:48:14.109472"], ["updated_at", "2018-07-02 02:48:14.109472"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.8ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 02:48:14.119332"], ["updated_at", "2018-07-02 02:48:14.119332"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.6ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 1b5f7399-de4f-42ca-905a-8774e15141b5) to Async(default) with arguments: #<GlobalID:0x000000079280b8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [1b5f7399-de4f-42ca-905a-8774e15141b5] Performing ChargeOrderJob (Job ID: 1b5f7399-de4f-42ca-905a-8774e15141b5) from Async(default) with arguments: #<GlobalID:0x0000000791f260 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
[ActiveJob] [ChargeOrderJob] [1b5f7399-de4f-42ca-905a-8774e15141b5] Processing check: /
Completed 302 Found in 38ms (ActiveRecord: 4.5ms)
[ActiveJob] [ChargeOrderJob] [1b5f7399-de4f-42ca-905a-8774e15141b5] Done
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [1b5f7399-de4f-42ca-905a-8774e15141b5] Enqueued ActionMailer::DeliveryJob (Job ID: 075ee64f-d1ba-49ad-8266-9991697b31ad) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x0000000791f260 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [1b5f7399-de4f-42ca-905a-8774e15141b5] Performed ChargeOrderJob (Job ID: 1b5f7399-de4f-42ca-905a-8774e15141b5) from Async(default) in 15.32ms
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (6.0ms)
  Rendered orders/edit.html.erb within layouts/application (8.9ms)
Completed 200 OK in 22ms (Views: 16.7ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 124ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (1.1ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.7ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 21ms (ActiveRecord: 4.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.4ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-01 21:48:14 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (5.7ms)
Completed 200 OK in 20ms (Views: 14.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.5ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "products"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "carts"[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('Dave Thomas', 'MyText', 'dave@example.org', 0, '2018-07-02 21:22:03.472424', '2018-07-02 21:22:03.472424', 980190962)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'MyString', 1, '2018-07-02 21:22:03.472424', '2018-07-02 21:22:03.472424', 298486374)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 21:22:03.498345', '2018-07-02 21:22:03.498345', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at", "id") VALUES ('MyString', 'MyText', 'lorem.jpg', 9.99, '2018-07-02 21:22:03.498345', '2018-07-02 21:22:03.498345', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "price", "image_url", "created_at", "updated_at", "id") VALUES ('Programming Ruby 1.9', 'Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.', 49.5, 'ruby.jpg', '2018-07-02 21:22:03.498345', '2018-07-02 21:22:03.498345', 207281424)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('dave', '$2a$10$EXkY6Uu6gfEpkProESUPJOAWJGqyXCbsfj7QUm4eTjj4Ki.Gq3lUm', '2018-07-02 21:22:03.504272', '2018-07-02 21:22:03.504272', 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at", "id") VALUES ('susannah', '$2a$10$s2YHh0VwBVO9SojRv/OWtuigrxwug3pPyX7tfbaJmDqIZKG2I97Ia', '2018-07-02 21:22:03.504272', '2018-07-02 21:22:03.504272', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 21:22:03.509340', '2018-07-02 21:22:03.509340', 980190962)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "id") VALUES ('2018-07-02 21:22:03.509340', '2018-07-02 21:22:03.509340', 298486374)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "product_id", "cart_id") VALUES ('2018-07-02 21:22:03.513608', '2018-07-02 21:22:03.513608', 980190962, 298486374, 980190962)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("created_at", "updated_at", "id", "order_id", "product_id") VALUES ('2018-07-02 21:22:03.513608', '2018-07-02 21:22:03.513608', 298486374, 980190962, 207281424)[0m
  [1m[35m (36.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
CartsControllerTest: test_should_destroy_cart
---------------------------------------------
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:03 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 126ms (ActiveRecord: 0.5ms)
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:04 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:04.181991"], ["updated_at", "2018-07-02 21:22:04.181991"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:04.229776"], ["updated_at", "2018-07-02 21:22:04.229776"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 57ms (ActiveRecord: 3.3ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started DELETE "/carts/980190963" for 127.0.0.1 at 2018-07-02 16:22:04 -0500
Processing by CartsController#destroy as HTML
  Parameters: {"id"=>"980190963"}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Destroy (0.4ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 13ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_get_index
------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:04 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/carts" for 127.0.0.1 at 2018-07-02 16:22:04 -0500
Processing by CartsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/index.html.erb within layouts/application
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts"[0m
  Rendered carts/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 4977ms (Views: 4944.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_create_cart
--------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
Started POST "/carts" for 127.0.0.1 at 2018-07-02 16:22:09 -0500
Processing by CartsController#create as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:09.520703"], ["updated_at", "2018-07-02 21:22:09.520703"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190963
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "carts"[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" ORDER BY "carts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
CartsControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962/edit" for 127.0.0.1 at 2018-07-02 16:22:09 -0500
Processing by CartsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/edit.html.erb within layouts/application
  Rendered carts/_form.html.erb (3.8ms)
  Rendered carts/edit.html.erb within layouts/application (7.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (8.9ms)
  Rendered carts/_cart.html.erb (19.4ms)
Completed 200 OK in 69ms (Views: 37.9ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
CartsControllerTest: test_should_show_cart
------------------------------------------
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/carts/980190962" for 127.0.0.1 at 2018-07-02 16:22:09 -0500
Processing by CartsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/show.html.erb within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.5ms)
  Rendered carts/_cart.html.erb (9.8ms)
  Rendered carts/show.html.erb within layouts/application (11.6ms)
  Rendered collection of line_items/_line_item.html.erb [1 times] (0.9ms)
  Rendered carts/_cart.html.erb (3.8ms)
Completed 200 OK in 56ms (Views: 23.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
CartsControllerTest: test_should_update_cart
--------------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:09 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started PATCH "/carts/980190962" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by CartsController#update as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/carts/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
CartsControllerTest: test_should_get_new
----------------------------------------
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
Started GET "/carts/new" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by CartsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering carts/new.html.erb within layouts/application
  Rendered carts/_form.html.erb (1.9ms)
  Rendered carts/new.html.erb within layouts/application (4.1ms)
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (3.2ms)
Completed 200 OK in 53ms (Views: 18.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------------
SessionsControllerTest: test_should_prompt_for_login
----------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (4.7ms)
Completed 200 OK in 42ms (Views: 14.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
SessionsControllerTest: test_should_login
-----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
SessionsControllerTest: test_should_fail_login
----------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/login
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
SessionsControllerTest: test_should_logout
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:10 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_show_user
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/show.html.erb within layouts/application
  Rendered users/show.html.erb within layouts/application (2.1ms)
Completed 200 OK in 21ms (Views: 11.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
UsersControllerTest: test_should_get_edit
-----------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/users/980190962/edit" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/edit.html.erb within layouts/application
  Rendered users/_form.html.erb (20.8ms)
  Rendered users/edit.html.erb within layouts/application (24.5ms)
Completed 200 OK in 65ms (Views: 32.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_update_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
Started PATCH "/users/980190962" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by UsersController#update as HTML
  Parameters: {"user"=>{"name"=>"dave", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? AND "users"."id" != ? LIMIT ?[0m  [["name", "dave"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "password_digest" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["password_digest", "$2a$04$Ia74UFoV7yZlnk3IWU/GEOnaesLA93rQnMgvkd5Fm8/JzfHO3T8YG"], ["updated_at", "2018-07-02 21:22:11.541981"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 17ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
UsersControllerTest: test_should_destroy_user
---------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started DELETE "/users/980190962" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by UsersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 12ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/users/new" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/new.html.erb within layouts/application
  Rendered users/_form.html.erb (3.0ms)
  Rendered users/new.html.erb within layouts/application (5.0ms)
Completed 200 OK in 40ms (Views: 11.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
UsersControllerTest: test_should_create_user
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 112ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2018-07-02 16:22:11 -0500
Processing by UsersController#create as HTML
  Parameters: {"user"=>{"name"=>"sam", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "sam"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "sam"], ["password_digest", "$2a$04$.wzvaA/50wIOR0.6P.hu2ebsfDWSkuFXM7HbjvspeGWy7TImv.j6C"], ["created_at", "2018-07-02 21:22:12.001310"], ["updated_at", "2018-07-02 21:22:12.001310"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/users
Completed 302 Found in 13ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
UsersControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/users" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering users/index.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."name" ASC[0m
  Rendered users/index.html.erb within layouts/application (8.1ms)
Completed 200 OK in 48ms (Views: 15.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductsControllerTest: test_should_show_product
------------------------------------------------
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by ProductsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/show.html.erb within layouts/application
  Rendered products/show.html.erb within layouts/application (2.5ms)
Completed 200 OK in 20ms (Views: 11.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
ProductsControllerTest: test_should_destroy_product
---------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started DELETE "/products/980190962" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Destroy (0.6ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 14ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------
ProductsControllerTest: test_should_require_login
-------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 114ms (ActiveRecord: 0.3ms)
Started DELETE "/logout" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#destroy as HTML
Redirected to http://www.example.com/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
Started GET "/products" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Redirected to http://www.example.com/login
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.4ms)
Started GET "/login" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#new as HTML
  Rendering sessions/new.html.erb within layouts/application
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------
ProductsControllerTest: test_can't_delete_product_in_cart
---------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started DELETE "/products/298486374" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by ProductsController#destroy as HTML
  Parameters: {"id"=>"298486374"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."product_id" = ? LIMIT ?[0m  [["product_id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products
Completed 302 Found in 10ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_update_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 113ms (ActiveRecord: 0.3ms)
Started PATCH "/products/980190962" for 127.0.0.1 at 2018-07-02 16:22:12 -0500
Processing by ProductsController#update as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? AND "products"."id" != ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Update (0.7ms)[0m  [1m[33mUPDATE "products" SET "title" = ?, "description" = ?, "price" = ?, "updated_at" = ? WHERE "products"."id" = ?[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["price", 19.95], ["updated_at", "2018-07-02 21:22:12.975386"], ["id", 980190962]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered store/index.html.erb (15.5ms)
[ActionCable] Broadcasting to products: {:html=>"<p id=\"notice\"></p>\n\n<h1>Your Pragmatic Catalog</h1>\n\n\n\n     <div class=\"entry\">\n       <img src=\"/assets/ruby-3c80d98d55ed3973340e6a17a478c57875a36c62e39d5f0cb0291cc48fc88eff.jpg\" />\n       <h3>Programming Ruby 1.9</h3>\n       Ruby is the fastest growing and most exciting dynamic language out there.  If you need to get working programs delivered fast, you should add Ruby to your toolbox.\n       <div class=\"price_line\">\n         <span class=\"price\">$49.50</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=207281424\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>MyString</h3>\n       MyText\n       <div class=\"price_line\">\n         <span class=\"price\">$9.99</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=298486374\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n     <div class=\"entry\">\n       <img src=\"/assets/lorem-5b378c729aa55c98524cbdc53f9e4743f0e8ec8ab9f1716bbf5a9496ec9b3d93.jpg\" />\n       <h3>Lorem Ipsum</h3>\n       Wibbles are fun!\n       <div class=\"price_line\">\n         <span class=\"price\">$19.95</span>\n         <form class=\"button_to\" method=\"post\" action=\"/en/line_items?product_id=980190962\" data-remote=\"true\"><input type=\"submit\" value=\"Add to Cart\" /></form>\n       </div>\n   </div>\n"}
Redirected to http://www.example.com/products/980190962
Completed 302 Found in 43ms (ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
ProductsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/new" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by ProductsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/new.html.erb within layouts/application
  Rendered products/_form.html.erb (13.8ms)
  Rendered products/new.html.erb within layouts/application (17.3ms)
Completed 200 OK in 55ms (Views: 25.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------
ProductsControllerTest: test_should_create_product
--------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started POST "/products" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by ProductsController#create as HTML
  Parameters: {"product"=>{"title"=>"Lorem Ipsum", "description"=>"Wibbles are fun!", "image_url"=>"lorem.jpg", "price"=>"19.95"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Lorem Ipsum"], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("title", "description", "image_url", "price", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["title", "Lorem Ipsum"], ["description", "Wibbles are fun!"], ["image_url", "lorem.jpg"], ["price", 19.95], ["created_at", "2018-07-02 21:22:13.338384"], ["updated_at", "2018-07-02 21:22:13.338384"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/products/980190963
Completed 302 Found in 14ms (ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
ProductsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/products" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by ProductsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  Rendered products/index.html.erb within layouts/application (13.2ms)
Completed 200 OK in 53ms (Views: 20.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
ProductsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/products/980190962/edit" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by ProductsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering products/edit.html.erb within layouts/application
  Rendered products/_form.html.erb (5.9ms)
  Rendered products/edit.html.erb within layouts/application (8.1ms)
Completed 200 OK in 48ms (Views: 15.4ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
OrdersControllerTest: test_requires_item_in_cart
------------------------------------------------
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by OrdersController#new as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:13.895752"], ["updated_at", "2018-07-02 21:22:13.895752"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/
Filter chain halted as :ensure_cart_isnt_empty rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 1.6ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
OrdersControllerTest: test_should_get_edit
------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:13 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/orders/980190962/edit" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by OrdersController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/edit.html.erb within layouts/application
  Rendered orders/_form.html.erb (12.2ms)
  Rendered orders/edit.html.erb within layouts/application (16.4ms)
Completed 200 OK in 57ms (Views: 25.3ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------
OrdersControllerTest: test_should_get_index
-------------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
Started GET "/orders" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by OrdersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/index.html.erb within layouts/application
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
  Rendered orders/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 43ms (Views: 13.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
OrdersControllerTest: test_should_show_order
--------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.4ms)
Started GET "/orders/980190962" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by OrdersController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering orders/show.html.erb within layouts/application
  Rendered orders/show.html.erb within layouts/application (2.3ms)
Completed 200 OK in 16ms (Views: 9.9ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------
OrdersControllerTest: test_should_destroy_order
-----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started DELETE "/orders/980190962" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by OrdersController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mLineItem Destroy (0.7ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 298486374]]
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders
Completed 302 Found in 19ms (ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_update_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 148ms (ActiveRecord: 0.3ms)
Started PATCH "/orders/980190962" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by OrdersController#update as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}, "id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/orders/980190962
Completed 302 Found in 10ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
OrdersControllerTest: test_should_get_new
-----------------------------------------
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 111ms (ActiveRecord: 0.3ms)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:14.917306"], ["updated_at", "2018-07-02 21:22:14.917306"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:14.930207"], ["updated_at", "2018-07-02 21:22:14.930207"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 21ms (ActiveRecord: 3.3ms)
Started GET "/orders/new" for 127.0.0.1 at 2018-07-02 16:22:14 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.8ms)
  Rendered orders/new.html.erb within layouts/application (7.9ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.5ms)
  Rendered carts/_cart.html.erb (10.7ms)
Completed 200 OK in 66ms (Views: 28.2ms | ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
OrdersControllerTest: test_should_create_order
----------------------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.2ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/orders" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"address"=>"MyText", "email"=>"dave@example.org", "name"=>"Dave Thomas", "pay_type"=>"Check"}}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:15.144452"], ["updated_at", "2018-07-02 21:22:15.144452"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "MyText"], ["email", "dave@example.org"], ["pay_type", 0], ["created_at", "2018-07-02 21:22:15.152629"], ["updated_at", "2018-07-02 21:22:15.152629"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :address, :email, :name, :pay_type
[ActiveJob] Enqueued ChargeOrderJob (Job ID: d8567d6b-6966-42d6-b5ef-2370f40b8639) to Async(default) with arguments: #<GlobalID:0x0000000925dda8 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
Redirected to http://www.example.com/en
[ActiveJob] [ChargeOrderJob] [d8567d6b-6966-42d6-b5ef-2370f40b8639] Performing ChargeOrderJob (Job ID: d8567d6b-6966-42d6-b5ef-2370f40b8639) from Async(default) with arguments: #<GlobalID:0x00000009242a58 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Completed 302 Found in 67ms (ActiveRecord: 3.8ms)
[ActiveJob] [ChargeOrderJob] [d8567d6b-6966-42d6-b5ef-2370f40b8639] Processing check: /
[ActiveJob] [ChargeOrderJob] [d8567d6b-6966-42d6-b5ef-2370f40b8639] Done
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
[ActiveJob] [ChargeOrderJob] [d8567d6b-6966-42d6-b5ef-2370f40b8639] Enqueued ActionMailer::DeliveryJob (Job ID: c63f70fd-0a21-49dc-9fcf-ea79e1ac5708) to Async(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000009242a58 @uri=#<URI::GID gid://depot/Order/980190963>>
  [1m[35m (0.8ms)[0m  [1m[31mrollback transaction[0m
[ActiveJob] [ChargeOrderJob] [d8567d6b-6966-42d6-b5ef-2370f40b8639] Performed ChargeOrderJob (Job ID: d8567d6b-6966-42d6-b5ef-2370f40b8639) from Async(default) in 35.88ms
  [1m[36mOrder Load (3.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
AdminControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/admin" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 18ms (Views: 10.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
StoreControllerTest: test_should_get_index
------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:15.561130"], ["updated_at", "2018-07-02 21:22:15.561130"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.5ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.6ms)
Completed 200 OK in 38ms (Views: 29.3ms | ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------
DslUserStoriesTest: test_buying_a_product
-----------------------------------------
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:15.653835"], ["updated_at", "2018-07-02 21:22:15.653835"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.5ms)
Completed 200 OK in 34ms (Views: 26.2ms | ActiveRecord: 2.2ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.7ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:15.707692"], ["updated_at", "2018-07-02 21:22:15.707692"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (2.3ms)
  Rendered carts/_cart.html.erb (11.6ms)
  Rendered line_items/create.js.erb (15.5ms)
Completed 200 OK in 66ms (Views: 24.8ms | ActiveRecord: 3.1ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.6ms)
  Rendered orders/new.html.erb within layouts/application (5.5ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (8.9ms)
Completed 200 OK in 30ms (Views: 22.7ms | ActiveRecord: 1.7ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 21:22:15.825401"], ["updated_at", "2018-07-02 21:22:15.825401"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 21:22:15.829254"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] Performing ChargeOrderJob (Job ID: 3333d249-bfd6-4000-b3be-88d1e08fd506) from Test(default) with arguments: #<GlobalID:0x00000008d5c2f0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] Processing check: /
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] Done
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d] Performing ActionMailer::DeliveryJob (Job ID: d48f606b-2360-477b-8abb-79bc19cf976d) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008d25548 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d]   Rendered collection of line_items/_line_item.text.erb [1 times] (3.9ms)
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d]   Rendered order_mailer/received.text.erb within layouts/mailer (10.0ms)
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d] OrderMailer#received: processed outbound mail in 124.4ms
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d] Sent mail to dave@example.com (12.0ms)
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d] Date: Mon, 02 Jul 2018 16:22:15 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3a9787efe87_af2e8af4494759@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] [ActionMailer::DeliveryJob] [d48f606b-2360-477b-8abb-79bc19cf976d] Performed ActionMailer::DeliveryJob (Job ID: d48f606b-2360-477b-8abb-79bc19cf976d) from Test(mailers) in 138.4ms
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] Enqueued ActionMailer::DeliveryJob (Job ID: d48f606b-2360-477b-8abb-79bc19cf976d) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000008d5c2f0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [3333d249-bfd6-4000-b3be-88d1e08fd506] Performed ChargeOrderJob (Job ID: 3333d249-bfd6-4000-b3be-88d1e08fd506) from Test(default) in 144.41ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 3333d249-bfd6-4000-b3be-88d1e08fd506) to Test(default) with arguments: #<GlobalID:0x00000008d69450 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 176ms (ActiveRecord: 4.7ms)
Started GET "/en" for 127.0.0.1 at 2018-07-02 16:22:15 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:16.001478"], ["updated_at", "2018-07-02 21:22:16.001478"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.4ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.5ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (7.0ms)
Completed 200 OK in 47ms (Views: 36.7ms | ActiveRecord: 3.5ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------
DslUserStoriesTest: test_two_people_buying
------------------------------------------
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items"[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:16.083393"], ["updated_at", "2018-07-02 21:22:16.083393"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:16.096386"], ["updated_at", "2018-07-02 21:22:16.096386"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.2ms)
  Rendered carts/_cart.html.erb (7.4ms)
  Rendered line_items/create.js.erb (8.3ms)
Completed 200 OK in 30ms (Views: 9.4ms | ActiveRecord: 3.4ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"298486374"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:16.119664"], ["updated_at", "2018-07-02 21:22:16.119664"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.5ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190964], ["created_at", "2018-07-02 21:22:16.132151"], ["updated_at", "2018-07-02 21:22:16.132151"], ["price", 9.99]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.1ms)
  Rendered line_items/create.js.erb (7.9ms)
Completed 200 OK in 28ms (Views: 8.9ms | ActiveRecord: 3.0ms)
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.6ms)
  Rendered orders/new.html.erb within layouts/application (5.5ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.7ms)
  Rendered carts/_cart.html.erb (9.0ms)
Completed 200 OK in 30ms (Views: 22.6ms | ActiveRecord: 1.7ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 21:22:16.210376"], ["updated_at", "2018-07-02 21:22:16.210376"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 21:22:16.214123"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.3ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] Performing ChargeOrderJob (Job ID: dfd00d0d-8691-4b79-bb35-a089c37afd4b) from Test(default) with arguments: #<GlobalID:0x000000088afcc0 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] Processing check: /
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] Done
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b]   [1m[36mCACHE Order Load (0.0ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284] Performing ActionMailer::DeliveryJob (Job ID: 457323df-e853-4253-bffe-996f01318284) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000088a4be0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284]   [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.4ms)
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284]   Rendered order_mailer/received.text.erb within layouts/mailer (5.2ms)
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284] OrderMailer#received: processed outbound mail in 8.0ms
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284] Sent mail to dave@example.com (4.5ms)
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284] Date: Mon, 02 Jul 2018 16:22:16 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3a97883ba7d_af2e8af449484e@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] [ActionMailer::DeliveryJob] [457323df-e853-4253-bffe-996f01318284] Performed ActionMailer::DeliveryJob (Job ID: 457323df-e853-4253-bffe-996f01318284) from Test(mailers) in 14.09ms
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] Enqueued ActionMailer::DeliveryJob (Job ID: 457323df-e853-4253-bffe-996f01318284) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x000000088afcc0 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [dfd00d0d-8691-4b79-bb35-a089c37afd4b] Performed ChargeOrderJob (Job ID: dfd00d0d-8691-4b79-bb35-a089c37afd4b) from Test(default) in 18.72ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: dfd00d0d-8691-4b79-bb35-a089c37afd4b) to Test(default) with arguments: #<GlobalID:0x000000088bc718 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 50ms (ActiveRecord: 4.6ms)
Started GET "/en" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.4ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:16.259009"], ["updated_at", "2018-07-02 21:22:16.259009"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (14.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190965], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.5ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.4ms)
Completed 200 OK in 44ms (Views: 34.0ms | ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190965]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."name" = ? LIMIT ?[0m  [["name", "Dave Thomas"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.2ms)
  Rendered orders/new.html.erb within layouts/application (5.3ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.9ms)
  Rendered carts/_cart.html.erb (9.4ms)
Completed 200 OK in 30ms (Views: 22.6ms | ActiveRecord: 1.7ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Mike Clark", "address"=>"345 The Avenue", "email"=>"mike@pragmaticstudio.com", "pay_type"=>"Credit card"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.5ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Mike Clark"], ["address", "345 The Avenue"], ["email", "mike@pragmaticstudio.com"], ["pay_type", 1], ["created_at", "2018-07-02 21:22:16.379933"], ["updated_at", "2018-07-02 21:22:16.379933"]]
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190964], ["updated_at", "2018-07-02 21:22:16.383870"], ["id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
[ActiveJob]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [14eaee91-356a-4491-be95-eb22292ac3cc] Performing ChargeOrderJob (Job ID: 14eaee91-356a-4491-be95-eb22292ac3cc) from Test(default) with arguments: #<GlobalID:0x00000008639388 @uri=#<URI::GID gid://depot/Order/980190964>>, {}
[ActiveJob] [ChargeOrderJob] [14eaee91-356a-4491-be95-eb22292ac3cc] Error performing ChargeOrderJob (Job ID: 14eaee91-356a-4491-be95-eb22292ac3cc) from Test(default) in 3.15ms: NoMethodError (undefined method `split' for nil:NilClass):
/home/susy/SCM/depot/app/models/order.rb:32:in `charge!'
/home/susy/SCM/depot/app/jobs/charge_order_job.rb:6:in `perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:39:in `block in perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-1.0.1/lib/i18n.rb:284:in `with_locale'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:26:in `block (4 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:25:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:22:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:35:in `perform_now'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:24:in `block in execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:28:in `block (4 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:87:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:73:in `block in wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/execution_wrapper.rb:83:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/reloader.rb:72:in `wrap'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/railtie.rb:27:in `block (3 levels) in <class:Railtie>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/execution.rb:22:in `execute'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:50:in `enqueue_or_perform'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/queue_adapters/test_adapter.rb:32:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:53:in `block in enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:109:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:17:in `block (3 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `block in tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:46:in `tag_logger'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/logging.rb:16:in `block (2 levels) in <module:Logging>'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `instance_exec'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:136:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:49:in `enqueue'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/enqueuing.rb:20:in `perform_later'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:39:in `block in create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/mime_responds.rb:197:in `respond_to'
/home/susy/SCM/depot/app/controllers/orders_controller.rb:34:in `create'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:194:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rendering.rb:30:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:42:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:132:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/callbacks.rb:41:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/rescue.rb:22:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `block in instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications/instrumenter.rb:23:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/notifications.rb:168:in `instrument'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/instrumentation.rb:32:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activerecord-5.2.0/lib/active_record/railties/controller_runtime.rb:24:in `process_action'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/abstract_controller/base.rb:134:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionview-5.2.0/lib/action_view/rendering.rb:32:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:191:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_controller/metal.rb:252:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:34:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:52:in `block in serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/journey/router.rb:35:in `serve'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/routing/route_set.rb:840:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/i18n-js-3.0.10/lib/i18n/js/middleware.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/tempfile_reaper.rb:15:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/etag.rb:25:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/conditional_get.rb:38:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/head.rb:12:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/http/content_security_policy.rb:18:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:232:in `context'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/session/abstract/id.rb:226:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/cookies.rb:670:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/callbacks.rb:98:in `run_callbacks'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/callbacks.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:38:in `call_app'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `block in call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `block in tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/tagged_logging.rb:71:in `tagged'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/rack/logger.rb:26:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/request_id.rb:27:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/method_override.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/runtime.rb:22:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activesupport-5.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/executor.rb:14:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/middleware/static.rb:127:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-2.0.5/lib/rack/sendfile.rb:111:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/engine.rb:524:in `call'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/mock_session.rb:29:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:259:in `process_request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/rack-test-1.0.0/lib/rack/test.rb:119:in `request'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:263:in `process'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:24:in `post'
/home/susy/.rvm/gems/ruby-2.4.1/gems/actionpack-5.2.0/lib/action_dispatch/testing/integration.rb:350:in `block (2 levels) in <module:Runner>'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:89:in `checks_out'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:59:in `block in test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/activejob-5.2.0/lib/active_job/test_helper.rb:380:in `perform_enqueued_jobs'
/home/susy/SCM/depot/test/integration/dsl_user_stories_test.rb:50:in `test_two_people_buying'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:98:in `block (3 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:195:in `capture_exceptions'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:95:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:265:in `time_it'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:94:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:211:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest/test.rb:93:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:960:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:334:in `run_one_method'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:321:in `block (2 levels) in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `each'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:320:in `block in run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:360:in `on_signal'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:347:in `with_info_handler'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:319:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/railties-5.2.0/lib/rails/test_unit/line_filtering.rb:10:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `block in __run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `map'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:159:in `__run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:136:in `run'
/home/susy/.rvm/gems/ruby-2.4.1/gems/minitest-5.11.3/lib/minitest.rb:63:in `block in autorun'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 4.1ms)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_create_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by LineItemsController#create as HTML
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:16.543621"], ["updated_at", "2018-07-02 21:22:16.543621"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:16.556283"], ["updated_at", "2018-07-02 21:22:16.556283"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/
Completed 302 Found in 20ms (ActiveRecord: 3.4ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started GET "/" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by StoreController#index as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.0ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (3.6ms)
  Rendered carts/_cart.html.erb (8.7ms)
Completed 200 OK in 36ms (Views: 30.7ms | ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------
LineItemsControllerTest: test_should_create_line_item_via_ajax
--------------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:16.745217"], ["updated_at", "2018-07-02 21:22:16.745217"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:16.757797"], ["updated_at", "2018-07-02 21:22:16.757797"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.8ms)
  Rendered line_items/create.js.erb (8.8ms)
Completed 200 OK in 30ms (Views: 10.0ms | ActiveRecord: 3.6ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
LineItemsControllerTest: test_should_show_line_item
---------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by LineItemsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/show.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/show.html.erb within layouts/application (10.9ms)
Completed 200 OK in 50ms (Views: 19.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------------------------------
LineItemsControllerTest: test_should_update_line_item
-----------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:16 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started PATCH "/line_items/980190962" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by LineItemsController#update as HTML
  Parameters: {"line_item"=>{"product_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items/980190962
Completed 302 Found in 12ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
LineItemsControllerTest: test_should_destroy_line_item
------------------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
Started DELETE "/line_items/980190962" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by LineItemsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = ?[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://www.example.com/line_items
Completed 302 Found in 9ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items"[0m
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------
LineItemsControllerTest: test_should_get_edit
---------------------------------------------
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 115ms (ActiveRecord: 0.3ms)
Started GET "/line_items/980190962/edit" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by LineItemsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/edit.html.erb within layouts/application
  Rendered line_items/_form.html.erb (6.4ms)
  Rendered line_items/edit.html.erb within layouts/application (12.5ms)
Completed 200 OK in 48ms (Views: 20.8ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------
LineItemsControllerTest: test_should_get_new
--------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/line_items/new" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by LineItemsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/new.html.erb within layouts/application
  Rendered line_items/_form.html.erb (3.8ms)
  Rendered line_items/new.html.erb within layouts/application (7.7ms)
Completed 200 OK in 47ms (Views: 16.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------------------
LineItemsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 110ms (ActiveRecord: 0.3ms)
Started GET "/line_items" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by LineItemsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering line_items/index.html.erb within layouts/application
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendered line_items/index.html.erb within layouts/application (13.9ms)
Completed 200 OK in 51ms (Views: 20.3ms | ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
ProductTest: test_product_price_must_be_positive
------------------------------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------
ProductTest: test_image_url
---------------------------
  [1m[36mProduct Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "My Book Title"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------
ProductTest: test_product_attributes_must_not_be_empty
------------------------------------------------------
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title_-_i18n
--------------------------------------------------------------------
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------
ProductTest: test_product_is_not_valid_without_a_unique_title
-------------------------------------------------------------
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "products" WHERE "products"."title" = ? LIMIT ?[0m  [["title", "Programming Ruby 1.9"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------
CartTest: test_add_duplicate_product
------------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:17.859733"], ["updated_at", "2018-07-02 21:22:17.859733"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:17.874264"], ["updated_at", "2018-07-02 21:22:17.874264"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Update (0.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["quantity", 2], ["updated_at", "2018-07-02 21:22:17.881952"], ["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
----------------------------------
CartTest: test_add_unique_products
----------------------------------
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.7ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:17.892404"], ["updated_at", "2018-07-02 21:22:17.892404"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:17.906728"], ["updated_at", "2018-07-02 21:22:17.906728"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 298486374], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 298486374], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.6ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 298486374], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:17.917079"], ["updated_at", "2018-07-02 21:22:17.917079"], ["price", 9.99]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
--------------------------------------
UserStoriesTest: test_buying_a_product
--------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
Started POST "/login" for 127.0.0.1 at 2018-07-02 16:22:17 -0500
Processing by SessionsController#create as HTML
  Parameters: {"name"=>"dave", "password"=>"[FILTERED]"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."name" = ? LIMIT ?[0m  [["name", "dave"], ["LIMIT", 1]]
Redirected to http://www.example.com/admin
Completed 302 Found in 109ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2018-07-02 16:22:18 -0500
Processing by StoreController#index as HTML
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:18.059165"], ["updated_at", "2018-07-02 21:22:18.059165"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.2ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.6ms)
Completed 200 OK in 36ms (Views: 27.4ms | ActiveRecord: 2.5ms)
Started POST "/line_items" for 127.0.0.1 at 2018-07-02 16:22:18 -0500
Processing by LineItemsController#create as JS
  Parameters: {"product_id"=>"207281424"}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT  "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["product_id", 207281424], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Create (0.8ms)[0m  [1m[32mINSERT INTO "line_items" ("product_id", "cart_id", "created_at", "updated_at", "price") VALUES (?, ?, ?, ?, ?)[0m  [["product_id", 207281424], ["cart_id", 980190963], ["created_at", "2018-07-02 21:22:18.113971"], ["updated_at", "2018-07-02 21:22:18.113971"], ["price", 49.5]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering line_items/create.js.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (1.1ms)
  Rendered carts/_cart.html.erb (7.1ms)
  Rendered line_items/create.js.erb (8.1ms)
Completed 200 OK in 26ms (Views: 9.2ms | ActiveRecord: 3.1ms)
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
Started GET "/orders/new" for 127.0.0.1 at 2018-07-02 16:22:18 -0500
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  Rendering orders/new.html.erb within layouts/application
  Rendered orders/_form.html.erb (4.5ms)
  Rendered orders/new.html.erb within layouts/application (5.4ms)
  [1m[36mCACHE LineItem Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (4.0ms)
  Rendered carts/_cart.html.erb (9.7ms)
Completed 200 OK in 32ms (Views: 23.8ms | ActiveRecord: 1.8ms)
Started POST "/orders" for 127.0.0.1 at 2018-07-02 16:22:18 -0500
Processing by OrdersController#create as HTML
  Parameters: {"order"=>{"name"=>"Dave Thomas", "address"=>"123 The Street", "email"=>"dave@example.com", "pay_type"=>"Check"}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("name", "address", "email", "pay_type", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "Dave Thomas"], ["address", "123 The Street"], ["email", "dave@example.com"], ["pay_type", 0], ["created_at", "2018-07-02 21:22:18.193552"], ["updated_at", "2018-07-02 21:22:18.193552"]]
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = ?[0m  [["cart_id", nil], ["order_id", 980190963], ["updated_at", "2018-07-02 21:22:18.197343"], ["id", 980190963]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190963]]
  [1m[36mCart Destroy (0.4ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Unpermitted parameters: :name, :address, :email, :pay_type
[ActiveJob]   [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] Performing ChargeOrderJob (Job ID: 8a7314ad-a990-4635-91de-e3fc8da86120) from Test(default) with arguments: #<GlobalID:0x00000007b4f788 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] Processing check: /
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] Done
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120]   [1m[36mCACHE Order Load (0.1ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153] Performing ActionMailer::DeliveryJob (Job ID: 1ac684f1-4cb4-4eb1-92bc-1b940c738153) from Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007b373b8 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153]   Rendering order_mailer/received.text.erb within layouts/mailer
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153]   [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153]   [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153]   Rendered collection of line_items/_line_item.text.erb [1 times] (2.6ms)
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153]   Rendered order_mailer/received.text.erb within layouts/mailer (5.9ms)
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153] OrderMailer#received: processed outbound mail in 8.9ms
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153] Sent mail to dave@example.com (4.5ms)
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153] Date: Mon, 02 Jul 2018 16:22:18 -0500
From: Sam Ruby <depot@example.com>
To: dave@example.com
Message-ID: <5b3a978a3803f_af2e8af44949f0@susy-pc.mail>
Subject: Pragmatic Store Order Confirmation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Dave Thomas

Thank you for your recent order from The Pragmatic Store.

You ordered the following items:

 1 x Programming Ruby 1.9

We'll send you a separate e-mail when your order ships.


[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] [ActionMailer::DeliveryJob] [1ac684f1-4cb4-4eb1-92bc-1b940c738153] Performed ActionMailer::DeliveryJob (Job ID: 1ac684f1-4cb4-4eb1-92bc-1b940c738153) from Test(mailers) in 15.03ms
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] Enqueued ActionMailer::DeliveryJob (Job ID: 1ac684f1-4cb4-4eb1-92bc-1b940c738153) to Test(mailers) with arguments: "OrderMailer", "received", "deliver_now", #<GlobalID:0x00000007b4f788 @uri=#<URI::GID gid://depot/Order/980190963>>
[ActiveJob] [ChargeOrderJob] [8a7314ad-a990-4635-91de-e3fc8da86120] Performed ChargeOrderJob (Job ID: 8a7314ad-a990-4635-91de-e3fc8da86120) from Test(default) in 20.16ms
[ActiveJob] Enqueued ChargeOrderJob (Job ID: 8a7314ad-a990-4635-91de-e3fc8da86120) to Test(default) with arguments: #<GlobalID:0x00000007b57f78 @uri=#<URI::GID gid://depot/Order/980190963>>, {}
Redirected to http://www.example.com/en
Completed 302 Found in 51ms (ActiveRecord: 4.9ms)
Started GET "/en" for 127.0.0.1 at 2018-07-02 16:22:18 -0500
Processing by StoreController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCart Create (0.5ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2018-07-02 21:22:18.244383"], ["updated_at", "2018-07-02 21:22:18.244383"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  Rendering store/index.html.erb within layouts/application
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."title" ASC[0m
  Rendered store/index.html.erb within layouts/application (13.3ms)
  [1m[36mLineItem Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT ?[0m  [["cart_id", 980190964], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  Rendered collection of templates [0 times] (0.0ms)
  Rendered carts/_cart.html.erb (4.7ms)
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered orders/_order.html.erb (5.6ms)
Completed 200 OK in 44ms (Views: 33.9ms | ActiveRecord: 3.9ms)
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT  "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT ?[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 980190964]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190963]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------
OrderMailerTest: test_received
------------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/received.text.erb within layouts/mailer
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.text.erb [1 times] (2.5ms)
  Rendered order_mailer/received.text.erb within layouts/mailer (5.7ms)
OrderMailer#received: processed outbound mail in 8.7ms
  [1m[35m (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
-----------------------------
OrderMailerTest: test_shipped
-----------------------------
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT  "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 980190962], ["LIMIT", 1]]
  Rendering order_mailer/shipped.html.erb within layouts/mailer
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 980190962]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT  "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 207281424], ["LIMIT", 1]]
  Rendered collection of line_items/_line_item.html.erb [1 times] (5.0ms)
  Rendered order_mailer/shipped.html.erb within layouts/mailer (11.3ms)
OrderMailer#shipped: processed outbound mail in 51.1ms
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
